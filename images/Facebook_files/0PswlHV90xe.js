/*!CK:2627059609!*//*1418025705,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["gi2HR"]); }

__d("PUWApplications",[],function(a,b,c,d,e,f){e.exports={WEB_SIMPLE:"web_simple",WEB_FLASH:"web_flash",WEB_HTML5:"web_html5",WEB_COMPOSER:"web_composer",WEB_ARCHIVE:"web_archive",WEB_MESSENGER:"web_messenger",WEB_OMNIPICKER:"web_omnipicker",WEB_MUSE_OMNIPICKER:"web_muse_omnipicker",WEB_SAY_THANKS:"web_say_thanks",WEB_GOODWILL_CAMPAIGN_OMNIPICKER:"web_goodwill_campaign_omnipicker",WEB_M_ZERO:"web_m_zero",WEB_M_BASIC:"web_m_basic",WEB_M_TOUCH:"web_m_touch",MOBILE_FB4IOS:"mobile_fb4ios",MOBILE_FB4IOS_SNAP:"mobile_fb4ios_snap",MOBILE_FB4A:"mobile_fb4a",MOBILE_PMA_ANDROID:"mobile_pma_android",MOBILE_PMA_IOS:"mobile_pma_ios",THIRD_PARTY:"third_party"};},null);
__d("PUWSteps",[],function(a,b,c,d,e,f){e.exports={CLIENT_FLOW_BEGIN:"client_flow_begin",CLIENT_SELECT_BEGIN:"client_select_begin",CLIENT_SELECT_SUCCESS:"client_select_success",CLIENT_SELECT_CANCEL:"client_select_cancel",CLIENT_SELECT_FAIL:"client_select_fail",CLIENT_FLOW_POST:"client_flow_post",CLIENT_TRANSFER_BATCH_BEGIN:"client_transfer_batch_begin",CLIENT_UPLOAD_BEGIN:"client_upload_begin",CLIENT_ATTACH_PHOTO:"client_attach_photo",CLIENT_PROCESS_BEGIN:"client_process_begin",CLIENT_PROCESS_SUCCESS:"client_process_success",CLIENT_PROCESS_CANCEL:"client_process_cancel",CLIENT_PROCESS_SKIP:"client_process_skip",CLIENT_PROCESS_FAIL:"client_process_fail",CLIENT_PROCESS_UNAVAILABLE:"client_process_unavailable",CLIENT_TRANSFER_ENQUEUE:"client_transfer_enqueue",CLIENT_TRANSFER_BEGIN:"client_transfer_begin",CLIENT_TRANSFER_SUCCESS:"client_transfer_success",CLIENT_TRANSFER_CANCEL:"client_transfer_cancel",CLIENT_TRANSFER_FAIL:"client_transfer_fail",CLIENT_TRANSFER_MANUAL_RETRY:"client_transfer_manual_retry",CLIENT_UPLOAD_SUCCESS:"client_upload_success",CLIENT_UPLOAD_FAIL:"client_upload_fail",CLIENT_UPLOAD_CANCEL:"client_upload_cancel",CLIENT_UPLOAD_REMOVE:"client_upload_remove",CLIENT_FACEREC_BEGIN:"client_facerec_begin",CLIENT_FACEREC_SUCCESS:"client_facerec_success",CLIENT_FACEREC_FAIL:"client_facerec_fail",CLIENT_PHOTO_PREVIEW_OPEN:"client_photo_preview_open",CLIENT_PHOTO_PREVIEW_CLOSE:"client_photo_preview_close",CLIENT_TRANSFER_BATCH_SUCCESS:"client_transfer_batch_success",CLIENT_TRANSFER_BATCH_CANCEL:"client_transfer_batch_cancel",CLIENT_TRANSFER_BATCH_FAIL:"client_transfer_batch_fail",CLIENT_PUBLISH_ENQUEUE:"client_publish_enqueue",CLIENT_PUBLISH_BEGIN:"client_publish_begin",CLIENT_PUBLISH_SUCCESS:"client_publish_success",CLIENT_PUBLISH_FAIL:"client_publish_fail",CLIENT_ATTEMPT_FAIL:"client_attempt_fail",CLIENT_FLOW_SUCCESS:"client_flow_success",CLIENT_FLOW_FATAL:"client_flow_fatal",CLIENT_FLOW_GIVEUP:"client_flow_giveup",CLIENT_FLOW_CANCEL:"client_flow_cancel",CLIENT_FLOW_FAIL:"client_flow_fail",CLIENT_FLOW_INCOMPLETE:"client_flow_incomplete",CLIENT_ATTEMPT_INCOMPLETE:"client_attempt_incomplete",CLIENT_FLOW_RETRY:"client_flow_retry",CLIENT_ATTEMPT_RETRY:"client_attempt_retry",CLIENT_DIAGNOSTIC:"client_diagnostic",CLIENT_QUALITY_SWITCH:"client_quality_switch",CLIENT_CANCEL_SURVEY:"client_cancel_survey",SERVER_UPLOAD_BEGIN:"server_upload_begin",SERVER_UPLOAD_SUCCESS:"server_upload_success",SERVER_UPLOAD_FAIL:"server_upload_fail",SERVER_PUBLISH_BEGIN:"server_publish_begin",SERVER_PUBLISH_SUCCESS:"server_publish_success",SERVER_PUBLISH_FAIL:"server_publish_fail",SERVER_RECEIVER_BEGIN:"server_receiver_begin",SERVER_RECEIVER_PUBLISH_BEGIN:"server_receiver_publish_begin",SERVER_SENTRY_RESTRICTION:"server_sentry_restriction"};},null);
__d("fileSlice",["UserAgent_DEPRECATED"],function(a,b,c,d,e,f,g){var h='slice',i,j;if(i=g.chrome()){if(i<21)h='webkitSlice';}else if(i=g.firefox()){if(i<13)h='mozSlice';}else if(!(i=g.safari()))if(g.webkit())h='webkitSlice';j=a.File&&a.File.prototype[h];e.exports=j;},null);
__d("VideoUploadFeatureDetector",["UserAgent_DEPRECATED","fileSlice"],function(a,b,c,d,e,f,g,h){var i={supportsChunking:function(){return (typeof h==='function')&&this.supportsXHR();},supportsFullProgress:function(){return !g.firefox();},supportsFileAPI:function(){return ('FileList' in window);},supportsFileReading:function(){return ('FileReader' in window&&'DataView' in window);},supportsXHR:function(){return ('FormData' in window);}};e.exports=i;},null);
__d("VideoUploadFile",["fileSlice","VideoUploadFeatureDetector"],function(a,b,c,d,e,f,g,h){function i(j){"use strict";this.$VideoUploadFile0=j;this.$VideoUploadFile1=i.getExtensionFromFileInput(j);if(h.supportsFileAPI()&&j.files.length){this.$VideoUploadFile2=j.files[0];this.$VideoUploadFile3=this.$VideoUploadFile2.size;}else{this.$VideoUploadFile2=null;this.$VideoUploadFile3=null;}}i.prototype.getFileInput=function(){"use strict";return this.$VideoUploadFile0;};i.prototype.getFile=function(){"use strict";return this.$VideoUploadFile2;};i.prototype.getSize=function(){"use strict";return this.$VideoUploadFile3;};i.prototype.getExtension=function(){"use strict";return this.$VideoUploadFile1;};i.prototype.getChunk=function(j,k){"use strict";return this.$VideoUploadFile2?g.call(this.$VideoUploadFile2,j,k):null;};i.getExtensionFromFileInput=function(j){"use strict";return j.value.indexOf('.')!=-1?j.value.split('.').pop().toLowerCase():'';};e.exports=i;},null);
__d("ComposerXMediaUploadHandler",["Arbiter","AsyncRequest","ComposerXAjaxEndpoint","ComposerXController","CSS","Dialog","SubscriptionsHandler","URI","VideoUploadConfig","VideoUploadFile","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=i.MEDIA_UPLOAD,s='/ajax/composerx/attachment/video/upload/',t=0;function u(v,w){"use strict";this.$ComposerXMediaUploadHandler0=v;this.$ComposerXMediaUploadHandler1=w;}u.prototype.fetchAttachments=function(){"use strict";[this.getPhotoUploadAttachmentEndpoint(),s].forEach(function(v){j.fetchAttachmentData(this.$ComposerXMediaUploadHandler0,v);}.bind(this));};u.prototype.handleFileSelected=function(v){"use strict";if(u.isVideoFile(v)){this.handleVideoSelected(v);}else this.handlePhotoSelected(v);};u.prototype.handleVideoSelected=function(v){"use strict";if(this.$ComposerXMediaUploadHandler1&&this.$ComposerXMediaUploadHandler1.imagesOnly){var w=new l().setModal(true).setButtons([l.OK]);if(this.$ComposerXMediaUploadHandler1.isEditComposer){w.setTitle("Can't add video").setBody("Sorry, you can't add a video to a post you're editing.");}else w.setTitle("Invalid Image File").setBody("Please upload a valid image file.");w.show();return;}j.getAttachment(this.$ComposerXMediaUploadHandler0,s);g.inform('ComposerXFilesStore/filesAdded/'+this.$ComposerXMediaUploadHandler0+'/videoupload',{fileInput:v},g.BEHAVIOR_PERSISTENT);};u.prototype.handlePhotoSelected=function(v){"use strict";j.getAttachment(this.$ComposerXMediaUploadHandler0,this.getPhotoUploadAttachmentEndpoint());u.$ComposerXMediaUploadHandler2(this.$ComposerXMediaUploadHandler0,v);};u.isVideoFile=function(v){"use strict";var w=p.getExtensionFromFileInput(v.getInput());return !!o.videoExtensions[w];};u.prototype.$ComposerXMediaUploadHandler3=function(){"use strict";return (this.$ComposerXMediaUploadHandler1)?this.$ComposerXMediaUploadHandler1.photoUploadOverrideEndpoint:null;};u.prototype.getPhotoUploadAttachmentEndpoint=function(){"use strict";var v=this.$ComposerXMediaUploadHandler3();return (v)?v:r;};u.$ComposerXMediaUploadHandler2=function(v,w){"use strict";g.inform('ComposerXFilesStore/filesAdded/'+v+'/mediaupload',{fileInput:w},g.BEHAVIOR_PERSISTENT);};u.setupFileUploadToComposerDialog=function(v,w,x){"use strict";var y='composerxmediauploadhandler'+t++,z=function(ca){k.conditionClass(v.getControl(),x,ca);v.getInput().disabled=ca;},aa=new n(w),ba=aa.getQueryData();ba.client_ref=y;aa.setQueryData(ba);w=aa.toString();v.subscribe('change',function(){new h().setURI(w).setErrorHandler(function(){v.clear();z(false);}).send();z(true);});g.subscribe('composer/dialog/'+y+'/new',function(ca,da){this.$ComposerXMediaUploadHandler2(da.composerID,v);var ea=new m();ea.addSubscriptions(g.subscribe('composer/publish',function(event,fa){if(da.composerID===fa.composer_id)a.location.reload();}),da.dialog.subscribe('hide',function(){ea.release();v.clear();z(false);}));}.bind(this));};e.exports=u;},null);
__d("PhotosUploadWaterfallXMixin",["AsyncSignal","Banzai","PhotosUploadWaterfallXConfig","PUWApplications","copyProperties","invariant","randomInt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(p,q){var r={};p.client_time=Math.round(Date.now()/1000);if(i.retryBanzai){r.retry=true;p.nonce=m(4294967296);}h.post(i.banzaiRoute,p,r);if(q)setTimeout(q,0);}function o(p,q){if(i.useBanzai){n(p,q);}else{var r=new g(i.loggingEndpoint,{data:JSON.stringify(p)}).setHandler(q);if(i.timeout)r.setTimeout(10*1000);r.send();}}e.exports={logStep:function(p,q,r){var s=this.getWaterfallID&&this.getWaterfallID(),t=this.getWaterfallAppName&&this.getWaterfallAppName();if(!s||!t)return;if(i.reduceLoggingRequests&&t===j.WEB_FLASH){r&&r();return;}o(k({step:p,qn:s,uploader:t,ref:this.getWaterfallSource&&this.getWaterfallSource()},q),r);}};},null);
__d("WebMessengerThreadlistRenderer",["CSS","DOM","Event","Focus","MercuryListUpdateRenderer","MercuryAPIArgsSource","MessagingTag","WebMessengerStateConstants","WebMessengerStateManager","WebMessengerTemplates","MercuryThreadMetadataRawRenderer","MercuryThreadMetadataRenderer","Tooltip","WebMessengerMercury","WebMessengerPermalinks","WebMessengerDeleteThreadDialog","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y={renderThreadsFromIDs:function(aa,ba,ca,da,ea,fa){da=da||function(ga){return ga;};ea=ea||{};k.updateList(aa,ba.map(da),function(ga){return !ea[ba[ga]]&&ba[ga]!=ca;},function(ga){var ha=ba[ga],ia=p[':fb:web-messenger:threadlist-row'].build();ia.getRoot().setAttribute('id',da(ha));var ja=ia.getNode('threadLink');j.listen(ja,function(ka){g.conditionClass(ia.getRoot(),"_5fes",ka);});i.listen(ja,'click',function(ka){if(ka.getModifiers().any)return true;var la=o.getCurrentMasterState(),ma={thread_id:ha};if(la===n.MASTER.SEARCH)ma.query=o.getCurrentStateData().query;o.updateDetailState(n.DETAIL.RECENT_MESSAGES,ma);return false;});if(ha==ca)g.addClass(ia.getRoot(),"_kv");t.getThreads().getThreadMeta(ha,function(ka){var la=r.getForFBID(o.getCurrentUserID());la.renderCoreThreadlist(ka,ia,z.bind(null,fa),{names_renderer:q.renderShortNames,show_unread_count:false},true);},l.WEBMESSENGER);return ia.getRoot();});}};function z(aa,ba,ca){var da=ba.getNode('readToggler'),ea=ba.getNode('archiveButton'),fa=ba.getNode('deleteButton');ba.getNode('threadLink').setAttribute('href',u.getURI(aa,n.DETAIL.RECENT_MESSAGES,{thread_id:ca.thread_id}).toString());if(ca.unread_count>0){g.addClass(ba.getRoot(),"_kx");h.setContent(ba.getNode('newCount'),x._("{num} new",[x.param("num",ca.unread_count)]));g.addClass(da,"_ky");s.set(da,"Mark as Read",'above','right');}else{g.addClass(da,"_kz");s.set(da,"Mark as Unread",'above','right');}i.listen(da,'click',function(event){var ia=t.getThreadActions();g.hasClass(da,"_ky")?ia.markRead(ca.thread_id):ia.markUnread(ca.thread_id);return false;});var ga=o.getCurrentStateData().folder;if(ga==m.SPAM){s.set(fa,"Delete Conversation",'above','right');g.addClass(fa,"_4_3q");i.listen(fa,'click',function(event){v.show(ca.thread_id);});g.hide(ea);}else{g.hide(fa);var ha=true;if(ga==m.ACTION_ARCHIVED){ha=false;s.set(ea,"Unarchive",'above','right');g.addClass(ea,"_2s2");}else{s.set(ea,"Archive",'above','right');g.addClass(ea,"_l9");}i.listen(ea,'click',function(event){var ia=t.getThreadActions();ha?ia.archive(ca.thread_id):ia.unarchive(ca.thread_id);var ja=o.getCurrentStateData();if(ja.thread_id==ca.thread_id)o.updateDetailState(n.DETAIL.RECENT_MESSAGES,{folder:ja.folder});return false;});}}e.exports=y;},null);
__d("MercuryDataSources",[],function(a,b,c,d,e,f){var g={},h={add:function(i,j){g[i]=j;},get:function(i){!g[i];return g[i];}};e.exports=h;},null);
__d("Autosize",["CSS","cx","DOM","Style"],function(a,b,c,d,e,f,g,h,i,j){var k=['fontFamily','fontStyle','fontVariant','fontWeight','letterSpacing','textDecoration','textIndent','textTransform','whiteSpace','wordSpacing','wordWrap'],l=/^[0-9]+$/;function m(r){var s=r.cloneNode(true);g.addClass(s,"_4g");var t=r.clientWidth-j.getFloat(r,'paddingLeft')-j.getFloat(r,'paddingRight');j.set(s,'width',t+'px');var u=r.clientHeight-j.getFloat(r,'paddingTop')-j.getFloat(r,'paddingBottom');j.set(s,'height',u+'px');i.insertAfter(r,s);return s;}function n(r,s,t,u,v){var w=r.style.fontSize,x=r.style.height;j.set(r,"height","auto");if(s!==null){var y=r.style.width;j.set(r,"width","auto");}var z=0,aa=v.length-1;while(z<aa){var ba=Math.ceil((z+aa)/2);j.set(r,"font-size",v[ba]+u);if((t!==null&&r.scrollHeight>t)||(s!==null&&r.scrollWidth>s)){aa=ba-1;}else z=ba;}r.style.fontSize=w;r.style.height=x;if(s!==null)r.style.width=y;return v[z]+u;}function o(r,s,t,u,v,w){var x=r.style.fontSize,y=r.style.height;j.set(r,"height","auto");if(s!==null){var z=r.style.width;j.set(r,"width","auto");}j.set(r,"font-size",w+u);if((t===null||r.scrollHeight<=t)&&(s===null||r.scrollWidth<=s)){r.style.fontSize=x;r.style.height=y;if(s!==null)r.style.width=z;return w+u;}j.set(r,"font-size",v+u);if((t!==null&&r.scrollHeight>t)||(s!==null&&r.scrollWidth>s)){r.style.fontSize=x;r.style.height=y;if(s!==null)r.style.width=z;return v+u;}while(v+1<w){var aa=Math.ceil((v+w)/2);j.set(r,"font-size",aa+u);if((t!==null&&r.scrollHeight>t)||(s!==null&&r.scrollWidth>s)){w=aa;}else v=aa;}r.style.fontSize=x;r.style.height=y;if(s!==null)r.style.width=z;return v+u;}function p(r,s){this._wrap=r;this._attr=s;if(this._attr.sizes){var t=this._attr.sizes;for(var u=1,v=t.length;u<v;u++){if(t[u-1]<=t[u])continue;t.sort(function(x,y){return x-y;});break;}}else if(s.min>s.max){var w=s.min;s.min=s.max;s.max=w;}this.fit();}p.prototype.fit=function(r,s){var t=this._wrap;if(!t.clientWidth){q.push(this);return;}var u=m(t);if(typeof r==="undefined")r=this._attr.width;if(l.test(r)){u.style.width=r+"px";}else if(r!==null&&r!=="auto")u.style.width=r;if(typeof s==="undefined")s=this._attr.height;if(l.test(s)){u.style.height=s+"px";}else if(s!==null&&s!=="auto")u.style.height=s;var v=null;if(!this._attr.wrap)v=u.clientWidth;var w=null;if(this._attr.wrap||s!==null)w=u.clientHeight;var x;if(this._attr.sizes){x=n(u,v,w,"px",this._attr.sizes);}else x=o(u,v,w,"px",this._attr.min,this._attr.max);i.remove(u);j.set(t,"font-size",x);g.removeClass(t,"invisible_elem");};var q=[];p.onNodeInserted=function(){var r=q;q=[];r.forEach(function(s){s.fit();});};e.exports=p;},null);
__d("glyph",["ix"],function(a,b,c,d,e,f){e.exports=b('ix');},null);