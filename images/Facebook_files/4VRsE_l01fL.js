/*!CK:4156451271!*//*1418989390,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["PVk9u"]); }

__d("AdsAPIAdCampaignFields",[],function(a,b,c,d,e,f){e.exports={ACCOUNT_ID:"account_id",AD_CAMPAIGN_GROUP:"adcampaign_group",AUDIENCE:"name",BID_INFO:"bid_info",BID_TYPE:"bid_type",BUYING_TYPE:"buying_type",BUDGET_REMAINING:"budget_remaining",CAMPAIGN_GROUP_ID:"campaign_group_id",CAMPAIGN_GROUP_NAME:"campaign_group_name",CAMPAIGN_SCHEDULE:"campaign_schedule",CAMPAIGN_STATUS:"campaign_status",CREATED_TIME:"created_time",CREATIVE_ROTATION_PARAMETER:"creative_rotation_parameter",CREATIVE_ROTATION_TYPE:"creative_rotation_type",CREATIVE_SEQUENCE:"creative_sequence",DAILY_BUDGET:"daily_budget",DAILY_IMPS:"daily_imps",DELIVERY_INFO:"delivery_info",END_TIME:"end_time",EXTERNAL_BID:"external_bid",FREQUENCY_CAP:"frequency_cap",FREQUENCY_CAP_RESET_PERIOD:"frequency_cap_reset_period",FULLTEXT_SEARCH:"fulltext_search",ID:"id",INFLATION:"inflation",IO_NUMBER:"io_number",IS_AUTOBID:"is_autobid",IS_DRAFT_ONLY:"is_draft_only",LIFETIME_BUDGET:"lifetime_budget",LIFETIME_IMPS:"lifetime_imps",LINE_NUMBER:"line_number",NAME:"name",NEKO_PROMOTED_OBJECT_ID:"neko_promoted_object_id",NEKO_PROMOTED_OBJECT_URL:"neko_promoted_object_url",NEKO_HAS_MIXED_PROMOTED_OBJECTS:"neko_has_mixed_promoted_objects",CONVERSION_PIXEL_ID:"conversion_pixel_id",OBJECTIVE:"objective",OBJECTIVE_FOR_COST:"objective_for_cost",OBJECTIVE_FOR_RESULTS:"objective_for_results",PACING_TYPE:"pacing_type",PROMOTED_OBJECT:"promoted_object",PRORATED_DAILY_BUDGET:"prorated_daily_budget",RF_PREDICTION_ID:"rf_prediction_id",SAVED_AUDIENCE:"saved_audience",START_TIME:"start_time",TAG_IDS:"tag_ids",TARGETING:"targeting",TOPLINE_ID:"topline_id",TRACKING_SPECS:"tracking_specs",UPDATED_TIME:"updated_time",USE_VIEWABLE_IMPRESSION:"use_viewable_impression",VALID_BID_TYPES:"valid_bid_types"};},null);
__d("AdsAPIBidInfoFields",[],function(a,b,c,d,e,f){e.exports={CLICKS:"CLICKS",REACH:"REACH",SOCIAL:"SOCIAL",IMPRESSIONS:"IMPRESSIONS",CAMPAIGN_MONTHLY_REACH:"CAMPAIGN_MONTHLY_REACH",ACTIONS:"ACTIONS",CONVERSION_VALUE:"CONVERSION_VALUE",EXPLORE_DEMO_SEGMENT:"EXPLORE_DEMO_SEGMENT",MONTHLY_REACH:"MONTHLY_REACH"};},null);
__d("AdsAPITargetFields",[],function(a,b,c,d,e,f){e.exports={ADGROUP_ID:"adgroup_id",GENDERS:"genders",AGE_MIN:"age_min",AGE_MAX:"age_max",COUNTRIES:"countries",COUNTRY_DEPRECATED:"country",CITIES:"cities",RADIUS:"radius",REGIONS:"regions",ZIPS:"zips",COLLEGE_NETWORKS:"college_networks",WORK_NETWORKS:"work_networks",INTERESTS:"interests",KEYWORDS:"keywords",EDU_SCHOOLS:"education_schools",EDU_FIELDS_OF_STUDY:"education_majors",WORK_JOB_TITLES:"work_positions",WORK_EMPLOYERS:"work_employers",RELATIONSHIP_STATUSES:"relationship_statuses",INTERESTED_IN:"interested_in",LOCALES:"locales",USER_CLUSTERS:"user_clusters",USER_CLUSTERS2:"user_clusters2",USER_CLUSTERS3:"user_clusters3",NEGATIVE_USER_CLUSTERS:"excluded_user_clusters",USER_ADCLUSTERS:"user_adclusters",NEGATIVE_USER_ADCLUSTERS:"excluded_user_adclusters",CONJUNCTIVE_USER_ADCLUSTERS:"conjunctive_user_adclusters",EAGLE_CLUSTERS:"custom_audiences",NEGATIVE_EAGLE_CLUSTERS:"excluded_custom_audiences",COLLEGE_MAJORS:"college_majors",COLLEGE_YEARS:"college_years",EDUCATION_STATUSES:"education_statuses",FBIDS:"connections",NEGATIVE_FBIDS:"excluded_connections",FRIENDS_FBIDS:"friends_of_connections",USER_EVENT:"user_event",QRT_VERSIONS:"qrt_versions",PAGE_TYPES:"page_types",ACTION_SPEC:"action_spec",ACTION_SPEC_FRIEND:"action_spec_friend",ACTION_SPEC_NEGATIVE:"action_spec_excluded",DYNAMIC_AUDIENCE_IDS:"dynamic_audience_ids",SEARCH_ENTITIES:"targeted_entities",RTB_FLAG:"rtb_flag",USER_DEVICE:"user_device",USER_OS:"user_os",WIRELESS_CARRIER:"wireless_carrier",SITE_CATEGORY:"site_category",GEO_LOCATIONS:"geo_locations",EXCLUDED_GEO_LOCATIONS:"excluded_geo_locations",FAMILY_STATUSES:"family_statuses",INDUSTRIES:"industries",LIFE_EVENTS:"life_events",MARKETS:"markets",POLITICAL_VIEWS:"political_views",POLITICS:"politics",BEHAVIOR_CATEGORIES:"behaviors",INCOME:"income",NET_WORTH:"net_worth",HOME_TYPE:"home_type",HOME_OWNERSHIP:"home_ownership",HOME_VALUE:"home_value",ETHNIC_AFFINITY:"ethnic_affinity",GENERATION:"generation",HOUSEHOLD_COMPOSITION:"household_composition",MOMS:"moms",OFFICE_TYPE:"office_type",ENGAGEMENT_SPECS:"engagement_specs",EXCLUDED_ENGAGEMENT_SPECS:"excluded_engagement_specs",EXCLUSIONS:"exclusions",FLEXIBLE_SPEC:"flexible_spec",GEO_LOCATION_COUNTRIES:"countries",GEO_LOCATION_REGIONS:"regions",GEO_LOCATION_CITIES:"cities",GEO_LOCATION_ZIPS:"zips",GEO_LOCATION_CUSTOM:"custom_locations",GEO_LOCATION_MARKET:"geo_markets",GEO_LOCATION_TYPES:"location_types",GEO_LOCATION_CITY_KEY:"key",GEO_LOCATION_CITY_RADIUS:"radius",GEO_LOCATION_CITY_NAME:"name",GEO_LOCATION_CITY_DISTANCE_UNIT:"distance_unit",GEO_LOCATION_CITY_REGION:"region",GEO_LOCATION_CITY_REGION_ID:"region_id",GEO_LOCATION_CITY_COUNTRY:"country",GEO_LOCATION_CUSTOM_KEY:"key",GEO_LOCATION_CUSTOM_NAME:"name",GEO_LOCATION_CUSTOM_LATITUDE:"latitude",GEO_LOCATION_CUSTOM_LONGITUDE:"longitude",GEO_LOCATION_CUSTOM_RADIUS:"radius",GEO_LOCATION_CUSTOM_DISTANCE_UNIT:"distance_unit",GEO_LOCATION_CUSTOM_ADDRESS_STRING:"address_string",GEO_LOCATION_CUSTOM_CITY_ID:"primary_city_id",GEO_LOCATION_CUSTOM_REGION_ID:"region_id",GEO_LOCATION_CUSTOM_COUNTRY:"country",GEO_LOCATION_REGION_KEY:"key",GEO_LOCATION_REGION_NAME:"name",GEO_LOCATION_REGION_COUNTRY:"country",GEO_LOCATION_ZIPS_KEY:"key",GEO_LOCATION_ZIPS_NAME:"name",GEO_LOCATION_ZIPS_CITY_ID:"primary_city_id",GEO_LOCATION_ZIPS_REGION_ID:"region_id",GEO_LOCATION_ZIPS_COUNTRY:"country",GEO_LOCATION_MARKET_KEY:"key",GEO_LOCATION_MARKET_NAME:"name",GEO_LOCATION_MARKET_TYPE:"market_type",GEO_LOCATION_MARKET_COUNTRY:"country"};},null);
__d("AdsCMHelpContentTags",[],function(a,b,c,d,e,f){e.exports={NEW_AM_SAFE:"251106041751253",NEW_AM_GLOSSARY_DEFINITION:"1533385446883759",NEW_AM_FUNDAMENTAL:"626485620784022",NEW_AM_GLOSSARY_DEFINITION_FEATURED:"719184221507020",NEW_AM_MANAGE_ADS_OVERVIEW:"1535058110048469",NEW_AM_CAMPAIGNS_PAGE:"1449224105346673",NEW_AM_AD_SETS_PAGE:"242837075925848",NEW_AM_ADS_PAGE:"197640223739527",NEW_AM_BILLING_SUMMARY:"699204346835594",NEW_AM_BILLING_ACCOUNT_SPENDING_LIMIT:"1481056118800261",NEW_AM_PAYMENT_METHOD:"731452676922063",NEW_AM_AUDIENCE_MANAGER:"277554895784188",NEW_AM_CONVERSION_TRACKING:"313435938818211",NEW_AM_ACCOUNT_SETTINGS:"280454682140725",NEW_AM_BULK_EDIT:"811902048833750",NEW_AM_DRAFTS:"694321407315692",NEW_AM_FILTERS:"582576598535657",NEW_AM_REPORTING:"1516819648552802",NEW_AM_AD_CREATION_OBJECTIVES:"501629219971817",NEW_AM_AD_CREATION_TARGETING:"311984392317366",NEW_AM_AD_CREATION_CREATIVE:"334898546685655",NEW_AM_AD_CREATION_BUDGET_SCHEDULE:"259877880803006",NEW_AM_AD_CREATION_ACCOUNT:"336250179874370"};},null);
__d("AdsConnectionObjTypes",[],function(a,b,c,d,e,f){e.exports={PAGE:1,APPLICATION:2,EVENT:3,GROUP:4,REVIEW:5,PLACE:6,DOMAIN:7,STATUS:8,PLAN:9,VIDEO:10,SHARE:11,PHOTO:12,MOBILE_STORE_OBJECT:13,COUPON:14};},null);
__d("AdsPixelNotifFieldEnum",[],function(a,b,c,d,e,f){e.exports={PERSONAL_MESSAGE_LABEL:"personal_message_label",INSTRUCTION_LABEL:"instruction_label",INSTRUCTION:"instruction"};},null);
__d("AdsPixelNotifParamsEnum",[],function(a,b,c,d,e,f){e.exports={PERSONAL_MESSAGE:"personal_message",PIXEL_ID:"pixel_id",RECIPIENTS:"recipients"};},null);
__d("AdsRunStatus",[],function(a,b,c,d,e,f){e.exports={PENDING:"PENDING",ACTIVE:"ACTIVE",PAUSED:"PAUSED",DELETED:"DELETED",PENDING_REVIEW:"PENDING_REVIEW",DISAPPROVED:"DISAPPROVED",PREAPPROVED:"PREAPPROVED",PENDING_BILLING_INFO:"PENDING_BILLING_INFO",CAMPAIGN_PAUSED:"CAMPAIGN_PAUSED",ADGROUP_PAUSED:"ADGROUP_PAUSED",CAMPAIGN_GROUP_PAUSED:"CAMPAIGN_GROUP_PAUSED",ARCHIVED:"ARCHIVED"};},null);
__d("ApiVideoStatuses",[],function(a,b,c,d,e,f){e.exports={READY:"ready",PROCESSING:"processing",ERROR:"error"};},null);
__d("CROWAdTags",[],function(a,b,c,d,e,f){e.exports={IMAGE_TEXTOVERLAY_CHECK_WARNING:"z_ad_image_textoverlay_check_warning"};},null);
__d("CustomAudienceDataSourceSubType",[],function(a,b,c,d,e,f){e.exports={ANYTHING:"ANYTHING",NOTHING:"NOTHING",HASHES:"HASHES",USER_IDS:"USER_IDS",HASHES_OR_USER_IDS:"HASHES_OR_USER_IDS",MOBILE_ADVERTISER_IDS:"MOBILE_ADVERTISER_IDS",EXTERNAL_IDS:"EXTERNAL_IDS",MULTI_HASHES:"MULTI_HASHES",WEB_PIXEL_HITS:"WEB_PIXEL_HITS",MOBILE_APP_EVENTS:"MOBILE_APP_EVENTS",MOBILE_APP_COMBINATION_EVENTS:"MOBILE_APP_COMBINATION_EVENTS",VIDEO_EVENTS:"VIDEO_EVENTS",WEB_PIXEL_COMBINATION_EVENTS:"WEB_PIXEL_COMBINATION_EVENTS",CUSTOM_AUDIENCE_USERS:"CUSTOM_AUDIENCE_USERS",PAGE_FANS:"PAGE_FANS",CONVERSION_PIXEL_HITS:"CONVERSION_PIXEL_HITS",APP_USERS:"APP_USERS",S_EXPR:"S_EXPR",DYNAMIC_RULE:"DYNAMIC_RULE",CAMPAIGN_CONVERSIONS:"CAMPAIGN_CONVERSIONS",WEB_PIXEL_HITS_CUSTOM_AUDIENCE_USERS:"WEB_PIXEL_HITS_CUSTOM_AUDIENCE_USERS",MOBILE_APP_CUSTOM_AUDIENCE_USERS:"MOBILE_APP_CUSTOM_AUDIENCE_USERS",COMBINATION_CUSTOM_AUDIENCE_USERS:"COMBINATION_CUSTOM_AUDIENCE_USERS",REV_SHARE_CUSTOM_AUDIENCE_USERS:"REV_SHARE_CUSTOM_AUDIENCE_USERS",INTEREST_ENGAGERS:"INTEREST_ENGAGERS",MAIL_CHIMP_EMAIL_HASHES:"MAIL_CHIMP_EMAIL_HASHES",CONSTANT_CONTACTS_EMAIL_HASHES:"CONSTANT_CONTACTS_EMAIL_HASHES",COPY_PASTE_EMAIL_HASHES:"COPY_PASTE_EMAIL_HASHES",USER_PROPERTIES:"USER_PROPERTIES",CONTACT_IMPORTER:"CONTACT_IMPORTER"};},null);
__d("CustomAudienceDataSourceType",[],function(a,b,c,d,e,f){e.exports={UNKNOWN:"UNKNOWN",FILE_IMPORTED:"FILE_IMPORTED",EVENT_BASED:"EVENT_BASED",SEED_BASED:"SEED_BASED",THIRD_PARTY_IMPORTED:"THIRD_PARTY_IMPORTED",COPY_PASTE:"COPY_PASTE",CLAIM_BASED:"CLAIM_BASED",CONTACT_IMPORTER:"CONTACT_IMPORTER"};},null);
__d("WebsiteCustomAudienceTrafficType",[],function(a,b,c,d,e,f){e.exports={ALL_WEBSITE_VISITORS:1,SPECIFIC_PAGE_VISITORS:2,SPECIFIC_PAGE_VISITORS_WITH_EXCLUSION:3,CHURNED_VISITORS:4,CUSTOM:5};},null);
__d("AudienceDetailsConsts",[],function(a,b,c,d,e,f){var g={HISTORY:'history',ADS:'ads',ACCOUNTS:'accounts',INSIGHTS:'insights'},h={TAB:g,HEADER_HEIGHT:106,LEFT_SECTION_MIN_WIDTH:500,TOOLBAR_HEIGHT:42,RIGHT_SECTION_WIDTH:300};e.exports=h;},null);
__d("AdsAMActionTypes",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({ACCOUNT_INIT:null,AUDIENCE_CHANGE:null,AUDIENCE_INIT:null,AUDIENCE_ADD:null,AUDIENCE_BULK_ADD:null,AUDIENCE_DELETE:null,AUDIENCE_BULK_DELETE:null,AUDIENCE_SORT:null,AUDIENCE_APPEND:null,AUDIENCE_SAVE_TO_CA_BUFFER:null,AUDIENCE_SAVE_TO_STS_BUFFER:null,AUDIENCE_DETAILS_AUDIENCE_INITIALIZE:null,AUDIENCE_DETAILS_UPDATE_STATUS:null,AUDIENCE_DETAILS_UPDATE_USAGE:null,AUDIENCE_DETAILS_UPDATE_ACCOUNTS:null,AUDIENCE_DETAILS_UPDATE_PIXEL:null,ERROR:null,VIEW_CLEAR_ERRORS:null,VIEW_SHOW_CREATE_CA_DIALOG:null,VIEW_CLOSE_CREATE_CA_DIALOG:null,VIEW_SHOW_DELETE_AUDIENCE_DIALOG:null,VIEW_CLOSE_DELETE_AUDIENCE_DIALOG:null,VIEW_SHOW_PIXEL_DIALOG:null,VIEW_CLOSE_PIXEL_DIALOG:null,VIEW_SHOW_REGULAR_EDIT_DIALOG:null,VIEW_CLOSE_REGULAR_EDIT_DIALOG:null,VIEW_SHOW_WCA_DIALOG:null,VIEW_CLOSE_WCA_DIALOG:null,VIEW_SHOW_MACA_DIALOG:null,VIEW_CLOSE_MACA_DIALOG:null,VIEW_SHOW_SHARE_AUDIENCE_DIALOG:null,VIEW_CLOSE_SHARE_AUDIENCE_DIALOG:null,VIEW_SHOW_LOOKALIKE_DIALOG:null,VIEW_CLOSE_LOOKALIKE_DIALOG:null,VIEW_SHOW_SAVED_TARGET_SPEC_DIALOG:null,VIEW_CLOSE_SAVED_TARGET_SPEC_DIALOG:null,VIEW_SHOW_BULK_DELETE_DIALOG:null,VIEW_CLOSE_BULK_DELETE_DIALOG:null,VIEW_SHOW_OPT_OUT_DIALOG:null,VIEW_CLOSE_OPT_OUT_DIALOG:null,VIEW_INIT_DETAILS_TAB:null,VIEW_DETAILS_TAB_CHANGE:null,VIEW_AFTER_CURSOR_CHANGE:null,VIEW_COLUMN_DISPLAY_CHANGE:null,VIEW_INIT_COLUMN_DISPLAY:null,VIEW_SHOW_FILTER_PANE:null,VIEW_HIDE_FILTER_PANE:null,VIEW_UPDATE_FILTER_SET:null,VIEW_UPDATE_FILTERING_STATE:null,VIEW_UPDATE_LOADING_MORE_AUDIENCES:null,VIEW_UPDATE_SAVE_STATE_FOR_EDIT:null,VIEW_UPDATE_WCA_FORM_STATE:null,VIEW_UPDATE_STS_FORM_STATE:null,CREATE_AUDIENCE_RESET:null,CREATE_AUDIENCE_SET_VIEW_STAGE:null,CREATE_AUDIENCE_SET_VIEW_DIALOG_TYPE:null,CREATE_AUDIENCE_SHOW_MACA_DIALOG:null,UPDATE_AUDIENCE_ERROR:null,UPDATE_NAME_DESCRIPTION_COMPLETE:null,FILE_IMPORT_CHECK_FILE:null,FILE_IMPORT_START_UPLOAD:null,FILE_IMPORT_CREATE_AUDIENCE_COMPLETE:null,FILE_IMPORT_UPLOAD_COMPLETE:null,FILE_IMPORT_UPLOAD_PROGRESS:null,FILE_IMPORT_ERROR:null,COPY_PASTE_START_UPLOAD:null,COPY_PASTE_UPLOAD_PROGRESS:null,COPY_PASTE_CREATE_AUDIENCE_COMPLETE:null,COPY_PASTE_UPLOAD_COMPLETE:null,COPY_PASTE_ERROR:null,MAIL_CHIMP_FETCH_COMPLETE:null,MAIL_CHIMP_START_UPLOAD:null,MAIL_CHIMP_UPLOAD_PROGRESS:null,MAIL_CHIMP_UPLOAD_COMPLETE:null,MAIL_CHIMP_ERROR:null});e.exports=h;},null);
__d("AdsAMConstants",[],function(a,b,c,d,e,f){var g={INITIALIZATION:'initialization',SERVER_RESPONSE:'server-response',VIEW_ACTION:'view-action'},h={THIRD_PARTY:'third_party',DATA_FILE:'file'};e.exports={PayloadSource:g,CREATION_STRATEGY:h,FILE_UPLOAD_CONCURRENCY:4};},null);
__d("AdsAMDispatcher",["AdsAMActionTypes","AdsAMConstants","Dispatcher","copyProperties","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){function l(n){return function(o){this.dispatch({payloadsource:n,action:o});};}var m=j(new i(),{handleInitialization:l(h.PayloadSource.INITIALIZATION),handleUpdateFromServerResponse:l(h.PayloadSource.SERVER_RESPONSE),handleUpdateFromViewAction:l(h.PayloadSource.VIEW_ACTION)});e.exports=m;},null);
__d("AudienceDaoManager",["AdsAMConnectConfig","CurrentLocale","AdsDaoGraph","WebApiApplication"],function(a,b,c,d,e,f,g,h,i,j){var k={},l={initializeAPI:function(){j.init(g.access_token,g.client_id);},getPrimedDao:function(m){if(!k[m])k[m]=i.primedForAccount(m).primedForLocale(h.get());return k[m];},getDao:function(){return i;}};e.exports=l;},null);
__d("AudienceManagerRequestBatch",["AdsFBBatch_DEPRECATED"],function(a,b,c,d,e,f,g){var h={execute:function(i,j,k){var l=new g(),m=[],n=false;i.forEach(function(o){l.add(o.getMethod(),o.getEndpoint(),o.getParameters(),function(p,q){if(p.error)n=true;m.push(p);q();});});l.run(function(o){if(!n){j(m);}else if(k)k(m);});}};e.exports=h;},null);
__d("AudienceManagerAPIRequest",[],function(a,b,c,d,e,f){function g(h,i){"use strict";this.$AudienceManagerAPIRequest0=h;this.$AudienceManagerAPIRequest1=i;}g.prototype.getMethod=function(){"use strict";return this.$AudienceManagerAPIRequest0;};g.prototype.getParameters=function(){"use strict";return this.$AudienceManagerAPIRequest1;};g.prototype.isParamsValid=function(){"use strict";return true;};g.prototype.getEndpoint=function(){"use strict";return null;};e.exports=g;},null);
__d("ads-crypto-email-hash",["sha256"],function(a,b,c,d,e,f,g){var h='sha256',i={getHashType:function(){return h;},hashEmail:function(j,k){return g(j,true,k);}};e.exports=i;},null);
__d("isInternationalPhoneNumber",[],function(a,b,c,d,e,f){var g=/^1\(?\d{3}\)?\d{7}$/,h=/^47\d{8}$/,i=/^\d{1,4}\(?\d{2,3}\)?\d{4,}$/;function j(k){k=k.replace(/[\-\s]+/g,'').replace(/^\+?0{0,2}/,'');if(k.startsWith('0'))return false;if(k.startsWith('1'))return g.test(k);if(k.startsWith('47'))return h.test(k);return i.test(k);}e.exports=j;},null);
__d("AudienceTokenProcessor",["ads-crypto-email-hash","isEmail","isInternationalPhoneNumber","ads-cluster-constants","CustomAudienceHashIdSchemaTypesJS","CustomAudienceSimpleIdSchemaTypesJS"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=/^\d+$/,n=/^[0-9a-f]{32}$/,o=/^[0-9a-f]{64}$/,p=/^0*/,q=/[\-@#<>'",; ]|\(|\)|\+|[a-z]/gi,r=/[0-9a-z_\-]+/i;function s(t){"use strict";this.$AudienceTokenProcessor0=t;}s.prototype.processToken=function(t,u){"use strict";if(!t)return false;if(!this.$AudienceTokenProcessor0)this.$AudienceTokenProcessor0=this.$AudienceTokenProcessor1(t);switch(this.$AudienceTokenProcessor0){case j.UPLOAD_TYPE_PHONE:return this.$AudienceTokenProcessor2(t,u);case j.UPLOAD_TYPE_EMAIL:return this.$AudienceTokenProcessor3(t,u);case j.UPLOAD_TYPE_UID:return this.$AudienceTokenProcessor4(t,u);case j.UPLOAD_TYPE_PARTNER_TOKEN:return this.$AudienceTokenProcessor5(t,u);case j.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN:case j.UPLOAD_TYPE_MOBILE_ADVERTISER_ID:this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.getPayloadSchema=function(){"use strict";switch(this.$AudienceTokenProcessor0){case j.UPLOAD_TYPE_PHONE:return this.$AudienceTokenProcessor7==='md5'?k.PHONE_MD5:k.PHONE_SHA256;case j.UPLOAD_TYPE_EMAIL:return this.$AudienceTokenProcessor7==='md5'?k.EMAIL_MD5:k.EMAIL_SHA256;case j.UPLOAD_TYPE_UID:return l.UID;case j.UPLOAD_TYPE_PARTNER_TOKEN:return l.TOKEN;case j.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN:return l.THIRD_PARTY_TOKEN;case j.UPLOAD_TYPE_MOBILE_ADVERTISER_ID:return l.MOBILE_ADVERTISER_ID;}};s.prototype.isHash=function(){"use strict";return !!this.$AudienceTokenProcessor7;};s.prototype.$AudienceTokenProcessor6=function(t,u,v,w){"use strict";if(u.getUserCount()>0)u.appendString(',');u.appendString('"');u.appendUserToken(t,v,w);u.appendString('"');};s.prototype.$AudienceTokenProcessor2=function(t,u){"use strict";if(i(t)){t=t.replace(q,'').replace(p,'');this.$AudienceTokenProcessor6(t,u,g.hashEmail,64);return true;}else if(o.test(t)){this.$AudienceTokenProcessor8('sha256');this.$AudienceTokenProcessor6(t,u);return true;}else if(n.test(t)){this.$AudienceTokenProcessor8('md5');this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.$AudienceTokenProcessor4=function(t,u){"use strict";if(m.test(t)){this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.$AudienceTokenProcessor5=function(t,u){"use strict";if(r.test(t)){this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.$AudienceTokenProcessor3=function(t,u){"use strict";t=t.toLowerCase();if(h(t)){this.$AudienceTokenProcessor6(t,u,g.hashEmail,64);return true;}else if(o.test(t)){this.$AudienceTokenProcessor8('sha256');this.$AudienceTokenProcessor6(t,u);return true;}else if(n.test(t)){this.$AudienceTokenProcessor8('md5');this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.$AudienceTokenProcessor8=function(t){"use strict";if(this.$AudienceTokenProcessor7)return;this.$AudienceTokenProcessor7=t;};s.prototype.$AudienceTokenProcessor1=function(t){"use strict";if(h(t))return j.UPLOAD_TYPE_EMAIL;if(r.test(t))return j.UPLOAD_TYPE_PARTNER_TOKEN;return j.UPLOAD_TYPE_EMAIL;};s.prototype.getType=function(){"use strict";return this.$AudienceTokenProcessor0;};e.exports=s;},null);
__d("CustomAudienceBigPostPool",["ads-lib-connect_DEPRECATED","invariant","ads-cluster-constants","UserAgent_DEPRECATED","UrlMap","URI","WebApiApplication"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=g.FB,o=j.chrome()>22,p=3;function q(s){"use strict";this.$CustomAudienceBigPostPool0=s;this.$CustomAudienceBigPostPool1=0;this.$CustomAudienceBigPostPool2=[];}q.prototype.acquireBigPost=function(){"use strict";h(this.$CustomAudienceBigPostPool1<this.$CustomAudienceBigPostPool0);this.$CustomAudienceBigPostPool1++;if(this.$CustomAudienceBigPostPool2.length===0){return new r(this.releaseBigPost.bind(this));}else return this.$CustomAudienceBigPostPool2.shift();};q.prototype.releaseBigPost=function(s){"use strict";var t=false;for(var u=0;u<this.$CustomAudienceBigPostPool2.length;u++)if(this.$CustomAudienceBigPostPool2[u]===s)t=true;h(!t);this.$CustomAudienceBigPostPool2.push(s);this.$CustomAudienceBigPostPool1--;};function r(s){"use strict";if(o)this.$CustomAudienceBigPost0=new Uint8Array(i.CLUSTER_API_MAX_SIZE*500);this.$CustomAudienceBigPost1();this.releaseCallback=s;}r.prototype.$CustomAudienceBigPost1=function(){"use strict";if(o){this.$CustomAudienceBigPost2=0;this.$CustomAudienceBigPost3=0;this.appendString('payload');this.appendRawString('=');}else this.$CustomAudienceBigPost4='';this.$CustomAudienceBigPost5=0;this.appendString('{"data":[');};r.prototype.appendString=function(s){"use strict";if(o)s=encodeURIComponent(s);this.appendRawString(s);};r.prototype.appendRawString=function(s){"use strict";if(o){for(var t=0;t<s.length;t++)this.$CustomAudienceBigPost0[this.$CustomAudienceBigPost2++]=s.charCodeAt(t);}else this.$CustomAudienceBigPost4+=s;};r.prototype.appendUserToken=function(s,t,u){"use strict";if(t){if(o){var v=new Uint8Array(this.$CustomAudienceBigPost0.buffer,this.$CustomAudienceBigPost2,u);t(s,v);this.$CustomAudienceBigPost2+=u;}else this.$CustomAudienceBigPost4+=t(s);}else this.appendString(s);this.$CustomAudienceBigPost5++;};r.prototype.appendAppIDs=function(s){"use strict";this.appendString('], "app_ids": [');this.appendString(s.join());};r.prototype.appendPayloadSchema=function(s){"use strict";this.appendString('], "schema":"');this.appendString(s);this.appendString('"}');};r.prototype.request=function(s,t,u,v){"use strict";if(o){this.$CustomAudienceBigPost6(s,t,u,v);}else{u.payload=this.$CustomAudienceBigPost4;n.api(s,t,u,v);}};r.prototype.$CustomAudienceBigPost6=function(s,t,u,v){"use strict";if(this.$CustomAudienceBigPost3===0){if(!u.access_token)u.access_token=m.getAccessToken();u.suppress_http_code=1;t=(t||'get').toLowerCase();u.method=t;t=t==='get'?'get':'post';for(var w in u){this.appendRawString('&');this.appendString(w);this.appendRawString('=');this.appendString(u[w]);}}var x=new l(s),y=k.resolve('graph')+x.getPath(),z=new XMLHttpRequest();z.open(t,y,true);z.setRequestHeader('Content-type','application/x-www-form-urlencoded');z.onload=function(){var aa=JSON.parse(z.responseText);if(!aa||aa.error)if(this.$CustomAudienceBigPost7(s,t,u,v))return;this.$CustomAudienceBigPost8();v(aa);}.bind(this);z.onerror=function(){if(!this.$CustomAudienceBigPost7(s,t,u,v)){this.$CustomAudienceBigPost8();v(JSON.parse(z.responseText));}}.bind(this);z.send(new Uint8Array(this.$CustomAudienceBigPost0.buffer,0,this.$CustomAudienceBigPost2));};r.prototype.$CustomAudienceBigPost7=function(s,t,u,v){"use strict";if(this.$CustomAudienceBigPost3<p){this.$CustomAudienceBigPost3++;this.$CustomAudienceBigPost6(s,t,u,v);return true;}else return false;};r.prototype.$CustomAudienceBigPost8=function(){"use strict";this.$CustomAudienceBigPost1();this.releaseCallback(this);};r.prototype.getUserCount=function(){"use strict";return this.$CustomAudienceBigPost5;};e.exports=q;},null);
__d("CAUploadSessionStatus",["copyProperties","invariant","CustomAudienceSessionTypesJS"],function(a,b,c,d,e,f,g,h,i){function j(l){"use strict";this.seq=l;this.size=0;this.last=false;this.status=j.INIT;this.startTime=0;this.latency=0;}j.prototype.start=function(){"use strict";this.startTime=Date.now();this.status=j.REQUESTED;};j.prototype.end=function(l){"use strict";this.latency=Date.now()-this.startTime;if(l){this.error=l;this.status=j.FAILED;}else this.status=j.SUCCEEDED;};j.prototype.toObject=function(){"use strict";var l={seq:this.seq,size:this.size,status:this.status,start_time:Math.round(this.startTime/1000),latency:this.latency};if(this.error)l.error=this.error;if(this.last)l.last=this.last;return l;};g(j,{INIT:'INIT',REQUESTED:'REQUESTED',FAILED:'FAILED',SUCCEEDED:'SUCCEEDED'});function k(){"use strict";this.name='ClusterUploadSession';this.clear();}k.prototype.clear=function(){"use strict";this.$CAUploadSessionStatus0=Math.ceil(Math.random()*16777216);this.$CAUploadSessionStatus1=0;this.$CAUploadSessionStatus2=0;this.$CAUploadSessionStatus3=0;this.$CAUploadSessionStatus4=0;this.$CAUploadSessionStatus5=0;this.$CAUploadSessionStatus6=0;this.$CAUploadSessionStatus7={};this.$CAUploadSessionStatus8=null;};k.prototype.isSessionCompleted=function(){"use strict";if(!this.isLastBatch())return false;for(var l in this.$CAUploadSessionStatus7){var m=this.$CAUploadSessionStatus7[l];if(m.status!=j.FAILED&&m.status!=j.SUCCEEDED)return false;}return true;};k.prototype.start=function(){"use strict";this.$CAUploadSessionStatus1=Date.now();};k.prototype.end=function(){"use strict";this.$CAUploadSessionStatus2=Date.now()-this.$CAUploadSessionStatus1;};k.prototype.startBatch=function(l,m){"use strict";this.$CAUploadSessionStatus4+=m;var n=this.$CAUploadSessionStatus9(l);n.size=m;n.start();};k.prototype.setBatchResult=function(l,m){"use strict";var n=this.$CAUploadSessionStatus9(l),o=m&&!m.error;if(o){this.$CAUploadSessionStatus5+=n.size;n.end();}else{this.$CAUploadSessionStatus6+=n.size;n.end(m?m.error:'no response');}};k.prototype.getNumUploadAttempted=function(){"use strict";return this.$CAUploadSessionStatus4;};k.prototype.getNumUploadSucceeded=function(){"use strict";return this.$CAUploadSessionStatus5;};k.prototype.getNumUploadFailed=function(){"use strict";return this.$CAUploadSessionStatus6;};k.prototype.getSessionID=function(){"use strict";return this.$CAUploadSessionStatus0;};k.prototype.getTotalBatchID=function(){"use strict";return this.$CAUploadSessionStatus3;};k.prototype.getCurrentBatchID=function(){"use strict";return this.$CAUploadSessionStatus3;};k.prototype.createNewBatch=function(){"use strict";++this.$CAUploadSessionStatus3;this.$CAUploadSessionStatus7[this.$CAUploadSessionStatus3]=new j(this.$CAUploadSessionStatus3);return this;};k.prototype.markLastBatch=function(){"use strict";this.$CAUploadSessionStatus9(this.$CAUploadSessionStatus3).last=true;return this;};k.prototype.noBatchCreated=function(){"use strict";return (this.$CAUploadSessionStatus3===0);};k.prototype.isFirstBatch=function(){"use strict";return (this.$CAUploadSessionStatus3===1);};k.prototype.isLastBatch=function(){"use strict";if(this.$CAUploadSessionStatus3===0)return false;return this.$CAUploadSessionStatus9(this.$CAUploadSessionStatus3).last;};k.prototype.getAPISpecForCurrentBatch=function(){"use strict";return {session_type:i.ACTION_BASED_SESSION,session_id:this.getSessionID(),batch_seq:this.getCurrentBatchID(),last_batch_flag:this.isLastBatch()};};k.prototype.setSessionException=function(l){"use strict";this.$CAUploadSessionStatus8=l;};k.prototype.toObject=function(){"use strict";var l=[],m=0,n=0;for(var o in this.$CAUploadSessionStatus7){var p=this.$CAUploadSessionStatus7[o];if(p.status!==j.SUCCEEDED)l.push(p.toObject());if(p.status===j.SUCCEEDED||p.status===j.FAILED){m+=p.latency;n++;}}var q={local_session_id:this.$CAUploadSessionStatus0,num_batches:this.getTotalBatchID(),time_start_ui:Math.round(this.$CAUploadSessionStatus1/1000),time_upload_ui:Math.round(this.$CAUploadSessionStatus2/1000),num_attempted_ui:this.$CAUploadSessionStatus4,num_succeeded_ui:this.$CAUploadSessionStatus5,num_failed_ui:this.$CAUploadSessionStatus6,batches_detail:JSON.stringify(l),error_msg:this.$CAUploadSessionStatus8};if(n>0)q.avg_batch_latency=Math.round(m/n);return q;};k.prototype.$CAUploadSessionStatus9=function(l){"use strict";h(this.$CAUploadSessionStatus7.hasOwnProperty(l));return this.$CAUploadSessionStatus7[l];};e.exports=k;},null);
__d("AdsMigrationOverrides",[],function(a,b,c,d,e,f){var g={};e.exports=Object.keys(g).length?JSON.stringify(g):'';},null);
__d("BufferedTokenReader",["ArbiterMixin","copyProperties","fileSlice","invariant","mixin"],function(a,b,c,d,e,f,g,h,i,j,k){var l=k(g);for(var m in l)if(l.hasOwnProperty(m))o[m]=l[m];var n=l===null?null:l.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=l;function o(p,q){"use strict";j(a.FileReader!==(void 0));this.$BufferedTokenReader0=p;this.$BufferedTokenReader1=new a.FileReader();this.$BufferedTokenReader1.onloadend=this.$BufferedTokenReader2.bind(this);this.$BufferedTokenReader3='';this.$BufferedTokenReader4=0;this.$BufferedTokenReader5=1;this.$BufferedTokenReader6=0;this.$BufferedTokenReader7=q;this.$BufferedTokenReader8=0;this.$BufferedTokenReader9=null;this.$BufferedTokenReadera=null;}o.prototype.nextToken=function(){"use strict";if(this.$BufferedTokenReaderb())return this.$BufferedTokenReaderc();while(this.$BufferedTokenReadera){this.$BufferedTokenReader9=this.$BufferedTokenReadera;this.$BufferedTokenReadera=null;this.$BufferedTokenReader8=0;this.readLines();if(this.$BufferedTokenReaderb())return this.$BufferedTokenReaderc();}if(!this.currentlyReading()&&!this.hasMore())if(this.$BufferedTokenReader3){this.$BufferedTokenReader4++;return this.$BufferedTokenReaderc();}else return o.EOF;this.readLines();return null;};o.prototype.hasMore=function(){"use strict";return this.$BufferedTokenReader6<this.$BufferedTokenReader0.size;};o.prototype.progress=function(){"use strict";return this.$BufferedTokenReader6/this.$BufferedTokenReader0.size;};o.prototype.getNumTokens=function(){"use strict";return this.$BufferedTokenReader4;};o.prototype.getLineNumber=function(){"use strict";return this.$BufferedTokenReader5;};o.prototype.getFileSize=function(){"use strict";return this.$BufferedTokenReader0.size;};o.prototype.readLines=function(){"use strict";if(this.currentlyReading())return;if(this.hasMore())this.$BufferedTokenReader1.readAsText(this.$BufferedTokenReaderd());};o.prototype.currentlyReading=function(){"use strict";return this.$BufferedTokenReader1.readyState===a.FileReader.LOADING;};o.prototype.$BufferedTokenReaderb=function(){"use strict";if(this.$BufferedTokenReader9&&this.$BufferedTokenReader8<this.$BufferedTokenReader9.length)while(this.$BufferedTokenReader8<this.$BufferedTokenReader9.length){var p=this.$BufferedTokenReader9.charAt(this.$BufferedTokenReader8);if(o.LINE_BREAKS[p])if(this.$BufferedTokenReader3){this.$BufferedTokenReader4++;return true;}else{this.$BufferedTokenReader5++;this.$BufferedTokenReader8++;var q=this.$BufferedTokenReader9.charAt(this.$BufferedTokenReader8);if(p!=q&&o.LINE_BREAKS[q])this.$BufferedTokenReader8++;continue;}this.$BufferedTokenReader8++;if(p==='\0')continue;if(o.TOKEN_BREAKS[p]){if(this.$BufferedTokenReader3){this.$BufferedTokenReader4++;return true;}continue;}this.$BufferedTokenReader3+=p;}return false;};o.prototype.$BufferedTokenReaderc=function(){"use strict";var p=this.$BufferedTokenReader3;this.$BufferedTokenReader3='';return p;};o.prototype.$BufferedTokenReader2=function(){"use strict";j(!this.$BufferedTokenReadera);this.$BufferedTokenReadera=this.$BufferedTokenReader1.result;this.inform(o.DATA_LOADED_EVENT);};o.prototype.$BufferedTokenReaderd=function(){"use strict";var p=this.$BufferedTokenReader6,q=Math.min(this.$BufferedTokenReader6+this.$BufferedTokenReader7,this.$BufferedTokenReader0.size);this.$BufferedTokenReader6=q;return i.call(this.$BufferedTokenReader0,p,q);};h(o,{EOF:'\0\0',DATA_LOADED_EVENT:'bufferedlinereader_data_loaded',name:'BufferedTokenReader',LINE_BREAKS:{'\r':true,'\n':true},TOKEN_BREAKS:{'<':true,'>':true,'"':true,"'":true,',':true,' ':true,'|':true,';':true,'\t':true}});e.exports=o;},null);
__d("CustomAudienceUploader",["ads-cluster-constants","AdsMigrationOverrides","ArbiterMixin","AudienceTokenProcessor","CustomAudienceBigPostPool","BufferedTokenReader","CAUploadSessionStatus","copyProperties","fbt","invariant","CustomAudienceUiLogger","CustomAudienceSessionTypesJS","CustomAudienceHashIdSchemaTypesJS","CustomAudienceSimpleIdSchemaTypesJS","WebApiApplication","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=b('ads-cluster-constants').ERROR_THRESHOLD_RATE,x={INIT:"INIT",READING:"READING",FILE_LOADING:"FILE_LOADING",WAITING_FOR_ERROR_CHECK:"WAITING_FOR_ERROR_CHECK",WAITING_FOR_REQUEST:"WAITING_FOR_REQUEST",WAITING_REQUEST_SENT:"WAITING_REQUEST_SENT",STOPPED:"STOPPED",DONE:"DONE"},y=v(i);for(var z in y)if(y.hasOwnProperty(z))ba[z]=y[z];var aa=y===null?null:y.prototype;ba.prototype=Object.create(aa);ba.prototype.constructor=ba;ba.__superConstructor__=y;function ba(ca,da){"use strict";this.dao=ca;this.N_UPLOAD_CONCURRENCY=da;this._clusterReader=null;this._numUploaded=0;this._clusterID=0;this._removeUsers=false;this._encOption=null;this._state=x.INIT;this._uploadSession=new m();this._bigPostPool=new k(da+2);this._bigPost=this._bigPostPool.acquireBigPost();this._hashType=null;this._requestNumber=0;this._waitingRequest=null;this._currentLineInfo={lineNum:0,numValidTokens:0,firstInvalidToken:null};this._numInvalidLines=0;this._appIDs=null;}ba.prototype.createCluster=function(ca,da,ea){"use strict";this._encOption=ea.encOption;this._uploadType=ea.uploadType;this._accountId=ea.accountId;this._createCluster=true;this._appIDs=ea.appIDs;this.inform(ba.PROGRESS_CREATING_CLUSTER);this._readFile(da);this._errorLimitCallback=function(){this.dao.add.createCustomAudience.one(function(fa){this._clusterID=fa.id;this.inform(ba.CREATING_CLUSTER_FINISHED,{audienceId:this._clusterID,audienceName:ca});if(this._state!=x.STOPPED)this._continueAfterFirstBatchCheck();}.bind(this),{migrations_override:h,name:ca,accountId:ea.accountId,opt_out_link:ea.optOutLink,rev_share_policy_id:ea.revSharePolicyID,description:ea.description,partner_reference_key:ea.partnerReferenceKey,is_partner_category:!!ea.isPartnerCategory,creation_params:{type:'file',file_name:da.name},handleError:function(fa,ga){var ha={type:'FatalError',message:ga.error.message};this.inform(ba.FATAL_ERROR,ha);}.bind(this)});}.bind(this);};ba.prototype.modifyUsers=function(ca,da,ea){"use strict";this._accountId=ea.accountId;this._uploadType=ea.uploadType;this._encOption=ea.encOption;this._removeUsers=ea.removeUsers;this._clusterID=ca;this._appIDs=ea.appIDs;this._readFile(da);this._errorLimitCallback=function(){this._continueAfterFirstBatchCheck();}.bind(this);};ba.prototype.removeUsersFromAllAudiences=function(ca,da){"use strict";this._accountId=da.accountId;this._uploadType=da.uploadType;this._encOption=da.encOption;this._optOut=true;this._readFile(ca);this._errorLimitCallback=function(){this._continueAfterFirstBatchCheck();}.bind(this);};ba.prototype.getNumErrors=function(){"use strict";return this._numInvalidLines;};ba.prototype.getNumUploaded=function(){"use strict";var ca=this._uploadSession.getNumUploadSucceeded()-(this._uploadSession.getTotalBatchID()-1);if(ca<0)ca=0;return ca;};ba.prototype.getNumFailed=function(){"use strict";return this._uploadSession.getNumUploadFailed();};ba.prototype.getNumTokens=function(){"use strict";return this._clusterReader.getNumTokens();};ba.prototype.getNumLines=function(){"use strict";return this._clusterReader.getLineNumber();};ba.prototype.getProgress=function(){"use strict";if(this._uploadSession.isSessionCompleted())return 100;return this._clusterReader?this._clusterReader.progress()*100:0;};ba.prototype.stop=function(){"use strict";p(this._state==x.READING||this._state==x.FILE_LOADING||this._state==x.WAITING_FOR_REQUEST||this._state==x.WAITING_FOR_ERROR_CHECK);this._state=x.STOPPED;this._uploadSession.end();this._logToServer(false);this._clusterReader=null;};ba.prototype._continueAfterFirstBatchCheck=function(){"use strict";p(this._state==x.WAITING_FOR_ERROR_CHECK);this.inform(ba.PROGRESS_START_UPLOADING);if(this._waitingRequest){this._sendWaitingRequest();}else this._endUpload();};ba.prototype._handleLine=function(){"use strict";while(true){if(this._state===x.STOPPED)break;p(this._state===x.READING);var ca=this._clusterReader.nextToken();if(ca===null){this._state=x.FILE_LOADING;break;}if(ca==l.EOF){this._mayTriggerTokenErrorEvent();this._endOfFile=true;if(this._bigPost.getUserCount()>0){this._sendRequest();}else if(this._bigPost.getUserCount()===0&&this._uploadSession.noBatchCreated()){this.inform(ba.NO_VALID_ENTRIES);return;}break;}if(this._currentLineInfo.line&&this._clusterReader.getLineNumber()>this._currentLineInfo.line)this._mayTriggerTokenErrorEvent();if(ca==='')continue;this._currentLineInfo.line=this._clusterReader.getLineNumber();var da=this._tokenProcessor.processToken(ca,this._bigPost);if(!da){if(this._currentLineInfo.firstInvalidToken===null)this._currentLineInfo.firstInvalidToken=ca;continue;}this._currentLineInfo.numValidTokens++;if(this._bigPost.getUserCount()==g.CLUSTER_API_MAX_SIZE){var ea=!this._sendRequest();this._tokenProcessor.processToken(ca,this._bigPost);if(ea)break;}}if(this._state!=x.STOPPED)this.inform(ba.PROGRESS_PARSING);if(this._state==x.WAITING_FOR_ERROR_CHECK)if(this._numInvalidLines/this._clusterReader.getLineNumber()>w){this.inform(ba.ERROR_LIMIT_REACHED,{numErrors:this._numInvalidLines,numLines:this._clusterReader.getLineNumber(),errorRate:this._numInvalidLines/this._clusterReader.getLineNumber(),continueCallback:this._errorLimitCallback});}else this._errorLimitCallback();};ba.prototype._readFile=function(ca){"use strict";this._endOfFile=false;this._tokenProcessor=new j(this._uploadType);this._clusterReader=new l(ca,10000);this._clusterReader.subscribe(l.DATA_LOADED_EVENT,this._continueReadFile.bind(this));this._uploadSession.start();this._continueReadFile();this.inform(ba.PROGRESS_START_READING);};ba.prototype._continueReadFile=function(){"use strict";if(this._state==x.INIT||this._state==x.FILE_LOADING||this._state==x.WAITING_REQUEST_SENT){this._state=x.READING;try{this._handleLine();}catch(ca){this._uploadSession.setSessionException(ca.message);this._logToServer(false);throw ca;}}};ba.prototype._onTokenError=function(ca,da){"use strict";var ea=this._tokenProcessor.getType(),fa=this._getUploadTypeString(ea);if(this._tokenProcessor.isHash()){ea=g.UPLOAD_TYPE_HASH;fa="hash";}var ga={type:ea,message:o._("line {line} contains {token}",[o.param("line",da),o.param("token",ca)]),token:ca};this._numInvalidLines++;this.inform(ba.ERROR,ga);};ba.prototype._getUploadTypeString=function(ca){"use strict";switch(ca){case g.UPLOAD_TYPE_EMAIL:return "email";case g.UPLOAD_TYPE_UID:return "UID";case g.UPLOAD_TYPE_PHONE:return "phone number";case g.UPLOAD_TYPE_PARTNER_TOKEN:return "partner token";case g.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN:return "App User ID";case g.UPLOAD_TYPE_MOBILE_ADVERTISER_Id:return "Mobile Advertising ID";}return '';};ba.prototype._sendRequest=function(){"use strict";this._uploadSession.createNewBatch();if(this._endOfFile)this._uploadSession.markLastBatch();p(this._createCluster&&this._uploadSession.isFirstBatch()||this._clusterID||this._optOut);p(this.dao);p(this._state==x.READING);var ca=this._bigPost;this._bigPost=this._bigPostPool.acquireBigPost();var da=ca.getUserCount();p(this._endOfFile&&da>0||da==g.CLUSTER_API_MAX_SIZE);var ea=this._makeUploadingAPIParams(ca);if(this._uploadSession.isFirstBatch()||this._requestNumber>=this.N_UPLOAD_CONCURRENCY){this._waitingRequest=function(){this._callUploadingAPI(ca,ea);}.bind(this);this._state=this._uploadSession.isFirstBatch()?x.WAITING_FOR_ERROR_CHECK:x.WAITING_FOR_REQUEST;return false;}this._callUploadingAPI(ca,ea);return true;};ba.prototype._requestCallback=function(ca){"use strict";return (function(da){this._uploadSession.setBatchResult(ca,da);this.inform(ba.PROGRESS_UPLOADING);if(!da||da.error){var ea="Unknown error";if(da&&da.error)ea=da.error.message;var fa={type:'UploadRequest',message:ea};this.inform(ba.ERROR,fa);}this._requestNumber--;if(this._uploadSession.isSessionCompleted()){this._endUpload();return;}if(this._state==x.WAITING_FOR_REQUEST)this._sendWaitingRequest();}).bind(this);};ba.prototype._sendWaitingRequest=function(){"use strict";p(this._state==x.WAITING_FOR_REQUEST||this._state==x.WAITING_FOR_ERROR_CHECK);var ca=this._waitingRequest;this._waitingRequest=null;ca();this._state=x.WAITING_REQUEST_SENT;this._continueReadFile();};ba.prototype._makeUploadingAPIParams=function(ca){"use strict";if(this._appIDs)ca.appendAppIDs(this._appIDs);ca.appendPayloadSchema(this._tokenProcessor.getPayloadSchema());var da=this._uploadSession.getAPISpecForCurrentBatch();da.estimated_num_total=Math.round((this._uploadSession.getNumUploadAttempted()+ca.getUserCount())/this.getProgress()*100);return da;};ba.prototype._callUploadingAPI=function(ca,da){"use strict";this._requestNumber++;this._uploadSession.startBatch(da.batch_seq,ca.getUserCount());var ea={session:JSON.stringify(da)};if(this._optOut){ca.request('/act_'+this._accountId+'/usersofanyaudience','DELETE',ea,this._requestCallback(this._uploadSession.getCurrentBatchID()));}else ca.request('/'+this._clusterID+'/upload',this._removeUsers?'DELETE':'POST',ea,this._requestCallback(this._uploadSession.getCurrentBatchID()));};ba.prototype._endUpload=function(){"use strict";this._state=x.DONE;this._uploadSession.end();this._logToServer(true);this.inform(ba.FINISHED,{audienceId:this._clusterID,sessionId:this._uploadSession.getSessionID()});};ba.prototype._mayTriggerTokenErrorEvent=function(){"use strict";if(this._currentLineInfo.line&&this._currentLineInfo.numValidTokens===0&&this._currentLineInfo.firstInvalidToken)this._onTokenError(this._currentLineInfo.firstInvalidToken,this._currentLineInfo.line);this._currentLineInfo.line=0;this._currentLineInfo.numValidTokens=0;this._currentLineInfo.firstInvalidToken=null;};ba.prototype._logToServer=function(ca){"use strict";var da=this._uploadSession.toObject();da.app_id=u.getClientID();da.audience_id=this._clusterID;if(this._accountId)da.ad_account_id=this._accountId;da.event_name=q.EVENT_UI_SESSION_FINISH;da.num_invalid_ui=this._numInvalidLines;da.num_lines_ui=this._clusterReader.getLineNumber();da.file_size=this._clusterReader.getFileSize();da.session_type=r.ACTION_BASED_SESSION;da.action_type=this._getActionType();da.payload_schema=this._getPayloadSchema();if(ca){da.upload_progress=100;}else da.upload_progress=Math.round(this.getProgress()/100*99);q.log(da);};ba.prototype._getActionType=function(){"use strict";if(this._optOut)return "OPTOUT";if(this._removeUsers)return "REMOVE_USER";return "ADD_USER";};ba.prototype._getPayloadSchema=function(){"use strict";switch(this._uploadType){case g.UPLOAD_TYPE_EMAIL:return s.EMAIL_SHA256;case g.UPLOAD_TYPE_UID:return t.UID;case g.UPLOAD_TYPE_PHONE:return s.PHONE_SHA256;case g.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN:return t.THIRD_PARTY_TOKEN;case g.UPLOAD_TYPE_PARTNER_TOKEN:return t.TOKEN;case g.UPLOAD_TYPE_MOBILE_ADVERTISER_ID:return t.MOBILE_ADVERTISER_ID;}};n(ba,{PROGRESS_START_READING:'progress_reading',PROGRESS_PARSING:'progress_parsing',PROGRESS_START_UPLOADING:'progress_start_uploading',PROGRESS_UPLOADING:'progress_uploading',PROGRESS_CREATING_CLUSTER:'progress_creating_cluster',NO_VALID_ENTRIES:'no_valid_entries_event',ERROR_LIMIT_REACHED:'error_limit_reached_event',ERROR:'error_event',FATAL_ERROR:'fatal_error_event',CREATING_CLUSTER_FINISHED:'creating_cluster_finished_event',FINISHED:'finished_event',STATES:x});e.exports=ba;},null);
__d("AdsAMCreateAudienceServerActions",["AdsAMActionTypes","AdsAMConstants","AdsAMDispatcher","AdsCustomAudienceThirdPartyEmailImportStrategyTypes","AudienceDaoManager","AudienceManagerRequestBatch","AudienceManagerUpdateRequest","AudienceTokenProcessor","CustomAudienceBigPostPool","BusinessURI.brands","CAUploadSessionStatus","CustomAudienceCreationErrors","CustomAudienceUploader","ads-cluster-constants","XAdsCreatorControllerURIBuilder","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=10,x={DELETE:'DELETE',POST:'POST'},y={validRecord:0,invalidRecord:0,totalRecord:0},z=null,aa={uploadSelectedFileToServer:function(na,oa,pa,qa,ra,sa){var ta=k.getPrimedDao(na);ta.add.acceptCustomAudiencesTos.one(function(){return da(qa,function(ua){return ea(na,sa,oa,pa,ua);});},{tos_id:ra});},continueUploadSelectedFileToServer:function(){if(z){z();}else i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_ERROR});},uploadCopyPasteEmailsToServer:function(na,oa,pa,qa,ra,sa){var ta=k.getPrimedDao(na);ta.add.acceptCustomAudiencesTos.one(function(){return ka(na,sa,oa,pa,qa);},{tos_id:ra});},uploadMailChimpListsToServer:function(na,oa,pa,qa){var ra=k.getPrimedDao(na);ra.add.acceptCustomAudiencesTos.one(function(){return ma(na,qa,oa);},{tos_id:pa});},updateAudienceNameDescription:function(na,oa,pa){var qa=k.getPrimedDao(na),ra={id:oa.id,handleError:function(sa,ta){i.handleUpdateFromServerResponse({actionType:g.UPDATE_AUDIENCE_ERROR,audienceID:oa.id,rawData:ta,result:sa});},name:oa.name,description:oa.description};qa.mutate.customAudience.one(function(){var sa=[];sa[oa.id]=oa;i.handleUpdateFromServerResponse({actionType:g.UPDATE_NAME_DESCRIPTION_COMPLETE,audiences:sa});pa();},ra);},batchUpdateAudienceNameDescription:function(na,oa,pa){var qa=oa.map(function(ta){var ua={id:ta.id,name:ta.name,description:ta.description};return new m(ua);}),ra=function(ta){i.handleUpdateFromServerResponse({actionType:g.MAIL_CHIMP_ERROR});},sa=function(ta){i.handleUpdateFromServerResponse({actionType:g.UPDATE_NAME_DESCRIPTION_COMPLETE,audiences:oa});pa();};l.execute(qa,sa,ra);},batchCreateAd:function(na,oa){var pa=[];Object.keys(oa).forEach(function(sa){pa.push({id:oa[sa].id,name:oa[sa].name});});var qa={custom_audiences:pa},ra=p((new u()).setInt('act',na).setString('targeting_spec',JSON.stringify(qa)).getURI());window.open(ra,'_blank');},fetchContactListsFromServer:function(na,oa,pa){var qa=k.getPrimedDao(na),ra={accountId:na,third_party_data:{strategy_type:j.MAILCHIMP,access_token:oa,start_page:pa-1}};qa.fetch.contactsLists.one(function(sa){i.handleUpdateFromServerResponse({actionType:g.MAIL_CHIMP_FETCH_COMPLETE,currentPage:pa,totalPage:Math.ceil(sa.total/w),contactsLists:sa.lists});},ra);},uploadFileAddUsers:function(na,oa,pa,qa,ra){da(ra,function(sa){return fa(na,oa,pa,qa,sa);});},uploadFileRemoveUsers:function(na,oa,pa,qa,ra){da(ra,function(sa){return ga(na,oa,pa,qa,sa);});},copyPasteAddUsers:function(na,oa,pa,qa,ra){la(na,oa,pa,qa,ra,x.POST);},copyPasteRemoveUsers:function(na,oa,pa,qa,ra){la(na,oa,pa,qa,ra,x.DELETE);},removeUsersFromAllCustomAudiences:function(na,oa,pa){ha(na,oa,pa);}};function ba(){y={validRecord:0,invalidRecord:0,totalRecord:0};}function ca(na){var oa=k.getPrimedDao(na),pa=new s(oa,h.FILE_UPLOAD_CONCURRENCY),qa=[pa.subscribe(s.ERROR_LIMIT_REACHED,function(ra,sa){if(sa.numErrors<sa.numLines){i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_ERROR,type:r.FILE_IMPORT_ERROR_LIMIT_REACH,errorDetails:{numErrors:sa.numErrors,numLines:sa.numLines}});z=sa.continueCallback;}}),pa.subscribe(s.PROGRESS_START_UPLOADING,function(){return i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_START_UPLOAD});}),pa.subscribe(s.PROGRESS_UPLOADING,function(){return i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_UPLOAD_PROGRESS,progress:pa.getProgress()});}),pa.subscribe(s.ERROR,function(ra,sa){return i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_ERROR,type:r.FILE_IMPORT_TOKEN_ERROR,error:sa});}),pa.subscribe(s.NO_VALID_ENTRIES,function(){return i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_ERROR,type:r.FILE_IMPORT_NO_VALID_ENTRY});}),pa.subscribe(s.CREATING_CLUSTER_FINISHED,function(ra,sa){i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_CREATE_AUDIENCE_COMPLETE,audienceID:sa.audienceId,audienceName:sa.audienceName});}),pa.subscribe(s.FINISHED,function(ra,sa){y={validRecord:pa.getNumUploaded(),invalidRecord:pa.getNumFailed(),totalRecord:pa.getNumTokens()};i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_UPLOAD_COMPLETE,numberOfRecords:y});ba();qa.forEach(pa.unsubscribe,pa);})];return pa;}function da(na,oa){if(ja(na)){ia(na,function(pa){return oa(pa);});}else oa(na);}function ea(na,oa,pa,qa,ra){var sa=ca(na),ta={uploadType:pa,accountId:na};if(pa===t.UPLOAD_TYPE_UID)ta.appIDs=qa.map(function(ua){return ua.getUniqueID();});sa.createCluster(oa,ra,ta);}function fa(na,oa,pa,qa,ra){var sa=ca(na),ta={uploadType:pa,accountId:na,removeUsers:false};if(pa===t.UPLOAD_TYPE_UID)ta.appIDs=qa.map(function(ua){return ua.getUniqueID();});sa.modifyUsers(oa,ra,ta);}function ga(na,oa,pa,qa,ra){var sa=ca(na),ta={uploadType:pa,accountId:na,removeUsers:true};if(pa===t.UPLOAD_TYPE_UID)ta.appIDs=qa.map(function(ua){return ua.getUniqueID();});sa.modifyUsers(oa,ra,ta);}function ha(na,oa,pa){var qa=ca(na),ra={uploadType:oa,accountId:na};qa.removeUsersFromAllAudiences(pa,ra);}function ia(na,oa){}function ja(na){return na.name.endsWith('.xls')||na.name.endsWith('.xlsx');}function ka(na,oa,pa,qa,ra){var sa=k.getPrimedDao(na);sa.add.createCustomAudience.one(function(ta){la(na,ta.id,pa,qa,ra,x.POST);i.handleUpdateFromServerResponse({actionType:g.COPY_PASTE_CREATE_AUDIENCE_COMPLETE,audienceID:ta.id,audienceName:oa});},{name:oa,creation_params:{type:'copy_paste'}});}function la(na,oa,pa,qa,ra,sa){var ta=new o(1),ua=ta.acquireBigPost(),va=new n(pa);ra.map(function(bb){var cb=va.processToken(bb,ua);if(!cb){var db={type:pa,token:bb};i.handleUpdateFromServerResponse({actionType:g.COPY_PASTE_ERROR,type:r.COPY_PASTE_TOKEN_ERROR,error:db});}});var wa=new q();wa.createNewBatch();wa.markLastBatch();if(pa===t.UPLOAD_TYPE_UID){var xa=qa.map(function(bb){return bb.getUniqueID();});ua.appendAppIDs(xa);}ua.appendPayloadSchema(va.getPayloadSchema());var ya=wa.getAPISpecForCurrentBatch();ya.estimated_num_total=ua.getUserCount();var za={session:JSON.stringify(ya)},ab=function(bb){wa.setBatchResult(wa.getCurrentBatchID(),bb);i.handleUpdateFromServerResponse({actionType:g.COPY_PASTE_UPLOAD_PROGRESS,progress:100});if(!bb||bb.error)i.handleUpdateFromServerResponse({actionType:g.COPY_PASTE_ERROR,type:r.COPY_PASTE_REQUEST_ERROR,errorDetails:bb.error});y={validRecord:bb.num_received-bb.num_invalid_entries,invalidRecord:bb.num_invalid_entries,totalRecord:bb.num_received};wa.end();i.handleUpdateFromServerResponse({actionType:g.COPY_PASTE_UPLOAD_COMPLETE,numberOfRecords:y});ba();};ua.request('/'+oa+'/upload',sa,za,ab);}function ma(na,oa,pa){var qa=pa.length,ra=0,sa={},ta=k.getPrimedDao(na);pa.forEach(function(ua){var va={name:ua.name,third_party_data:{list_id:ua.list_id,strategy_type:j.MAILCHIMP,access_token:oa}};ta.add.audiencesImport.one(function(wa){ra++;sa[wa.id]={id:wa.id,name:ua.name};var xa=ra/qa*100;i.handleUpdateFromServerResponse({actionType:g.MAIL_CHIMP_UPLOAD_PROGRESS,progress:xa});if(ra===qa)i.handleUpdateFromServerResponse({actionType:g.MAIL_CHIMP_UPLOAD_COMPLETE,audiences:sa});},va);});}e.exports=aa;},null);
__d("AdsAMCreateAudienceViewActions",["AdsAMDispatcher","AdsAMActionTypes","AdsAMCreateAudienceServerActions"],function(a,b,c,d,e,f,g,h,i){var j={reset:function(){g.handleUpdateFromViewAction({actionType:h.CREATE_AUDIENCE_RESET});},setViewStage:function(k){g.handleUpdateFromViewAction({actionType:h.CREATE_AUDIENCE_SET_VIEW_STAGE,viewStage:k});},setViewDialogType:function(k){g.handleUpdateFromViewAction({actionType:h.CREATE_AUDIENCE_SET_VIEW_DIALOG_TYPE,viewDialogType:k});},showMobileAppDialog:function(){g.handleUpdateFromViewAction({actionType:h.CREATE_AUDIENCE_SHOW_MACA_DIALOG});},startFileImport:function(k,l,m,n,o,p){g.handleUpdateFromViewAction({actionType:h.FILE_IMPORT_CHECK_FILE});i.uploadSelectedFileToServer(k,l,m,n,o,p);},startCopyPasteUpload:function(k,l,m,n,o,p){g.handleUpdateFromViewAction({actionType:h.COPY_PASTE_START_UPLOAD});i.uploadCopyPasteEmailsToServer(k,l,m,n,o,p);},startMailChimpUpload:function(k,l,m,n){g.handleUpdateFromViewAction({actionType:h.MAIL_CHIMP_START_UPLOAD});i.uploadMailChimpListsToServer(k,l,m,n);},updateAudiencesNameDescription:function(k,l,m){if(l.length===0){m();}else if(l.length===1){i.updateAudienceNameDescription(k,l[0],m);}else i.batchUpdateAudienceNameDescription(k,l,m);},handleMailChimpLogin:function(k,l){i.fetchContactListsFromServer(k,l,1);},loadContactsList:function(k,l,m){i.fetchContactListsFromServer(k,l,m);}};e.exports=j;},null);
__d("AdsAMViewActions",["AdsAMDispatcher","AdsAMActionTypes","AudienceDetailsConsts"],function(a,b,c,d,e,f,g,h,i){var j=i.TAB,k={showCreateCustomAudienceDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_CREATE_CA_DIALOG});},closeCreateCustomAudienceDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_CREATE_CA_DIALOG});},showDeleteAudienceDialog:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_DELETE_AUDIENCE_DIALOG,audienceId:l});},closeDeleteAudienceDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_DELETE_AUDIENCE_DIALOG});},showPixelDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_PIXEL_DIALOG});},closePixelDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_PIXEL_DIALOG});},showRegularEditDialog:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_REGULAR_EDIT_DIALOG,audienceId:l});},closeRegularEditDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_REGULAR_EDIT_DIALOG});},showWCADialog:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_WCA_DIALOG,audienceId:l});},closeWCADialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_WCA_DIALOG});},showMACADialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_MACA_DIALOG});},closeMACADialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_MACA_DIALOG});},showShareAudienceDialog:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_SHARE_AUDIENCE_DIALOG,audienceId:l});},closeShareAudienceDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_SHARE_AUDIENCE_DIALOG});},showLookalikeDialog:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_LOOKALIKE_DIALOG,audienceId:l});},closeLookalikeDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_LOOKALIKE_DIALOG});},showSavedTargetSpecDialog:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_SAVED_TARGET_SPEC_DIALOG,audienceId:l});},closeSavedTargetSpecDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_SAVED_TARGET_SPEC_DIALOG});},showBulkDeleteDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_BULK_DELETE_DIALOG});},closeBulkDeleteDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_BULK_DELETE_DIALOG});},showOptOutDialog:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_OPT_OUT_DIALOG,audienceId:l});},closeOptOutDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_OPT_OUT_DIALOG});},initializeAudienceDetailsTabContent:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_INIT_DETAILS_TAB,tab:j.HISTORY});},changeDetailsTab:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_DETAILS_TAB_CHANGE,tab:l});},updateAfterCursor:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_AFTER_CURSOR_CHANGE,paging:l});},initializeColumnsShown:function(l){g.handleInitialization({actionType:h.VIEW_INIT_COLUMN_DISPLAY,columnsShown:l});},updateColumnShown:function(l,m){g.handleUpdateFromViewAction({actionType:h.VIEW_COLUMN_DISPLAY_CHANGE,column:l,show:m});},showFilterPane:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_FILTER_PANE});},hideFilterPane:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_HIDE_FILTER_PANE});},updateFilterSet:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_UPDATE_FILTER_SET,filterSet:l});},updateSaveStateForEdit:function(l,m){g.handleUpdateFromViewAction({actionType:h.VIEW_UPDATE_SAVE_STATE_FOR_EDIT,saveEnable:l,editSaveCallback:m});},updateDetailsWCAFormState:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_UPDATE_WCA_FORM_STATE,formState:l});},updateDetailsSTSFormState:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_UPDATE_STS_FORM_STATE,formState:l});},updateFilteringState:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_UPDATE_FILTERING_STATE,isFiltering:l});},updateLoadingMoreAudiencesState:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_UPDATE_LOADING_MORE_AUDIENCES,isLoadingMoreAudiences:l});}};e.exports=k;},null);
__d("AudienceThirdPartyContactsList.react",["React","ReactPropTypes","XUISortableDataTable.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){var l=18,m=g.createClass({displayName:"AudienceThirdPartyContactsList",propTypes:{contactsLists:h.array.isRequired,selectedLists:h.object.isRequired,onListSelectionChange:h.func.isRequired,onSelectAllLists:h.func.isRequired,onDeselectAllLists:h.func.isRequired},_onToggleSelectAll:function(n){if(n){this.props.onDeselectAllLists();}else this.props.onSelectAllLists();},render:function(){var n=[{id:'selected',width:l,headerRenderer:function(p){var q=true,r=this.props.selectedLists;for(var s=0;s<this.props.contactsLists.length;s++){var t=this.props.contactsLists[s].list_id;if(!r[t]){q=false;break;}}return (g.createElement("input",{type:"checkbox",checked:q,onChange:this._onToggleSelectAll.bind(this,q)}));}.bind(this),cellRenderer:function(p){var q=function(){this.props.onListSelectionChange(p.list_id);}.bind(this);return (g.createElement("input",{type:"checkbox",value:p.list_id,checked:!!this.props.selectedLists[p.list_id],onChange:q}));}.bind(this)},{id:'name',label:"Name",comparator:function(p,q){return (p.name.toLowerCase()>q.name.toLowerCase()?1:-1);},cellRenderer:function(p){return g.createElement("span",null,p);},sortable:true}],o=this.props.contactsLists.map(function(p){var q={selected:p,name:p.name};return q;},this);if(!o.length)return (g.createElement("div",{className:"_5n5n"},"We are not able to get any contacts from this account."));return (g.createElement(i,{rows:o,columns:n,outerBorder:true,columnToSortBy:"name"}));}});e.exports=m;},null);
__d("AdsAppTokenizerToken.react",["React","XUITokenizerToken.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){var k=g.createClass({displayName:"AdsAppTokenizerToken",propTypes:h.propTypes,render:function(){var l=(("_13w9")+(this.props.entry.getAuxiliaryData()&&this.props.entry.getAuxiliaryData().invalid?' '+"_13wa":''));return (g.createElement(h,g.__spread({},this.props,{className:j(this.props.className,l)})));}});e.exports=k;},null);
__d("DummySearchSource",["AbstractSearchSource"],function(a,b,c,d,e,f,g){for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";if(g!==null)g.apply(this,arguments);}j.prototype.searchImpl=function(k,l,m){"use strict";l([],k);};e.exports=j;},null);
__d("AudienceManagerAppIDInput.react",["AudienceDaoManager","AdsAppTokenizerToken.react","AdsConnectionObjTypes","DummySearchSource","Link.react","React","SearchableEntry","XUIError.react","XUIGrayText.react","XUITokenizer.react","XUITypeaheadTextOnlyView.react","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';var u=10,v=l.createClass({displayName:"AudienceManagerAppIDInput",propTypes:{accountID:l.PropTypes.string.isRequired,onAppEntriesUpdated:l.PropTypes.func.isRequired},componentWillMount:function(){var w=g.getPrimedDao(this.props.accountID),x=function(y){y.data=y.data.filter(function(ba){return ba.type===i.APPLICATION;});if(y.data.length>1)return;var z=this.state.appIdEntries,aa=function(ba){if(ba.is_first_party_app===false){var ca=new m({uniqueID:ba.id,title:ba.id,auxiliaryData:{invalid:false}});z.push(ca);}};w.fetch.appInfo.one(function(ba){aa(ba);this.setState({appIdEntries:z});this.props.onAppEntriesUpdated(z);}.bind(this),{appId:y.data[0].id,fields:['is_first_party_app']});}.bind(this);w.fetch.connectionObjectsForAccount.one(x,{});},getInitialState:function(){return {appIdEntries:[],queryString:'',searchSource:new j()};},render:function(){var w={ViewRenderer:q,TokenRenderer:h,useLayer:true};return (l.createElement("div",null,l.createElement(o,{weight:"bold",display:"block",shade:"medium",className:"_3-95"},"Add a Facebook App ID"),l.createElement(n,{xuiError:this._getAppIDErrorMessage()},l.createElement(p,{entries:this.state.appIdEntries,limit:u,onAddEntryAttempt:this._onAddEntryAttempt,onEnterWithoutSelection:this._onEnterWithoutSelection,onQueryStringChange:this._onQueryStringChange,onRemoveEntryAttempt:this._onRemoveEntryAttempt,placeholder:this._getTokenizerPlaceholder(),presenter:w,queryString:this.state.queryString,searchSource:this.state.searchSource,tokenizeQueryStringOnBlur:this._tokenizeQueryString})),l.createElement("div",{className:"_3-8x"},"You can only upload IDs for people that download or use your Facebook app.",' ',t._("You can find the ID for your Facebook apps in {=App Dashboard}",[t.param("=App Dashboard",l.createElement(k,{target:"_blank",href:r('https://developers.facebook.com/apps')},"App Dashboard"))]))));},_getAppIDErrorMessage:function(){if(this.state.appIdEntries.length===0||this._isAppIDTokensValid())return null;return ("One or more of the Facebook app IDs aren't connected to your account");},_getTokenizerPlaceholder:function(){return ("Add Facebook App ID");},_tokenizeQueryString:function(w){if(w)return new m({uniqueID:w,title:w});},_onEnterWithoutSelection:function(event){var w=event.target.value;if(w)this._onAddEntryAttempt(this._tokenizeQueryString(w));},_onQueryStringChange:function(event){this.setState({queryString:event.target.value});},_onAddEntryAttempt:function(w){var x=w.getUniqueID(),y=this.state.appIdEntries,z=y.some(function(ba){return ba.getUniqueID()===x;});if(z)return;var aa=g.getPrimedDao(this.props.accountID);aa.fetch.appInfo.one(function(ba){if(ba.is_first_party_app===false){w=new m({uniqueID:x,title:x,auxiliaryData:{invalid:false}});}else w=new m({uniqueID:x,title:x,auxiliaryData:{invalid:true}});y.push(w);this.setState({appIdEntries:y,queryString:''});this.props.onAppEntriesUpdated(y);}.bind(this),{appId:x,fields:['is_first_party_app'],handleError:function(ba,ca,da){w=new m({uniqueID:x,title:x,auxiliaryData:{invalid:true}});y.push(w);this.setState({appIdEntries:y,queryString:''});this.props.onAppEntriesUpdated(y);}.bind(this)});},_onRemoveEntryAttempt:function(w){var x=this.state.appIdEntries,y=x.indexOf(w);if(y>=0)x.splice(y,1);this.setState({appIdEntries:x});this.props.onAppEntriesUpdated(x);},_isAppIDTokensValid:function(){var w=this.state.appIdEntries,x=w.some(function(y){return y.getAuxiliaryData().invalid;});return w.length>0&&!x;}});e.exports=v;},null);
__d("AudienceManagerLoggingEvents",[],function(a,b,c,d,e,f){e.exports={AM_CREATE_MACA_ICON_CLICK:'am_create_maca_icon_click',AM_MACA_NUX_SHOWN:'am_maca_nux_shown',AM_MACA_NUX_CREATE_AUDIENCE:'am_maca_nux_create_audience',AM_MACA_EDITOR_APP_NO_EVENTS:'am_maca_editor_app_no_events',AM_MACA_EDITOR_APP_SELECTED:'am_maca_editor_app_selected',AM_MACA_EDITOR_VALIDATION_FAILURE:'am_maca_editor_validation_failure',AM_MACA_EDITOR_CREATE_AUDIENCE:'am_maca_editor_create_audience',AM_MACA_EDITOR_CREATE_SUCCESS:'am_maca_editor_create_success',AM_MACA_EDITOR_INCLUSIVE_EVENT_SELECTED:'am_maca_editor_event_selected',AM_MACA_EDITOR_EXCLUSIVE_EVENT_SELECTED:'am_maca_editor_exclusive_event_selected',AM_MACA_EDITOR_ACTION_TAKEN_ACTIVITY_SELECTED:'am_maca_editor_action_taken_activity_selected',AM_MACA_EDITOR_ACTION_NOT_TAKEN_ACTIVITY_SELECTED:'am_maca_editor_action_not_taken_activity_selected',AM_MACA_EDITOR_COMBINATION_ACTION_ACTIVITY_SELECTED:'am_maca_editor_combination_action_activity_selected',AM_MACA_EDITOR_INCLUDE_MOST_ACTIVE:'am_maca_editor_include_most_active',AM_MACA_EDITOR_INCLUDE_HIGHEST_VALUE:'am_maca_editor_include_highest_value',AM_MACA_EDITOR_SHOW_PERCENTILE_CHART:'am_maca_editor_show_percentile_chart',AM_MACA_EDITOR_NO_PERCENTILE_DATA:'am_maca_editor_no_percentile_data',AM_MACA_EDITOR_CREATE_WHALE_AUDIENCE_ATTEMPT:'am_maca_editor_create_whale_audience_attempt',AM_MACA_ACTIVATE_APP_UPSELL_SHOWN:'am_maca_editor_activate_app_upsell_shown',AM_CREATE_WCA_ICON_CLICK:'am_create_wca_icon_click',AM_WCA_NUX_CREATE_AUDIENCE:'am_wca_nux_create_audience',AM_WCA_VIEW_PIXEL_CREATE_AUDIENCE:'am_wca_view_pixel_create_audience',AM_WCA_NUX_VIEW_PIXEL:'am_wca_nux_view_pixel',AM_WCA_NUX_CREATE_PIXEL:'am_wca_nux_create_pixel',AM_WCA_NUX_CREATE_PIXEL_SUCCESS:'am_wca_nux_create_pixel_success',AM_WCA_EDITOR_VALIDATION_FAILURE:'am_wca_editor_validation_failure',AM_WCA_EDITOR_CREATE_AUDIENCE:'am_wca_editor_create_audience',AM_WCA_EDITOR_CREATE_FAIL:'am_wca_editor_create_fail',AM_WCA_EDITOR_CREATE_SUCCESS:'am_wca_editor_create_success',AM_WCA_EDITOR_ADD_RULE:'am_wca_editor_add_rule',AM_WCA_EDITOR_ADD_TOKEN:'am_wca_editor_add_token',AM_WCA_TOS_ACCEPT_FAILURE:'am_wca_tos_accept_failure',AM_WCA_TOS_ACCEPT_SUCCESS:'am_wca_tos_accept_success',AM_WCA_EDITOR_AUDIENCE_TYPE_ALL_WEBSITE_VISITORS:'am_wca_editor_audience_type_all_website_visitors',AM_WCA_EDITOR_AUDIENCE_TYPE_ALL_WEBSITE_VISITORS_WITH_DOMAIN:'am_wca_editor_audience_type_all_website_visitors_with_domain',AM_WCA_EDITOR_DOMAIN_SELECTOR_SHOWN:'am_wca_editor_audience_domain_selector_shown',AM_WCA_EDITOR_AUDIENCE_TYPE_RULES:'am_wca_editor_audience_type_rules',AM_WCA_EDITOR_AUDIENCE_TYPE_SPECIFIC_PAGES:'am_wca_editor_audience_type_specific_pages',AM_WCA_EDITOR_AUDIENCE_TYPE_INC_EXC:'am_wca_editor_audience_type_inc_exc',AM_WCA_EDITOR_AUDIENCE_TYPE_CHURNED:'am_wca_editor_audience_type_churned',WCA_NUX_CONFIRM:'wca_nux_confirm',WCA_EMAIL_PIXEL:'am_wca_email_pixel',WCA_EMAIL_PIXEL_SUCCESS:'am_wca_email_pixel_success',WCA_EMAIL_PIXEL_FAILURE:'am_wca_email_pixel_failure',AM_CA_NUX_CREATE_AUDIENCE:'am_ca_nux_create_audience',AM_CA_CREATE_AUDIENCE_CLICK:'am_ca_create_audience_click',AM_LAL_NUX_CREATE_AUDIENCE:'am_lal_nux_create_audience',AM_LAL_CREATE_AUDIENCE_CLICK:'am_lal_create_audience_click',AM_CA_CREATE_DIALOG_LOAD:'am_ca_create_dialog_load',AM_CA_CREATE_CUSTOMER_LIST_CLICK:'am_ca_create_customer_list_click',AM_CA_CREATE_WCA_CLICK:'am_ca_create_wca_click',AM_CA_CREATE_MACA_CLICK:'am_ca_create_maca_click',AM_CA_CREATE_FILE_IMPORT_CLICK:'am_ca_create_file_import_click',AM_CA_CREATE_COPY_PASTE_CLICK:'am_ca_create_copy_paste_click',AM_CA_CREATE_MAIL_CHIMP_CLICK:'am_ca_create_mail_chimp_click',AM_CA_CREATE_CUSTOMER_LIST_BACK_CLICK:'am_ca_create_customer_list_back_click',AM_CA_CREATE_BACK_TO_CUSTOMER_LIST_CLICK:'am_ca_create_back_to_customer_list_click',AM_CA_CREATE_FILE_IMPORT_CREATE_AUDIENCE_CLICK:'am_ca_create_file_import_create_audience_click',AM_CA_CREATE_FILE_IMPORT_CONTINUE_CREATE_AUDIENCE_CLICK:'am_ca_create_file_import_continue_create_audience_click',AM_CA_CREATE_FILE_IMPORT_CHOOSE_ANOTHER_FILE_CLICK:'am_ca_create_file_import_choose_another_file_click',AM_CA_CREATE_COPY_PASTE_CREATE_AUDIENCE_CLICK:'am_ca_create_copy_paste_create_audience_click',AM_CA_CREATE_LOG_INTO_MAIL_CHIMP_CLICK:'am_ca_create_log_into_mail_chimp_click',AM_CA_CREATE_MAIL_CHIMP_CREATE_AUDIENCE_CLICK:'am_ca_create_mail_chimp_create_audience_click',AM_CA_CREATE_UPLOAD_COMPLETE_CLICK:'am_ca_create_upload_complete_click',AM_CA_CREATE_UPLOAD_COMPLETE_NEXT_CLICK:'am_ca_create_upload_complete_next_click',AM_CA_CREATE_CREATE_AD_CLICK:'am_ca_create_create_ad_click',AM_CA_CREATE_CREATE_LAL_CLICK:'am_ca_create_create_lal_click',AM_CA_CREATE_FINISH_CREATION_SUCCESS:'am_ca_create_finish_creation_success',AM_CA_CREATE_CLOSE_DIALOG:'am_ca_create_close_dialog',AM_CA_CREATE_VIEW_EXAMPLE_CLICK:'am_ca_create_view_example_click',AM_CA_CREATE_UPLOAD_FILE:'am_ca_create_upload_file',AM_CA_CREATE_VIEW_ERROR_REPORT:'am_ca_create_view_error_report',AM_CA_CREATE_UPLOAD_FILE_ERROR:'am_ca_create_upload_file_error',AM_CA_EDIT_UPDATE_META_DATA:'am_ca_edit_update_meta_data',AM_CA_EDIT_UPDATE_META_DATA_ONLY:'am_ca_edit_update_meta_data_only',AM_CA_EDIT_FILE_IMPORT_ADD_USERS:'am_ca_edit_file_import_add_users',AM_CA_EDIT_FILE_IMPORT_REMOVE_USERS:'am_ca_edit_file_import_remove_users',AM_CA_EDIT_COPY_PASTE_ADD_USERS:'am_ca_edit_copy_paste_add_users',AM_CA_EDIT_COPY_PASTE_REMOVE_USERS:'am_ca_edit_copy_paste_remove_users',AM_CA_EDIT_FILE_IMPORT_CHOOSE_ANOTHER_FILE_CLICK:'am_ca_edit_file_import_choose_another_file_click',AM_CA_EDIT_FILE_IMPORT_CONTINUE_EDIT_AUDIENCE_CLICK:'am_ca_edit_file_import_continue_edit_audience_click',AM_CA_EDIT_FINISH_SUCCESS:'am_ca_edit_finish_success',AM_CA_EDIT_CLOSE_DIALOG:'am_ca_edit_close_dialog',AM_CA_OPT_OUT_USER_FINISH_SUCCESS:'am_ca_opt_out_user_finish_success',AM_CA_OPT_OUT_USER_CLOSE_DIALOG:'am_ca_opt_out_user_close_dialog',AM_CA_OPT_OUT_USER_CONTINUE_EDIT_AUDIENCE_CLICK:'am_ca_opt_out_user_continue_edit_audience_click',AM_CA_OPT_OUT_USER_CHOOSE_ANOTHER_FILE_CLICK:'am_ca_opt_out_user_choose_another_file_click',AM_AUDIENCE_MANAGER_VIEW:'am_audience_manager_view',AM_FILTER_BUTTON_CLICKED:'am_filter_button_clicked',AM_FILTER_LEFT_PRESET_CHANGED:'am_filter_left_preset_changed',AM_FILTER_TOKENIZER_CHANGED:'am_filter_tokenizer_changed',AM_FILTER_NAME_SEARCH:'am_filter_name_search',AM_TABLE_ACTION_CREATE_AD_CLICKED:'am_table_action_create_ad_clicked',AM_TABLE_COLUMN_CUSTOMIZE:'am_table_column_customize',AM_TABLE_ACTION_BULK_DELETE_CLICKED:'am_table_action_bulk_delete_clicked',AM_TABLE_ACTION_CREATE_LAL_CLICKED:'am_table_action_create_lal_clicked',AM_TABLE_ACTION_DELETE_CLICKED:'am_table_action_delete_clicked',AM_TABLE_ACTION_EDIT_CLICKED:'am_table_action_edit_clicked',AM_TABLE_ACTION_VIEW_PIXEL_CLICKED:'am_table_action_view_pixel_clicked',AM_TABLE_ACTION_SHARE_CLICKED:'am_table_action_share_clicked',AM_TABLE_SCROLLING_FETCH:'am_table_scrolling_fetch',AM_CREATE_SAVED_AUDIENCE_CLICKED:'am_create_saved_audience_clicked',AM_CREATE_SAVED_AUDIENCE_COMPLETED:'am_create_saved_audience_completed',AM_DETAILS_AUDIENCE_VIEW:'am_details_audience_view',AM_DETAILS_ACTION_CREATE_AD_CLICKED:'am_details_action_create_ad_clicked',AM_DETAILS_SAVE_CLICKED:'am_details_save_clicked',AM_DETAILS_SHARE_CLICKED:'am_details_share_clicked',AM_DETAILS_CREATE_LAL_CLICKED:'am_details_create_lal_clicked'};},null);
__d("AudienceManagerDownloadReportLink.react",["AdInterfacesUiLogger","AudienceManagerLoggingEvents","DOM","Link.react","React","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n=(a.Blob||a.BlobBuilder||a.WebKitBlobBuilder)&&(a.URL||a.webkitURL);function o(r){var s=r.join("\n"),t=a.Blob;if(t)return new t([s],{type:'text/plain'});var u=a.BlobBuilder||a.WebKitBlobBuilder;if(u){var v=new u();v.append(s);return v.getBlob('text/plain');}return null;}function p(r){var s=o(r);if(!s)return;var t=a.URL||a.webkitURL;m(t.createObjectURL);var u=t.createObjectURL(s),v=i.create('a',{href:u,download:'export.csv'});v.click();}var q=k.createClass({displayName:"AudienceManagerDownloadReportLink",propTypes:{errorTokenLists:k.PropTypes.array},render:function(){if(this.props.errorTokenLists&&this.props.errorTokenLists.length>0&&n){var r=function(){g.log(h.AM_CA_CREATE_VIEW_ERROR_REPORT);p(this.props.errorTokenLists);}.bind(this);return (k.createElement(j,{target:"#",onClick:r},"View error report"));}return null;}});e.exports=q;},null);
__d("AudienceManagerCompleteUploadMessage.react",["AudienceManagerDownloadReportLink.react","ImageBlock.react","Image.react","InlineBlock.react","React","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o='/images/ads/audience_manager/ca_done.png',p=44,q=k.createClass({displayName:"AudienceManagerCompleteUploadMessage",propTypes:{message:k.PropTypes.string.isRequired,numberOfValidRecords:k.PropTypes.number,numberOfTotalRecords:k.PropTypes.number,errorTokenLists:k.PropTypes.array},render:function(){return (k.createElement("div",{className:"_3-97"},k.createElement(h,{spacing:"large"},k.createElement(i,{src:o}),k.createElement(j,{alignv:"middle",height:p},k.createElement(l,{weight:"bold",size:"medium",display:"block"},this.props.message),k.createElement("div",null,this._renderRecordMessage(),' ',k.createElement(g,{errorTokenLists:this.props.errorTokenLists}))))));},_renderRecordMessage:function(){if(this.props.numberOfValidRecords&&this.props.numberOfTotalRecords)return (k.createElement(l,{size:"small"},n._("{number of successfully-uploaded records} records uploaded.",[n.param("number of successfully-uploaded records",this.props.numberOfValidRecords)])));return null;}});e.exports=q;},null);
__d("AudienceManagerCompleteUploadNotice.react",["React","XUINotice.react","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){'use strict';var l=g.createClass({displayName:"AudienceManagerCompleteUploadNotice",render:function(){return (g.createElement("div",{className:"_3-8z _3-97"},g.createElement(h,null,g.createElement(i,{size:"small",display:"block"},"It will take up to 30 minutes for your audience to be ready for use. We'll notify you when your audience is ready. You can also check status in Audience Manager."))));}});e.exports=l;},null);
__d("AudienceManagerUIConstants",["fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h){var i={NAME:{label:"Name",description:"The name of audience."},TYPE:{label:"Type",description:"The type of audience, including a Custom Audience, lookalike or people connected to your Page, event or app."},SOURCE:{label:"Source",description:"The kind of data used to create the audience, including your Page, customer contacts, website traffic or mobile app activity."},SIZE:{label:"Size",description:"The number of people Facebook has identified in the audience."},STATUS:{label:"Availability",description:"Whether the audience is available to use for advertising."},DATE_CREATED:{label:"Date Created",description:"The date and time the audience was created."},AUDIENCE_ID:{label:"Audience ID",description:"The ID number that is unique to each audience."},SHARING:{label:"Sharing",description:"The accounts you have shared an audience with or the account that shared an audience with you."}},j={};j[h.UPLOAD_TYPE_EMAIL]="Emails";j[h.UPLOAD_TYPE_UID]="User IDs";j[h.UPLOAD_TYPE_PHONE]="Phone Numbers";j[h.UPLOAD_TYPE_MOBILE_ADVERTISER_ID]="Mobile Advertiser IDs";var k="At least one location or custom audience must be selected";e.exports={CUSTOM_AUDIENCE_DATA_TYPE_LABEL:j,DEFAULT_DIALOG_WIDTH:600,STS_DIALOG_WIDTH:850,MAILCHIMP_WINDOW_HEIGHT:500,MAILCHIMP_WINDOW_WIDTH:600,MAX_AUDIENCES_LOAD:50,DEFAULT_ROW_HEIGHT:44,DEFAULT_HEADER_HEIGHT:32,HELP_DIALOG_LINGER_TS:250,BULK_ACTION_TYPE:{DELETE:'delete',CREATE_AD:'create_ad'},CREATE_AUDIENCE_ACTION_TYPE:{CUSTOM_AUDIENCE:'custom_audience',LOOKALIKE:'lookalike',SAVED_TARGET_SPEC:'saved_target_spec'},HELP_LINK_WIDTH:300,SORT_ORDER:{DESC:'DESC',ASC:'ASC'},ALIGN:{LEFT:'left',CENTER:'center',RIGHT:'right'},TABLE_TOP_PADDING:8,COLUMNS:i,FORM_DISPLAY_TYPE:{IN_LINE:'in_line',DIALOG:'dialog'},LAL_ORIGIN_CUSTOM_AUDIENCE:'custom_audience',AUDIENCE_TYPE:{CUSTOM_AUDIENCE:'custom_audience',SAVED_TARGET_SPEC:'saved_target_spec'},STS_FORM_INSTRUCTION:k,STS_DISPLAY_NAME:"Saved Target Group",CA_DISPLAY_NAME:"Custom Audience",LAL_DISPLAY_NAME:"Lookalike"};},null);
__d("AudienceManagerDataTypeSelector.react",["AudienceManagerUIConstants","React","XUISelector.react","XUIGrayText.react","cx","fbt","getObjectValues","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o=i.Option,p=g.CUSTOM_AUDIENCE_DATA_TYPE_LABEL,q=h.createClass({displayName:"AudienceManagerDataTypeSelector",propTypes:{defaultValue:h.PropTypes.oneOf(m(n)),onTypeChange:h.PropTypes.func.isRequired},getDefaultProps:function(){return {defaultValue:n.UPLOAD_TYPE_EMAIL};},render:function(){var r=[h.createElement(o,{value:n.UPLOAD_TYPE_EMAIL,key:n.UPLOAD_TYPE_EMAIL},p[n.UPLOAD_TYPE_EMAIL]),h.createElement(o,{value:n.UPLOAD_TYPE_UID,key:n.UPLOAD_TYPE_UID},p[n.UPLOAD_TYPE_UID]),h.createElement(o,{value:n.UPLOAD_TYPE_PHONE,key:n.UPLOAD_TYPE_PHONE},p[n.UPLOAD_TYPE_PHONE]),h.createElement(o,{value:n.UPLOAD_TYPE_MOBILE_ADVERTISER_ID,key:n.UPLOAD_TYPE_MOBILE_ADVERTISER_ID},p[n.UPLOAD_TYPE_MOBILE_ADVERTISER_ID])];return (h.createElement("div",null,h.createElement(j,{weight:"bold",display:"block",shade:"medium",className:"_2pin"},"Data Type"),h.createElement(i,{defaultValue:this.props.defaultValue,onChange:this.props.onTypeChange},r)));}});e.exports=q;},null);
__d("AudienceCreatorTypeSelector.react",["Image.react","ImageBlock.react","React","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m='/images/ads/audience_manager/ca_custom_list.png',n='/images/ads/audience_manager/ca_fb_app.png',o='/images/ads/audience_manager/ca_web.png',p=i.createClass({displayName:"AudienceCreatorTypeSelector",propTypes:{onCustomerListClick:i.PropTypes.func.isRequired,onWebsiteTrafficClick:i.PropTypes.func.isRequired,onMobileAppClick:i.PropTypes.func.isRequired},_renderCustomerListItem:function(){return (i.createElement("li",{className:"_247s",onClick:this.props.onCustomerListClick},i.createElement(h,{spacing:"large"},i.createElement(g,{src:m}),i.createElement("div",null,i.createElement(j,{weight:"bold",shade:"medium",size:"medium"},"Customer List"),i.createElement("div",{className:"_3-8x"},"Match emails, phone numbers, Facebook user IDs or mobile advertiser IDs to people on Facebook")))));},_renderWebsiteTrafficItem:function(){return (i.createElement("li",{className:"_247s",onClick:this.props.onWebsiteTrafficClick},i.createElement(h,{spacing:"large"},i.createElement(g,{src:o}),i.createElement("div",null,i.createElement(j,{weight:"bold",shade:"medium",size:"medium"},"Website Traffic"),i.createElement("div",{className:"_3-8x"},"Create a list of people who visit your website or view specific web pages")))));},_renderMobileAppItem:function(){return (i.createElement("li",{className:"_247s",onClick:this.props.onMobileAppClick},i.createElement(h,{spacing:"large"},i.createElement(g,{src:n}),i.createElement("div",null,i.createElement(j,{weight:"bold",shade:"medium",size:"medium"},"App Activity"),i.createElement("div",{className:"_3-8x"},"Create a list of people who have taken a specific action in your app or game")))));},render:function(){return (i.createElement("div",{className:"_247t"},i.createElement("ul",null,this._renderCustomerListItem(),this._renderWebsiteTrafficItem(),this._renderMobileAppItem())));}});e.exports=p;},null);
__d("AudienceManagerURLConstants",[],function(a,b,c,d,e,f){e.exports={CUSTOM_AUDIENCE_TOS:'/ads/manage/customaudiences/tos.php',MACA_LEARN_MORE:'https://developers.facebook.com/docs/ads-for-apps/mobile-app-custom-audiences',MACA_ANDROID_SDK:'https://developers.facebook.com/docs/android/app-events/',MACA_IOS_SDK:'https://developers.facebook.com/docs/ios/app-events/',MACA_ANDROID_ACTIVATE_APP:'https://developers.facebook.com/docs/android/app-events#appActivation',MACA_IOS_ACTIVATE_APP:'https://developers.facebook.com/docs/ios/app-events/#appActivation',MACA_CANVAS_SDK:'https://developers.facebook.com/docs/canvas/appevents',WCA_GETTING_STARTED:'https://www.facebook.com/business/a/online-sales/custom-audiences-website',WCA_TECHNICAL_DOC:'https://developers.facebook.com/docs/ads-for-websites/website-custom-audiences/getting-started',WCA_CONFIGURE_RULES_DOC:'https://developers.facebook.com/docs/ads-for-websites/website-custom-audiences/getting-started#configure-rules',WCA_INSTALL_PIXEL_DOC:'https://developers.facebook.com/docs/ads-for-websites/website-custom-audiences/getting-started#install-the-pixel',WCA_FEEDBACK:'https://www.facebook.com/help/contact/237474373109946',MOBILE_ADVERTISING_IDS_DOC:'https://developers.facebook.com/docs/ads-for-apps/custom-audiences-for-mobile-apps/'};},null);
__d("AudienceManagerViewFormatingExampleLink.react",["AdInterfacesUiLogger","AudienceManagerLoggingEvents","AudienceManagerUIConstants","AudienceManagerURLConstants","LeftRight.react","Link.react","React","ReactLayeredComponentMixin","XUISelector.react","XUICloseButton.react","XUIContextualDialog.react","XUIContextualDialogTitle.react","XUIContextualDialogBody.react","XUIGrayText.react","cx","fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){'use strict';var x=o.Option,y=i.CUSTOM_AUDIENCE_DATA_TYPE_LABEL,z=m.createClass({displayName:"AudienceManagerViewFormatingExampleLink",mixins:[n],propTypes:{exampleContents:m.PropTypes.array},getDefaultProps:function(){return {exampleContents:[{name:w.UPLOAD_TYPE_EMAIL,label:y[w.UPLOAD_TYPE_EMAIL],content:m.createElement("p",null,"Ex.",m.createElement("br",null),"name1@example.com",m.createElement("br",null),"name2@example.com",m.createElement("br",null),"name3@example.com",m.createElement("br",null),"name1@example.com,name2@example.com",m.createElement("br",null),"name1@example.com;name2@example.com",m.createElement("br",null))},{name:w.UPLOAD_TYPE_UID,label:y[w.UPLOAD_TYPE_UID],content:m.createElement("p",null,m.createElement("ul",{className:"_4wii"},m.createElement("li",null,"Numeric characters only")),"Ex.",m.createElement("br",null),"1234567890",m.createElement("br",null),"1443637309",m.createElement("br",null))},{name:w.UPLOAD_TYPE_PHONE,label:y[w.UPLOAD_TYPE_PHONE],content:m.createElement("p",null,m.createElement("ul",{className:"_4wii"},m.createElement("li",null,"Country code + Area Code + Number"),m.createElement("li",null,"No leading zeros from country code"),m.createElement("li",null,"Numeric characters only")),"Ex.",m.createElement("br",null),"16505551234",m.createElement("br",null),"16505551235",m.createElement("br",null))},{name:w.UPLOAD_TYPE_MOBILE_ADVERTISER_ID,label:y[w.UPLOAD_TYPE_MOBILE_ADVERTISER_ID],content:m.createElement("p",null,"We support:",m.createElement("ul",{className:"_4wii"},m.createElement("li",null,"Android's advertising ID,"),m.createElement("li",null,"Apple's Advertising Identifier(IDFA),and"),m.createElement("li",null,"Facebook App User IDs")),m.createElement(l,{href:j.MOBILE_ADVERTISING_IDS_DOC,target:"_blank"},"Learn more"))}]};},getInitialState:function(){return {dialogShown:false,currentContent:this.props.exampleContents[0]};},onLinkClick:function(){this.setState({dialogShown:!this.state.dialogShown});g.log(h.AM_CA_CREATE_VIEW_EXAMPLE_CLICK);},onSelectorClick:function(aa){this.setState({currentContent:this._findContentByName(aa.value)});},_findContentByName:function(aa){for(var ba=0;ba<this.props.exampleContents.length;ba++)if(this.props.exampleContents[ba].name===aa)return this.props.exampleContents[ba];},_getSelectorOptions:function(){var aa=this.props.exampleContents.map(function(ba){return (m.createElement(x,{value:ba.name,key:ba.name},ba.label));});return aa;},renderLayers:function(){return {contextualDialog:m.createElement(q,{contextRef:"link",shown:this.state.dialogShown,position:"below",alignment:"right",autoFocus:true,width:q.WIDTH.NORMAL},m.createElement(r,null,m.createElement(k,null,m.createElement(o,{defaultValue:this.state.currentContent.name,onChange:this.onSelectorClick},this._getSelectorOptions()),m.createElement("div",null,m.createElement(p,{use:"confirm",label:"Close",onClick:this.onLinkClick})))),m.createElement(s,null,m.createElement(t,{shade:"light",size:"small",display:"block"},this.state.currentContent.content)))};},render:function(){return (m.createElement(l,{ref:"link",onClick:this.onLinkClick},"View formatting examples."));}});e.exports=z;},null);
__d("CustomAudienceUploadErrorBox.react",["React","cx","fbt","ix","Image.react","List.react"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.PropTypes,n=g.createClass({displayName:"CustomAudienceUploadErrorBox",propTypes:{message:m.string.isRequired,type:m.string,numMissing:m.number,numInvalid:m.number,errorList:m.array},getDefaultProps:function(){return {message:null,type:'',numMissing:0,numInvalid:0,errorList:null};},_renderErrorList:function(){var o=this.props.errorList;return (g.createElement(l,{border:"none",spacing:"none"},o.map(function(p){return g.createElement("li",{key:p.line}," ",p.token," ");})));},_renderType:function(o){switch(o){case 'email':return "Email";case 'uid':return "Uid";case 'phone number':return "Phone Number";case 'hash':return "Hash";default:return '';}},render:function(){var o=this.props.message,p=this.props.type,q=this.props.numMissing,r=this.props.numInvalid,s=this.props.errorList,t=null;if(s){var u=i._("{Number of errors} {Type of token} Errors",[i.param("Number of errors",q+r),i.param("Type of token",this._renderType(p))]),v=null,w=null;if(q>0&&r>0){v=g.createElement("div",null,i._("Missing: {Number of missing tokens}",[i.param("Number of missing tokens",g.createElement("span",{className:"_5od5"},q))]));w=g.createElement("div",null,i._("Incorrectly formatted: {Number of invalid tokens}",[i.param("Number of invalid tokens",g.createElement("span",{className:"_5od5"},r))]));}t=g.createElement("div",{className:"_5od3"},g.createElement("div",{className:"_5od4"},u),v,w,g.createElement("div",{className:"_5od6"},this._renderErrorList()));}return (g.createElement("div",{className:"_5od7"},g.createElement("span",{className:"_5od8"},g.createElement(k,{src:j('images/ads/createflow/creative/error-white.png')})),g.createElement("span",{className:"_5od9"},o,t)));}});e.exports=n;},null);
__d("AudienceManagerCopyPasteInitDialogContent.react",["AbstractTextArea.react","AudienceManagerAppIDInput.react","AudienceManagerDataTypeSelector.react","AudienceManagerURLConstants","AudienceManagerViewFormatingExampleLink.react","CustomAudienceUploadErrorBox.react","ImageBlock.react","Image.react","InlineBlock.react","Link.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react","ads-cluster-constants","isEmail","isInternationalPhoneNumber","cx","fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){var ba="Untitled",ca='/images/ads/audience_manager/ca_copy.png',da=44,ea=/^\d+$/,fa=20,ga=q.createClass({displayName:"AudienceManagerCopyPasteInitDialogContent",propTypes:{accountID:q.PropTypes.string.isRequired,onBack:q.PropTypes.func.isRequired,onCreateAudienceClick:q.PropTypes.func.isRequired},getInitialState:function(){return {pasteBin:'',error:null,selectedDataType:aa.UPLOAD_TYPE_EMAIL,termsAccepted:true,appIDEntries:[]};},render:function(){return (q.createElement("div",null,q.createElement(r,null,q.createElement("div",{className:"_50_z"},q.createElement(m,{spacing:"large"},q.createElement(n,{src:ca}),q.createElement(o,{alignv:"middle",height:da},q.createElement(u,{weight:"bold",shade:"medium",size:"medium"},"Copy and paste your customer list"))),q.createElement("div",{className:"_3-8-"},q.createElement("p",null,"Copy and paste a list of emails, phone numbers, Facebook user IDs or mobile advertiser IDs from a spreadsheet or text file."),q.createElement("p",null,"You can copy columns from a spreadsheet with one record per row or a list of records separated by commas.",' ',q.createElement(k,null))),q.createElement("div",{className:"_3-98 _3-8z"},q.createElement(i,{defaultValue:this.state.selectedDataType,canUploadAppUserID:this.props["false"],onTypeChange:this._onDataTypeChange})),this._renderAppIDInput(),this._renderPasteBin(),q.createElement("div",{className:"_3-8w"},q.createElement("input",{type:"checkbox",checked:this.state.termsAccepted,onChange:this._onTermsCheckboxChanged},z._("I agree to the {link}",[z.param("link",q.createElement(p,{target:"_blank",href:j.CUSTOM_AUDIENCE_TOS},"Facebook Custom Audiences Terms"))]))))),q.createElement(t,null,q.createElement("div",null,q.createElement(s,{onClick:this.props.onBack,label:"Back"}),q.createElement(s,{use:"confirm",disabled:!this._getShouldEnableCreateAudienceButton(),onClick:this._onCreateAudienceButtonClick,label:"Create Audience"})))));},_renderPasteBin:function(){var ha=null;if(!!this.state.error)ha=q.createElement(l,{message:this.state.error});return (q.createElement("div",{className:"_3-8- _3-98"},q.createElement(g,{className:"_5ukc",value:this.state.pasteBin,onChange:this._onPasteBinChange,placeholder:"Paste your customer list here."}),ha));},_renderAppIDInput:function(){if(this.state.selectedDataType===aa.UPLOAD_TYPE_UID)return q.createElement(h,{accountID:this.props.accountID,onAppEntriesUpdated:this._onAppEntriesUpdated});return null;},_getShouldEnableCreateAudienceButton:function(){var ha=true;if(this.state.selectedDataType===aa.UPLOAD_TYPE_UID){var ia=this.state.appIDEntries.some(function(ja){return ja.getAuxiliaryData().invalid;});ha=this.state.appIDEntries.length>0&&!ia;}return !!this.state.pasteBin&&!!this.state.termsAccepted&&ha;},_onAppEntriesUpdated:function(ha){this.setState({appIDEntries:ha});},_onPasteBinChange:function(ha){this.setState({pasteBin:ha.target.value});},_onDataTypeChange:function(ha){this.setState({selectedDataType:ha.value,appIDEntries:[]});},_onTermsCheckboxChanged:function(ha){this.setState({termsAccepted:ha.target.checked});},_onCreateAudienceButtonClick:function(){var ha=this.state.pasteBin.trim().split(/\r\n|\n|\r|;|,/).map(function(ja){return ja.trim();});ha=ha.filter(function(ja){return !!ja;});if(ha.length>v.CLUSTER_API_MAX_SIZE){this.setState({error:z._("You can upload at most {max number of entries} entries.",[z.param("max number of entries",v.CLUSTER_API_MAX_SIZE)])});return;}var ia=this._onCheckError(ha);if(!ia){this.props.onCreateAudienceClick(this.state.selectedDataType,this.state.appIDEntries,ha,ba);}else this.setState({error:z._("You need to add at least {mininum number of entries} valid entries to continue.",[z.param("mininum number of entries",fa)])});},_onCheckError:function(ha){var ia=ha;if(this.state.selectedDataType===aa.UPLOAD_TYPE_EMAIL){ia=ha.filter(function(ja){ja=ja.toLowerCase();return w(ja);});}else if(this.state.selectedDataType===aa.UPLOAD_TYPE_PHONE){ia=ha.filter(function(ja){return x(ja);});}else if(this.state.selectedDataType===aa.UID)ia=ha.filter(function(ja){return ea(ja);});if(ia.length<fa)return true;return false;}});e.exports=ga;},null);
__d("BootloadedComponent.react",["React"],function(a,b,c,d,e,f,g){var h=g.createClass({displayName:"BootloadedComponent",propTypes:{bootloadPlaceholder:g.PropTypes.element.isRequired,bootloadComponent:g.PropTypes.func.isRequired},getInitialState:function(){return {component:null};},componentDidMount:function(){this.props.bootloadComponent(this.onComponentLoaded);},render:function(){var i=this.state.component;if(!i)return this.props.bootloadPlaceholder;return (g.createElement(i,g.__spread({},this.props),this.props.children));},onComponentLoaded:function(i){this.setState({component:i});}});e.exports=h;},null);
__d("AudienceManagerCreateAudienceDialog.react",["AudienceManagerUIConstants","BootloadedComponent.react","Bootloader","React","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUISpinner.react","cx","fbt","AdsCreationExperiments","AdsCurrencyConfig","BonsaiConfig","CustomAudienceHashIdSchemaTypesJS","CustomAudienceSessionTypesJS","CustomAudienceSimpleIdSchemaTypesJS","DateFormatConfig","InsightsCountryNames","InsightsCurrencyNames","InsightsLocaleNames","NumberFormatConfig"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b('AdsCreationExperiments');b('AdsCurrencyConfig');b('BonsaiConfig');b('CustomAudienceHashIdSchemaTypesJS');b('CustomAudienceSessionTypesJS');b('CustomAudienceSimpleIdSchemaTypesJS');b('DateFormatConfig');b('InsightsCountryNames');b('InsightsCurrencyNames');b('InsightsLocaleNames');b('NumberFormatConfig');var s=j.PropTypes;function t(w){i.loadModules(["AudienceCreatorSelector.react"],w);}var u="Create Audience",v=j.createClass({displayName:"AudienceManagerCreateAudienceDialog",propTypes:{dao:s.object.isRequired,showDialog:s.bool.isRequired,onCancel:s.func.isRequired,onAudienceAdded:s.func.isRequired,accountId:s.string.isRequired,tosAccepted:s.object.isRequired,tosRequirementsForAccount:s.object.isRequired,defaultMobileApp:s.object,autoLaunch:s.object},getInitialState:function(){return {shouldRender:this.props.showDialog};},componentWillReceiveProps:function(w){if(w.showDialog)this.setState({shouldRender:true});},render:function(){if(!this.state.shouldRender&&!this.props.autoLaunch)return null;var w="Cancel";return (j.createElement(k,{layerHideOnBlur:false,shown:this.props.showDialog,width:g.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle},j.createElement(o,null,j.createElement("span",{className:"_5mog"},u)),j.createElement(l,null,j.createElement("div",{className:"_5rkr _5ldj"},j.createElement("div",{className:"_5moh"},"Choose the type of audience you want to create on Facebook."),j.createElement("div",{className:"_3-95"},"This process is secure and the details about your customers will be kept private."),j.createElement(h,{bootloadComponent:t,bootloadPlaceholder:j.createElement(p,{background:"light",size:"large"}),accountID:this.props.accountId,onClick:this._onCancelButtonClick,dao:this.props.dao,onAudienceAdded:this.props.onAudienceAdded,tosAccepted:this.props.tosAccepted,tosRequirementsForAccount:this.props.tosRequirementsForAccount,defaultMobileApp:this.props.defaultMobileApp,autoLaunch:this.props.autoLaunch}))),j.createElement(n,null,j.createElement(m,{use:"default",action:"cancel",label:w}))));},_onToggle:function(w){if(!w)this.props.onCancel&&this.props.onCancel();},_onCancelButtonClick:function(){this.props.onCancel&&this.props.onCancel();}});e.exports=v;},null);
__d("CreateCAStages",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({CREATE_AUDIENCE_INIT:null,CUSTOMER_LIST:null,COPY_PASTE_INIT:null,COPY_PASTE_UPLOAD:null,COPY_PASTE_UPLOAD_COMPLETE:null,FILE_IMPORT_INIT:null,FILE_IMPORT_CHECK_FILE:null,FILE_IMPORT_UPLOAD:null,FILE_IMPORT_UPLOAD_CONVERT_ERROR:null,FILE_IMPORT_NO_VALID_ENTRY:null,FILE_IMPORT_UPLOAD_COMPLETE:null,FILE_IMPORT_UPLOAD_ERROR:null,MAIL_CHIMP_INIT:null,MAIL_CHIMP_AUTHENTICATE:null,MAIL_CHIMP_FETCH_COMPLETE:null,MAIL_CHIMP_UPLOAD:null,MAIL_CHIMP_UPLOAD_COMPLETE:null,CREATION_COMPLETE_NEXT_STEP:null,EDIT_AUDIENCE_INIT:null,OPT_OUT_USER_FILE_IMPORT_INIT:null});e.exports=h;},null);
__d("CreateCADialogTypes",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({MACA:null,CUSTOMER_LIST:null,LOOKALIKE:null});e.exports=h;},null);
__d("AdsAMCreateAudienceStore",["AdsAMActionTypes","AdsAMDispatcher","Arbiter","CreateCAStages","CreateCADialogTypes","CustomAudienceCreationErrors","ImmutableObject","copyProperties","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q,r,s,t,u,v,w,x,y,z,aa;function ba(){p=0;r=k.CUSTOMER_LIST;q=j.CREATE_AUDIENCE_INIT;s={validRecord:0,invalidRecord:0,totalRecord:0};w=[];x={};y=0;z=0;t={};u=[];v={};aa="";}function ca(ea){switch(ea.type){case l.FILE_IMPORT_CSV_CONVERT_ERROR:q=j.FILE_IMPORT_UPLOAD_CONVERT_ERROR;aa=ea.errorDetails;break;case l.FILE_IMPORT_NO_VALID_ENTRY:q=j.FILE_IMPORT_NO_VALID_ENTRY;aa="No valid entries were found. Please upload a different file.";break;case l.FILE_IMPORT_TOKEN_ERROR:case l.COPY_PASTE_TOKEN_ERROR:u.push(ea.error);return;case l.FILE_IMPORT_ERROR_LIMIT_REACH:v=ea.errorDetails;q=j.FILE_IMPORT_UPLOAD_ERROR;return;}}ba();var da=n(new i(),{getViewDialogType:function(){return r;},getViewStage:function(){return q;},getNumberOfRecords:function(){return new m(s);},getContactsLists:function(){return w;},getTotalPage:function(){return y;},getCurrentPage:function(){return z;},getProgress:function(){return p;},getSelectableContactsLists:function(){var ea={};for(var fa in x)ea[fa]=new m(x[fa]);return ea;},getAudiences:function(){return t;},getErrorTokenLists:function(){var ea=[];ea=u.map(function(fa){return fa.token;});return ea;},getErrorDetailsForLimitReach:function(){return new m(v);},getErrorMessage:function(){return aa;},dispatchToken:h.register(function(ea){var fa=ea.action,ga=true;switch(fa.actionType){case g.CREATE_AUDIENCE_RESET:ba();break;case g.CREATE_AUDIENCE_SET_VIEW_STAGE:q=fa.viewStage;break;case g.CREATE_AUDIENCE_SET_VIEW_DIALOG_TYPE:r=fa.viewDialogType;break;case g.CREATE_AUDIENCE_SHOW_MACA_DIALOG:r=k.MACA;break;case g.FILE_IMPORT_CHECK_FILE:q=j.FILE_IMPORT_CHECK_FILE;break;case g.FILE_IMPORT_START_UPLOAD:q=j.FILE_IMPORT_UPLOAD;break;case g.FILE_IMPORT_UPLOAD_PROGRESS:case g.COPY_PASTE_UPLOAD_PROGRESS:case g.MAIL_CHIMP_UPLOAD_PROGRESS:p=fa.progress;break;case g.FILE_IMPORT_CREATE_AUDIENCE_COMPLETE:t[fa.audienceID]={id:fa.audienceID,name:fa.audienceName};break;case g.FILE_IMPORT_UPLOAD_COMPLETE:q=j.FILE_IMPORT_UPLOAD_COMPLETE;s=fa.numberOfRecords;break;case g.COPY_PASTE_START_UPLOAD:q=j.COPY_PASTE_UPLOAD;break;case g.COPY_PASTE_CREATE_AUDIENCE_COMPLETE:t[fa.audienceID]={id:fa.audienceID,name:fa.audienceName};break;case g.COPY_PASTE_UPLOAD_COMPLETE:q=j.COPY_PASTE_UPLOAD_COMPLETE;s=fa.numberOfRecords;break;case g.MAIL_CHIMP_FETCH_COMPLETE:q=j.MAIL_CHIMP_FETCH_COMPLETE;y=fa.totalPage;z=fa.currentPage;w=fa.contactsLists;w.forEach(function(ha){x[ha.list_id]=ha;});break;case g.MAIL_CHIMP_START_UPLOAD:q=j.MAIL_CHIMP_UPLOAD;break;case g.MAIL_CHIMP_UPLOAD_COMPLETE:q=j.MAIL_CHIMP_UPLOAD_COMPLETE;t=fa.audiences;break;case g.FILE_IMPORT_ERROR:case g.COPY_PASTE_ERROR:ca(fa);break;case g.UPDATE_NAME_DESCRIPTION_COMPLETE:Object.keys(fa.audiences).forEach(function(ha){t[ha]=fa.audiences[ha];});break;default:ga=false;break;}if(ga)da.inform('change');})});e.exports=da;},null);
__d("ads-destinationType",["AdsDestinationTypes","fbt"],function(a,b,c,d,e,f,g,h){var i={};i[g.EXTERNAL_WEBPAGE]="URL";i[g.PAGE]="Page";i[g.APP]="Application";i[g.EVENT]="Event";i[g.GROUP]="Group";i[g.REVIEW]="Review";i[g.PLACE]="Place";i[g.DOMAIN]="Domain";i[g.SEARCH]="Search";i[g.ENTER_URL]="Search by URL";i[g.SEARCH_BY_ID]="Search by Destination ID";var j={};j[g.EXTERNAL_WEBPAGE]="URL";j[g.PAGE]="Pages";j[g.APP]="Applications";j[g.EVENT]="Events";j[g.GROUP]="Groups";j[g.REVIEW]="Reviews";j[g.PLACE]="Places";j[g.DOMAIN]="Domains";j[g.PAGE_AND_PLACE]="Pages and Places";j[g.SEARCH]="Search";j[g.ENTER_URL]="Search by URL";j[g.SEARCH_BY_ID]="Search by Destination ID";e.exports={DEST_TYPE_TO_NAME:i,DEST_TYPE_TO_NAME_PLURAL:j};},null);
__d("AdsMobileRemarketingAppNameSearchSource",["AbstractSearchSource","AdsDestinationTypes","AdsUtils","SearchableEntry","TokenizeUtil","ads-destinationType"],function(a,b,c,d,e,f,g,h,i,j,k){var l=b('ads-destinationType').DEST_TYPE_TO_NAME,m,n,o;for(var p in g)if(g.hasOwnProperty(p))r[p]=g[p];var q=g===null?null:g.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=g;function r(s){"use strict";if(m)return m;n=s;this.$AdsMobileRemarketingAppNameSearchSource0=n.fetch.accountInfo.constantParameters.accountId;}r.prototype.bootstrap=function(s){"use strict";if(o){s&&s();return;}n.fetch.adConnectedApp.one(function(t){o=t||[];s&&s();},{act:this.$AdsMobileRemarketingAppNameSearchSource0});};r.prototype.fetchApps=function(s){"use strict";if(o)return;n.fetch.adConnectedApp.one(function(t){o=t||[];s&&s();},{act:this.$AdsMobileRemarketingAppNameSearchSource0});};r.prototype.searchImpl=function(s,t){"use strict";if(!o){this.fetchApps(this.$AdsMobileRemarketingAppNameSearchSource1.bind(this,s,t));}else this.$AdsMobileRemarketingAppNameSearchSource1(s,t);};r.prototype.$AdsMobileRemarketingAppNameSearchSource1=function(s,t){"use strict";var u=o.filter(function(v){return !s||k.isQueryMatch(s,v.name)||s==v.id;}).map(function(v){var w=new j({uniqueID:v.id,title:v.name,photo:v.picture,subtitle:l[h.APP],auxiliaryData:{}});return w;});t(u,s);};r.getInstance=function(s){"use strict";if(!m||!i.isEqualWeak(s,n))m=new r(s);return m;};e.exports=r;},null);
__d("AudienceManagerErrorView.react",["React","XUINotice.react","cx"],function(a,b,c,d,e,f,g,h,i){var j=g.PropTypes,k=g.createClass({displayName:"AudienceManagerErrorView",propTypes:{shown:j.bool,message:j.string},render:function(){return (g.createElement("div",{className:((!this.props.shown?"hidden_elem":''))},g.createElement(h,{use:"warn"},this.props.message)));}});e.exports=k;},null);
__d("MobileAppRemarketingAppTypeaheadPresenter.react",["cx","React","ReactPropTypes"],function(a,b,c,d,e,f,g,h,i){var j=h.createClass({displayName:"Presenter",propTypes:{entries:i.array.isRequired,onSelect:i.func.isRequired},render:function(){if(this.props.entries&&this.props.entries.length){return (h.createElement("ul",{className:"_5e6y"},this.props.entries.map(function(k){return (h.createElement("li",{className:"_5e6z",key:'appTypeahead_'+k.getUniqueID(),onMouseEnter:this.props.onHighlight.bind(null,k),onMouseDown:this.props.onSelect.bind(null,k)},h.createElement("img",{className:"_5eye",src:k.getPhoto()}),h.createElement("div",{className:"_5eyf"},h.createElement("div",{className:"_5e6-"},k.getTitle()),h.createElement("div",{className:"_5oid"},k.getSubtitle()))));}.bind(this))));}else return (h.createElement("ul",null));}});e.exports={maxEntries:10,ViewRenderer:j,useLayer:true};},null);
__d("MobileAppRemarketingAppTypeahead.react",["cx","React","ReactPropTypes","AbstractTypeahead.react","AdsMobileRemarketingAppNameSearchSource","MobileAppRemarketingAppTypeaheadPresenter.react","SearchableEntry","XUICloseButton.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=h.createClass({displayName:"MobileAppRemarketingAppTypeahead",propTypes:{searchSource:i.object,selectedApp:i.instanceOf(m),placeholder:i.string,dao:i.object},getInitialState:function(){return {queryString:''};},componentDidMount:function(){if(this.props.dao)k.getInstance(this.props.dao).bootstrap();},render:function(){var p=this.props.selectedApp,q=this.props.searchSource;if(this.props.dao)q=k.getInstance(this.props.dao);return (h.createElement("div",{className:"_5gfl"},h.createElement("div",{className:(("_5e6_")+(!p?' '+"hidden_elem":''))},h.createElement("img",{className:"_5eyh",src:p&&p.getPhoto()}),h.createElement("div",{className:"_5eyi"},h.createElement("div",{className:"fwb"},p&&p.getTitle()),h.createElement("div",null,p&&p.getSubtitle())),h.createElement(n,{size:"small",className:"_5e70",onClick:this.onAppClose})),h.createElement(j,{className:((!!p?"hidden_elem":'')),placeholder:this.props.placeholder,presenter:l,searchSource:q,queryString:this.state.queryString,onChange:this._onInputChange,onSelectAttempt:this._onSelectAppAttempt,showEntriesOnFocus:true})));},_onInputChange:function(event){this.setState({queryString:event.target.value});},_onSelectAppAttempt:function(p){this.props.appSelected(p);},onAppClose:function(){this.setState({queryString:''});this.props.appSelected(null);}});e.exports=o;},null);
__d("AdsMobileRemarketingEventNameSearchSource",["AbstractSearchSource","SearchableEntry","TokenizeUtil"],function(a,b,c,d,e,f,g,h,i){for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(m,n){"use strict";this.$AdsMobileRemarketingEventNameSearchSource0=m;this.$AdsMobileRemarketingEventNameSearchSource1=n||(function(event){return event.display_name;});}l.prototype.bootstrap=function(m){"use strict";m&&m();};l.prototype.searchImpl=function(m,n){"use strict";var o=this.$AdsMobileRemarketingEventNameSearchSource0.filter(function(event){return !m||i.isQueryMatch(m,event.event_name);}).map(function(event){var p=event.parameters||[],q=new h({uniqueID:event.event_name,title:event.display_name,auxiliaryData:{key:this.$AdsMobileRemarketingEventNameSearchSource1(event),segments:p.map(function(r){var s={};if(r.known_parameter_values)r.known_parameter_values.forEach(function(t){s[t.parameter_value]=t.display_name;});return {uniqueID:r.parameter_name,title:r.display_name,knownValues:s};})}});return q;}.bind(this));o.sort(function(p,q){p=p.getAuxiliaryData().key;q=q.getAuxiliaryData().key;if(i.isExactMatch(p,m)){return -1;}else if(i.isExactMatch(q,m))return 1;return p.toUpperCase()>q.toUpperCase()?1:-1;});n(o,m);};e.exports=l;},null);
__d("MobileAppRemarketingRuleTypeaheadPresenter.react",["cx","React","ReactPropTypes"],function(a,b,c,d,e,f,g,h,i){var j=h.createClass({displayName:"Presenter",propTypes:{entries:i.array.isRequired,onSelect:i.func.isRequired},render:function(){if(this.props.entries&&this.props.entries.length){return (h.createElement("ul",{className:"_5h93"},this.props.entries.map(function(k){return (h.createElement("li",{key:'ruleTypeahead_'+k.getUniqueID(),onMouseEnter:this.props.onHighlight.bind(null,k),onMouseDown:this.props.onSelect.bind(null,k),className:"_5h94"},h.createElement("div",null,k.getTitle())));}.bind(this))));}else return (h.createElement("ul",null));}});e.exports={maxEntries:10,ViewRenderer:j,useLayer:true};},null);
__d("AudienceManagerAppRemarketingOperatorConfig",[],function(a,b,c,d,e,f){var g=[{value:'eq',text:'is equal to'},{value:'neq',text:'is not equal to'},{value:'lt',text:'is less than'},{value:'gt',text:'is greater than'},{value:'gte',text:'is greater than or equals'},{value:'lte',text:'is less than or equals'},{value:'is_any',text:'is any of'},{value:'is_not_any',text:'is not any of'},{value:'contains',text:'contains substring'},{value:'not_contains',text:'does not contain substring'}];f.operators=g;f.labels={eq:'=',neq:'!=',lt:'<',gt:'>',gte:'>=',lte:'<=',is_any:'any',is_not_any:'not any',contains:'cont.',not_contains:'not cont.'};f.isNumeric={lt:true,gt:true,gte:true,lte:true};f.isArray={is_any:true,is_not_any:true};f.getLabelForOperator=function(h){for(var i=0;i<g.length;++i)if(g[i].value===h)return g[i].text;};f.defaultValue='eq';},null);
__d("MobileAppRemarketingParameterView.react",["AbstractTypeahead.react","LeftRight.react","LoadingIndicator.react","MobileAppRemarketingRuleTypeaheadPresenter.react","AudienceManagerAppRemarketingOperatorConfig","React","SearchableEntry","Token.react","TokenizeUtil","XUICloseButton.react","XUISelector.react","cx","fbt","isNumberLike"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';var u=q.Option,v=10000,w=l.createClass({displayName:"MobileAppRemarketingParameterView",propTypes:{index:l.PropTypes.number.isRequired,knownValues:l.PropTypes.object,title:l.PropTypes.string.isRequired,onValuesChanged:l.PropTypes.func.isRequired,onOperatorChanged:l.PropTypes.func.isRequired,onParameterRemoved:l.PropTypes.func.isRequired,operator:l.PropTypes.string.isRequired,possibleValues:l.PropTypes.array,possibleValuesLoading:l.PropTypes.bool,values:l.PropTypes.array},getInitialState:function(){var x=this.props.possibleValues||[];return {searchSource:this._constructSearchSource(x),queryString:'',values:[],loadingTimeout:false};},componentWillMount:function(){setTimeout(function(){if(this.props.possibleValuesLoading)this.setState({loadingTimeout:true});}.bind(this),v);},componentWillReceiveProps:function(x){var y=x.possibleValues||[],z=this._constructSearchSource(y);this.setState({searchSource:z});},render:function(){var x="Add a value";if(k.isNumeric[this.props.operator])x="Add a numeric value";if(k.isArray[this.props.operator])x="Add values";var y;if(this.props.possibleValuesLoading&&!this.state.loadingTimeout){y=l.createElement(i,{size:"small",color:"white",className:"_4c97"});}else y=l.createElement(g,{presenter:j,onChange:this._onInputChange,onBlur:this._onBlur,onSelectAttempt:this._onSelectParameterAttempt,placeholder:x,searchSource:this.state.searchSource,queryString:this.state.queryString,showEntriesOnFocus:true});return (l.createElement("div",{className:"_5gop"},l.createElement(h,null,l.createElement("div",{className:"_5goq"},l.createElement("div",{className:"_5svm"},l.createElement("div",{className:"_5h95 _5svn"},this.props.title),this._renderOperatorSelector(this.props.operator),l.createElement("div",{className:"_5svo"})),l.createElement("div",{className:(("_5hms")+(' '+"_5svp")+(!this.props.values.length?' '+"hidden_elem":''))},this._renderTokens()),l.createElement("div",{className:(("_5gos")+(!this._shouldShowParamInput()?' '+"hidden_elem":''))},y)),l.createElement(p,{size:"small",onClick:this._onParameterRemoved,className:"_5got"}))));},_addToken:function(x){if(k.isNumeric[this.props.operator]&&!t(x)&&!!x)return;if(x){this.setState({queryString:''});if(this.props.values.indexOf(x)>=0)return;this.props.onValuesChanged(this.props.index,this.props.values.concat([x]));}},_constructSearchSource:function(x){return {bootstrap:function(y){y&&y();},exactMatch:function(y){for(var z=0;z<x.length;z++){var aa=x[z];if(aa.title.toUpperCase()===y.toUpperCase())return new m({uniqueID:aa.uniqueID,title:aa.title});}return null;},search:function(y,z){x.sort(function(ba,ca){return ba.title.toUpperCase()>ca.title.toUpperCase()?1:-1;});var aa=x.filter(function(ba){return !y||o.isQueryMatch(y,ba.title);}).map(function(ba){return new m({uniqueID:ba.uniqueID,title:ba.title});});z(aa,y);}};},_onBlur:function(event){var x=this.state.searchSource,y=x.exactMatch(this.state.queryString);if(y){this._addToken(y.getUniqueID());}else this._addToken(this.state.queryString);},_onInputChange:function(event){this.setState({queryString:event.target.value});},_onParameterRemoved:function(){this.props.onParameterRemoved(this.props.index);},_onSelectParameterAttempt:function(event){this._addToken(event.getUniqueID());},_removeToken:function(x){var y=this.props.values.filter(function(z){return z!==x;});this.props.onValuesChanged(this.props.index,y);},_renderOperatorSelector:function(x){return (l.createElement(q,{className:"_5svn _5svq",name:"filter_selector",size:"xlarge",onChange:function(event){this.props.onOperatorChanged(this.props.index,event.value);}.bind(this),value:x},k.operators.map(function(y){return (l.createElement(u,{value:y.value},y.text));})));},_renderTokens:function(){var x=this.props.knownValues||{};return this.props.values.map(function(y){return (l.createElement(n,{label:x[y]||y,removable:true,onRemove:this._removeToken.bind(this,y)}));},this);},_shouldShowParamInput:function(){return k.isArray[this.props.operator]||!this.props.values.length;}});e.exports=w;},null);
__d("MobileAppRemarketingEventView.react",["cx","fbt","AbstractTypeahead.react","BonsaiApiBreakdown","BonsaiApiDataAdapter","BonsaiSectionDataLoaderMixin","MobileAppRemarketingRuleTypeaheadPresenter.react","AudienceManagerAppRemarketingOperatorConfig","MobileAppRemarketingParameterView.react","React","SearchableEntry","TokenizeUtil","XUICloseButton.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=p.createClass({displayName:"MobileAppRemarketingEventView",mixins:[l],propTypes:{eventDisplayName:p.PropTypes.string.isRequired,event:p.PropTypes.string.isRequired,parameters:p.PropTypes.array.isRequired,onEventClosed:p.PropTypes.func,enableEventParameters:p.PropTypes.bool},getDefaultProps:function(){return {enableEventParameters:true};},getInitialState:function(){var u=this.props.parameters||[];return {selectedParams:[],searchSource:this._constructSearchSource(u),queryString:''};},componentWillReceiveProps:function(u){var v=u.parameters||[],w=this._constructSearchSource(v);this.setState({searchSource:w});},render:function(){return (p.createElement("div",{className:"_5gom"},p.createElement("div",{className:(("_5gon")+(this.props.enableEventParameters?' '+"_1ldq":'')+(' '+"pam"))},p.createElement("div",null,this.props.eventDisplayName),p.createElement(s,{size:"small",className:"_5goo",onClick:this._eventClosed})),this._renderEventParameters()));},_getBonsaiApiBreakdownName:function(u){return u==='_appVersion'?j.APP_VERSION:u;},_renderEventParameters:function(){if(!this.props.enableEventParameters)return null;var u=this.state,v=this.props,w="Optionally add a parameter",x="Optionally add another parameter";return (p.createElement("span",null,p.createElement("div",{style:{display:u.selectedParams.length?'block':'none'}},u.selectedParams.map(this._renderParameterView)),p.createElement("div",{className:((u.selectedParams.length===v.parameters.length?"hidden_elem":'')+(' '+"mvm"))},p.createElement(i,{className:"mlm mtm",placeholder:u.selectedParams.length?x:w,presenter:m,onSelectAttempt:this._onSelectParameterAttempt,searchSource:this.state.searchSource,queryString:u.queryString,onChange:this._onInputChange,showEntriesOnFocus:true}))));},_onSelectParameterAttempt:function(u){if(u.getUniqueID()!=='_valueToSum'){var v=this._getBonsaiApiBreakdownName(u.getUniqueID()),w={event_name:this.props.event,aggregateBy:'COUNT',breakdowns:[v]};this.addMetric([v,w.event_name],'app_event',w);this.fetchMetrics(true);}var x=this.state.selectedParams;x.push({id:u.getUniqueID(),title:u.getTitle(),operator:n.defaultValue,knownValues:u.getAuxiliaryData().knownValues,values:[]});this.setState({selectedParams:x,queryString:''});},_constructSearchSource:function(u){return {bootstrap:function(v){v&&v();},search:function(v,w){u.sort(function(y,z){return y.title.toUpperCase()>z.title.toUpperCase()?1:-1;});var x=u.filter(function(y){return !v||r.isQueryMatch(v,y.title);}).map(function(y){return new q({uniqueID:y.uniqueID,title:y.title,auxiliaryData:{knownValues:y.knownValues}});});w(x,v);}};},_onInputChange:function(event){this.setState({queryString:event.target.value});},_renderParameterView:function(u,v){var w=this._getBonsaiApiBreakdownName(u.id),x=u.operator,y=u.values;if(!n.isArray[x]&&y.length)y.splice(1,y.length-1);var z=false,aa=[],ba=u.knownValues||{};if(u.id!=='_valueToSum'){var ca=this.getRawData([w,this.props.event]);if(ca instanceof k){var da=ca.groupBy(w);aa=Object.keys(da).map(function(ea){return {title:ba[ea]||ea,uniqueID:ea};});}else z=true;}return (p.createElement(o,{index:v,key:'eventParam_'+u.id+v,knownValues:ba,onValuesChanged:this._parameterValuesChanged,onOperatorChanged:this._parameterOperatorChanged,onParameterRemoved:this._paramRemoved,operator:x,possibleValues:aa,possibleValuesLoading:z,title:u.title,values:y}));},_parameterValuesChanged:function(u,v){var w=this.state.selectedParams;w.forEach(function(x,y){if(y===u)x.values=v;});this.setState({selectedParams:w});},_parameterOperatorChanged:function(u,v){var w=this.state.selectedParams;w.forEach(function(x,y){if(y===u){x.operator=v;x.values=[];}});this.setState({selectedParams:w});},_paramRemoved:function(u){var v=this.state.selectedParams.filter(function(w,x){return u!==x;});this.setState({selectedParams:v,queryString:''});},_eventClosed:function(){this.setState(this.getInitialState());this.props.onEventClosed();},getSelectedParams:function(){return this.state.selectedParams;}});e.exports=t;},null);
__d("MobileAppRemarketingRuleSelector.react",["AbstractTypeahead.react","AdInterfacesUiLogger","AdsMobileRemarketingEventNameSearchSource","AudienceManagerLoggingEvents","InfoTable.react","InfoTableRow.react","InfoTableSection.react","MobileAppRemarketingRuleTypeaheadPresenter.react","MobileAppRemarketingEventView.react","React","ReactPropTypes","XUITextInput.react","cx","fbt","isNumberLike"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=p.createClass({displayName:"MobileAppRemarketingRuleSelector",propTypes:{events:q.array,exclusive:q.bool,label:q.string,shouldValidateUI:q.bool.isRequired},getInitialState:function(){return {queryString:'',selectedEvent:null,duration:'7'};},render:function(){var w="Action Taken",x="Action Not Taken",y=this.props.exclusive?x:w,z="Add an event",aa="In The Last",ba=this.state,ca=ba.selectedEvent?ba.selectedEvent.getTitle():'',da=ba.selectedEvent?ba.selectedEvent.getAuxiliaryData().segments:[];return (p.createElement("div",{className:"_5rkp"},p.createElement(k,{className:"_5gfn"},p.createElement(m,null,p.createElement(l,{type:"data",label:y},p.createElement("div",null,p.createElement("div",{className:((!!ba.selectedEvent?"hidden_elem":'')+(this.props.shouldValidateUI?' '+"_5vvv":''))},p.createElement(g,{placeholder:z,presenter:n,onSelectAttempt:this._onSelectEventAttempt,searchSource:new i(this.props.events),queryString:this.state.queryString,onChange:this._onInputChange,showEntriesOnFocus:true})),p.createElement("div",{className:((!ba.selectedEvent?"hidden_elem":''))},p.createElement(o,{ref:"eventView",className:"hidden_elem",onEventClosed:this._closeEvent,eventName:ca,parameters:da})))),p.createElement(l,{label:aa,type:"data"},p.createElement("div",null,p.createElement(r,{value:this.state.duration,onChange:this._durationChanged,className:"_1xio"}),p.createElement("span",{className:"_5se8"},"days")))))));},_onSelectEventAttempt:function(w){h.log(this.props.exclusive?j.AM_MACA_EDITOR_EXCLUSIVE_EVENT_SELECTED:j.AM_MACA_EDITOR_INCLUSIVE_EVENT_SELECTED);this.setState({selectedEvent:w});},_onInputChange:function(event){this.setState({queryString:event.target.value});},_closeEvent:function(){this.setState({selectedEvent:null,queryString:''});},_durationChanged:function(event){var w=event.target.value;if(!w||u(w)){if(w&&w.length>3)w=w.substring(0,3);this.setState({duration:w});}},getRule:function(){var w=this.state;return {retention_days:w.duration,event:w.selectedEvent?w.selectedEvent.getUniqueID():'',params:this.refs.eventView.getSelectedParams()};}});e.exports=v;},null);
__d("BonsaiPercentileStrings",["fbt"],function(a,b,c,d,e,f,g){var h={0:"0th percentile",1:"1st percentile",2:"2nd percentile",3:"3rd percentile",4:"4th percentile",5:"5th percentile",6:"6th percentile",7:"7th percentile",8:"8th percentile",9:"9th percentile",10:"10th percentile",11:"11th percentile",12:"12th percentile",13:"13th percentile",14:"14th percentile",15:"15th percentile",16:"16th percentile",17:"17th percentile",18:"18th percentile",19:"19th percentile",20:"20th percentile",21:"21st percentile",22:"22nd percentile",23:"23rd percentile",24:"24th percentile",25:"25th percentile",26:"26th percentile",27:"27th percentile",28:"28th percentile",29:"29th percentile",30:"30th percentile",31:"31st percentile",32:"32nd percentile",33:"33rd percentile",34:"34th percentile",35:"35th percentile",36:"36th percentile",37:"37th percentile",38:"38th percentile",39:"39th percentile",40:"40th percentile",41:"41st percentile",42:"42nd percentile",43:"43rd percentile",44:"44th percentile",45:"45th percentile",46:"46th percentile",47:"47th percentile",48:"48th percentile",49:"49th percentile",50:"50th percentile",51:"51st percentile",52:"52nd percentile",53:"53rd percentile",54:"54th percentile",55:"55th percentile",56:"56th percentile",57:"57th percentile",58:"58th percentile",59:"59th percentile",60:"60th percentile",61:"61st percentile",62:"62nd percentile",63:"63rd percentile",64:"64th percentile",65:"65th percentile",66:"66th percentile",67:"67th percentile",68:"68th percentile",69:"69th percentile",70:"70th percentile",71:"71st percentile",72:"72nd percentile",73:"73rd percentile",74:"74th percentile",75:"75th percentile",76:"76th percentile",77:"77th percentile",78:"78th percentile",79:"79th percentile",80:"80th percentile",81:"81st percentile",82:"82nd percentile",83:"83rd percentile",84:"84th percentile",85:"85th percentile",86:"86th percentile",87:"87th percentile",88:"88th percentile",89:"89th percentile",90:"90th percentile",91:"91st percentile",92:"92nd percentile",93:"93rd percentile",94:"94th percentile",95:"95th percentile",96:"96th percentile",97:"97th percentile",98:"98th percentile",99:"99th percentile",100:"100th percentile"};e.exports=h;},null);
__d("BonsaiDraggableMarker",["Image.react","React","ReactART","SpectrumDataVisualization","SpectrumUtilities","cx","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=i.Group,p=i.Path,q=i.Shape,r=i.Surface,s=8,t=3,u={NOT_DRAGGING:1,DRAGGING_GRABBED_MARKER:2},v=12,w=11,x=3,y=h.createClass({displayName:"BonsaiDraggableMarker",mixins:[j.Mixin],propTypes:{onPositionChanged:h.PropTypes.func,startX:h.PropTypes.number.isRequired},getInitialState:function(){return {dragging:u.NOT_DRAGGING,highlight:false,x:this.props.startX};},handleEvent:function(z){var aa=this.getX(),ba=this.props.scaleX.invert(z.x),ca=this.newX(ba);if(z.type==='mousedown'){if(this.inBounds(aa,ba)){this.setState({dragging:u.DRAGGING_GRABBED_MARKER,highlight:true,x:ca});this.onPositionChanged(ca);}}else if(z.type==='click'){var da={dragging:u.NOT_DRAGGING,highlight:false};if(this.state.dragging==u.DRAGGING_GRABBED_MARKER){da.x=ca;this.onPositionChanged(ca);}this.setState(da);}else if(z.type==='mousemove')if(this.state.dragging==u.DRAGGING_GRABBED_MARKER){this.setState({x:ca});this.onPositionChanged(ca);}else if(this.inBounds(aa,ba)){this.setState({highlight:true});}else this.setState({highlight:false});},inBounds:function(z,aa){var ba=Math.max(this.props.scaleX.invert(s),1);return z+ba>aa&&z-ba<aa;},getTop:function(){var z=k.getOuterRange(this.props.scaleY);return z[1];},getX:function(){return this.state.x;},newX:function(z){var aa=k.getOuterRange(this.props.scaleX);aa=aa.map(function(ba){return this.props.scaleX.invert(ba);}.bind(this));return Math.max(aa[0],Math.min(z,aa[1]));},onPositionChanged:function(z){this.props.onPositionChanged&&this.props.onPositionChanged(z);},render:function(){var z=this.props.theme.markers,aa=k.getOuterRange(this.props.scaleY),ba=this.props.scaleX(this.state.x),ca=this.getTop(),da=aa[0],ea="_5mn1",fa,ga,ha;if(this.state.highlight){ga=z.highlightColor;ha=z.highlightWidth;fa=p().moveTo(ba,da).lineTo(ba,ca+x);ea=n(ea,"_5mn2");}else{ga=z.lineColor;ha=z.lineWidth;var ia=z.dashSize||t;fa=p().moveTo(ba,da);var ja=(da-ca-v-x)/(ia+2.5);for(var ka=0;ka<ja;ka++)fa.line(0,-ia).move(0,-ia);}var la=(h.createElement(o,null,h.createElement(q,{d:fa,stroke:ga,strokeWidth:ha}))),ma={left:ba-w/2,top:ca-v};return (h.createElement("div",{className:ea},h.createElement(r,{height:this.props.height,width:this.props.width},la),h.createElement(g,{className:"_13q4",style:ma,src:m('images/insights/topslider.png')})));}});e.exports=y;},null);
__d("BonsaiPercentileChart",["BonsaiColors","BonsaiContextualHelp","BonsaiPercentileStrings","BonsaiStyle","SpectrumChart","SpectrumCurrencyScale","BonsaiDraggableMarker","d3/scale/linear","SpectrumLines","React","SpectrumMarkers","SpectrumStackedAreas","SpectrumXAxis","SpectrumYAxis","SpectrumTooltipData","SpectrumTooltipDescription","SpectrumTooltipMenu","cx","fbt","mergeDeep","throttle","mergeHelpers"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){var ba=b('mergeHelpers').ArrayStrategies,ca=735,da=p.createClass({displayName:"BonsaiPercentileChart",propTypes:{data:p.PropTypes.array.isRequired,currency:p.PropTypes.string,event:p.PropTypes.object.isRequired,height:p.PropTypes.number,helptext:p.PropTypes.string,hintPercentilePosition:p.PropTypes.number.isRequired,interval:p.PropTypes.number,onHintPercentileChange:p.PropTypes.func.isRequired,theme:p.PropTypes.object,totalUsers:p.PropTypes.number.isRequired,width:p.PropTypes.number,measurement:p.PropTypes.oneOf(['count','value','spend'])},getInitialState:function(){return {hintPercentilePosition:this.props.hintPercentilePosition};},getPercentileChart:function(){var ea=n();if(this.props.currency)ea=l(this.props.currency);var fa=n().range([0,99]).domain([0,99]).clamp(true);fa.tooltipFormat=function(){return function(ka){return 'p'+ka.toFixed(0);};};fa.secondaryTicks=function(ka){return [0];};fa.tickFormat=function(){var ka=function(la){return 'p'+la;};ka.primary=function(la){return 'p'+la;};ka.secondary=function(){return "Percentile of Users";};return ka;};var ga=z(j.CHART_THEME,this.props.theme,ba.Clobber);ga.areas.hoveBarStrokeWidth=3;ga.lines.colors=[g.GRAY30];ga.lines.markers=false;ga.lines.widths=[1];ga.gutter={right:5};ga.markers={lineWidth:2,dashSize:3};var ha=[],ia=[];for(var ja=99;ja>=0;ja--)if(ja>this.props.hintPercentilePosition){ha[ja]=this.props.data[ja];ia[ja]=null;}else if(ja==this.props.hintPercentilePosition){ha[ja]=ia[ja]=this.props.data[ja];}else{ha[ja]=null;ia[ja]=this.props.data[ja];}return (p.createElement(k,p.__spread({},this.props,{height:this.props.height||j.CHART_HEIGHT,width:this.props.width||ca,domain:[0,99],scaleX:fa,scaleY:ea,theme:ga}),p.createElement(o,{data:[ia]}),p.createElement(r,{data:[ha]}),p.createElement(s,{secondaryTicks:true,ticks:20}),p.createElement(t,null),p.createElement(w,{customFormat:this._formatTooltip}),p.createElement(q,null,p.createElement(m,{onPositionChanged:aa(this.onHintPosChanged,100,this),startX:this.props.hintPercentilePosition}))));},_formatTooltip:function(ea){var fa;switch(this.props.measurement){case 'count':fa="Average Number of Events";break;case 'value':fa="Average Value of Events";break;case 'spend':fa="Average Money Spent";break;}return (p.createElement("div",null,p.createElement(u,null,fa),p.createElement(u,null,ea.yValueString),p.createElement(v,null,i[ea.xValue])));},onHintPosChanged:function(ea){ea=parseInt(ea.toFixed(0),10);this.props.onHintPercentileChange(ea);},render:function(){return (p.createElement("div",null,p.createElement("div",{className:"_5r8_ ptm"},this.getPercentileChart()),p.createElement("div",{className:"_5x4g"},this.getChartHelpText())));},getChartHelpText:function(){if(this.props.helptext){return p.createElement(h,{helpKey:this.props.helptext});}else return p.createElement("noscript",null);}});e.exports=da;},null);
__d("BonsaiUtils",["BonsaiApiDataAdapter","BonsaiApiPromise","InsightsContext","BonsaiSections","InsightsNumUtils","URI","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={getBaseInsightsURI:function(){return new l(l.getNextURI().getPath());},getSectionInsightsURI:function(o,p){var q=this.getBaseInsightsURI(),r={section:o};if(o===j.CUSTOM_EVENTS){r.event_name=p;}else if(o===j.WATCH)r.competitor_id=p;q.addQueryData(r);return q;},getDevCenterURI:function(){var o=new l('/apps/'+i.getObjID());o.setSubdomain('developers');return o;},getSumData:function(o,p){if(p instanceof g&&o instanceof g){var q=p.divideBy(o);if(p.getTotal()!==0){var r=q.getPreEpochTotal(),s=q.getPostEpochTotal();if((Math.abs(1-r)>.01)||(s>0))return p;}}else if(o instanceof h||p instanceof h)return p;return null;},calculatePercentageChange:function(o,p){var q=o-p,r=0;if(q&&!p){r=100;}else{var s=p||1;r=Math.round(q/s*1000)/10;}var t=null,u=null;if(r<0){t="_vhx";u=this.formatPercentageNumber(-1*r)+'%';}else if(r>0){t="_vhy";u=this.formatPercentageNumber(r)+'%';}else{t="_vh-";u='0%';}return {className:t,currentValue:o,previousValue:p,string:u,value:r};},formatPercentageNumber:function(o){if(o>=100){return k.prettyShortInt(o);}else return k.prettyFloat(o);}};e.exports=n;},null);
__d("CustomEventSectionDataLoaderMixin",["BonsaiApiBreakdown","d3/time/day","InsightsUtils","copyProperties","mergeArrays","shallowEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=-3,n=-1,o='app_retention_datapoints',p={},q={addCustomEventMetric:function(r,s,t){this._addCustomEventMetricInternal(r,s,t,true);},addUnfilteredCustomEventMetric:function(r,s,t){this._addCustomEventMetricInternal(r,s,t,false);},_addCustomEventMetricInternal:function(r,s,t,u){var v={applyFilters:u,key:s,params:t};this._getStoredMetrics(r).push(v);this._enqueueCustomEventMetric(r,v);},_enqueueCustomEventMetric:function(r,s){var t=this._getKey(s.key,r.event.name),u=j({event_name:r.event.name,since:i.utcTimeToPacificDay(r.visibleDateRange.since),until:i.utcTimeToPacificDay(r.visibleDateRange.until)},s.params);if(s.applyFilters){var v=u.breakdowns||[];u.breakdowns=k(v.slice(0),Object.keys(r.filters).slice(0));}if(Array.isArray(u.breakdowns)&&u.breakdowns.indexOf(g.PERCENTILE)!=-1)u.since=h.utc.offset(r.visibleDateRange.until,m);if(u.custom_metric){if(u.custom_metric===o)u.until=h.utc.offset(r.visibleDateRange.until,n);var w=u.custom_metric;delete u.custom_metric;this.addMetric(t,w,u,null,null,'');}else this.addMetric(t,'app_event',u);},_refetchStoredMetrics:function(r){this.resetMetrics();this._getStoredMetrics(r).forEach(function(s){this._enqueueCustomEventMetric(r,s);}.bind(this),this);this.fetchMetrics();},componentWillReceiveProps:function(r){var s=r.event&&this.props.event.name!=r.event.name,t=r.visibleDateRange&&(this.props.visibleDateRange.since.getTime()!==r.visibleDateRange.since.getTime()||this.props.visibleDateRange.until.getTime()!==r.visibleDateRange.until.getTime()),u=this.willApplyFilters()&&!l(this.props.filters,r.filters),v=this.shouldAutoRefetch();if(v&&(u||s||t))this._refetchStoredMetrics(r);},getUnfilteredCustomEventData:function(r){r=this._getKey(r,this.props.event.name);return this.getData(r);},getUnfilteredCustomEventDataWithName:function(r,s){r=this._getKey(r,s);return this.getData(r);},getCustomEventData:function(r){var s=this.getUnfilteredCustomEventData(r);if(!s)return null;if(this.props.filters&&Object.keys(this.props.filters).length>0)Object.keys(this.props.filters).forEach(function(t){if(t=='custom_breakdown')return;s=s.filterBy(t,'=',[this.props.filters[t]]);},this);return s;},_getKey:function(r,s){return r.concat(s).concat(this.props.cardKey);},_getStoredMetrics:function(r){if(!p[r.cardKey])p[r.cardKey]=[];return p[r.cardKey];}};e.exports=q;},null);
__d("CustomEventPercentilesLoaderMixinResponse",[],function(a,b,c,d,e,f){function g(){"use strict";}g.prototype.setState=function(h){"use strict";this.$CustomEventPercentilesLoaderMixinResponse0=h;};g.prototype.setPayload=function(h){"use strict";this.$CustomEventPercentilesLoaderMixinResponse1=h;};g.prototype.getState=function(){"use strict";return this.$CustomEventPercentilesLoaderMixinResponse0;};g.prototype.getPayload=function(){"use strict";return this.$CustomEventPercentilesLoaderMixinResponse1;};e.exports=g;},null);
__d("CustomEventPercentilesLoaderMixinResponseState",[],function(a,b,c,d,e,f){var g={LOADING:0,ERROR:1,SUCCESS:2,NO_DATA:3};e.exports=g;},null);
__d("CustomEventPercentilesLoaderMixin",["BonsaiApiBreakdown","BonsaiApiDataAdapter","BonsaiApiError","BonsaiApiPromise","BonsaiSectionDataLoaderMixin","BonsaiUtils","CustomEventSectionDataLoaderMixin","CustomEventPercentilesLoaderMixinResponse","CustomEventPercentilesLoaderMixinResponseState"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p={mixins:[k,m],willApplyFilters:function(){return false;},fetchPercentileMetrics:function(q,r){this.resetMetrics();this._intervals=r;this._addPercentileMetric('COUNT',q,r);this._addPercentileMetric('SUM',q,r);this._addPercentileMetric('USD_SUM',q,r);r.forEach(function(s){this.addUnfilteredCustomEventMetric(q,['USERS','TOTAL',s],{aggregateBy:'USERS',intervals_to_aggregate:s,period:'daily'});}.bind(this),this);this.fetchMetrics();},_addPercentileMetric:function(q,r,s){s.forEach(function(t){var u={aggregateBy:q,breakdowns:[g.PERCENTILE],period:'daily',intervals_to_aggregate:t},v=[q,t];this.addUnfilteredCustomEventMetric(r,v,u);}.bind(this),this);},_makePercentileArray:function(q){var r=q.getLatest().groupBy(g.PERCENTILE),s=[],t=true;for(var u=0;u<100;u++){var v=r[u]?r[u].getTotal():0;if(v)t=false;s.push(v);}if(t){return null;}else return s;},getTotalUsersData:function(q){if(!this._intervals)return null;var r={};this._intervals.forEach(function(s){var t=this.getUnfilteredCustomEventDataWithName(['USERS','TOTAL',s],q),u=new n();if(t instanceof h){u.setState(o.SUCCESS);u.setPayload(t.getLatestTotal());}else if(t instanceof j){u.setState(o.LOADING);}else{u.setState(o.ERROR);if(t instanceof i)u.setPayload(t.getMessage());}r[s]=u;}.bind(this));return r;},getCountPercentileData:function(q){if(!this._intervals)return null;var r={};this._intervals.forEach(function(s){var t=this.getUnfilteredCustomEventDataWithName(['COUNT',s],q),u=new n();if(t instanceof h){var v=this._makePercentileArray(t);if(v){u.setState(o.SUCCESS);u.setPayload(v);}else u.setState(o.NO_DATA);}else if(t instanceof j){u.setState(o.LOADING);}else{u.setState(o.ERROR);if(t instanceof i)u.setPayload(t.getMessage());}r[s]=u;}.bind(this));return r;},getValuePercentileData:function(q){if(!this._intervals)return null;var r={};this._intervals.forEach(function(s){var t=this.getUnfilteredCustomEventDataWithName(['COUNT',s],q),u=this.getUnfilteredCustomEventDataWithName(['USD_SUM',s],q),v=this.getUnfilteredCustomEventDataWithName(['SUM',s],q),w=[t,u,v],x=w.every(function(ca){return ca instanceof h;}),y=w.some(function(ca){return ca instanceof j;}),z=new n();if(x){z.setState(o.SUCCESS);var aa={};if(l.getSumData(t,u)){aa.isUSD=true;aa.data=this._makePercentileArray(u);}else if(l.getSumData(t,v)){aa.isUSD=false;aa.data=this._makePercentileArray(v);}if(aa.data){z.setPayload(aa);}else z.setState(o.NO_DATA);}else if(y){z.setState(o.LOADING);}else{z.setState(o.ERROR);var ba=u instanceof i?u.getMessage():v instanceof i?v.getMessage():t.getMessage();if(ba)z.setPayload(ba);}r[s]=z;}.bind(this));return r;},isAnyDataLoading:function(q){var r=false;Object.keys(q).forEach(function(s){if(q[s].getState()===o.LOADING)r=true;});return r;},shouldAutoRefetch:function(){return true;}};e.exports=p;},null);
__d("XBonsaiAppEventDataControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/insights\/app_event_data\/",{app_id:{type:"Int",required:true},event:{type:"String",required:true}});},null);
__d("MobileAppRemarketingEventPercentileSentence",["InsightsNumUtils","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j){var k=h.createClass({displayName:"MobileAppRemarketingEventPercentileSentence",propTypes:{data:h.PropTypes.array.isRequired,event:h.PropTypes.object.isRequired,hintPercentilePosition:h.PropTypes.number.isRequired,measurement:h.PropTypes.oneOf(['count','value']),totalUsers:h.PropTypes.number.isRequired,showHelpText:h.PropTypes.bool},render:function(){var l=100-this.props.hintPercentilePosition,m=parseInt((((100-this.props.hintPercentilePosition)/100)*this.props.totalUsers).toFixed(0),10);return (h.createElement("div",null,h.createElement("div",null,h.createElement("span",{className:"_5snf"},j._("Top {percentage}",[j.param("percentage",l+'%')])),' ',this.props.showHelpText?"(Drag chart slider to change percentage)":null),h.createElement("div",null,this._renderTotalPeopleSentence(m))));},_renderTotalPeopleSentence:function(l){if(this.props.measurement==='count'){return (j._("{user count} people ({percentage of activity} of activity)",[j.param("user count",g.prettyInt(l)),j.param("percentage of activity",this._getPercentageValueOfPercentile()+'%')]));}else return (j._("{user count} people ({percentage of value} of value)",[j.param("user count",g.prettyInt(l)),j.param("percentage of value",this._getPercentageValueOfPercentile()+'%')]));},_getPercentageValueOfPercentile:function(){var l=0,m=0;for(var n=0;n<100;n++){l+=this.props.data[n];if(n>=this.props.hintPercentilePosition)m+=this.props.data[n];}return ((m/l)*100).toFixed(0);}});e.exports=k;},null);
__d("XUICheckboxList.react",["InputLabel.react","ScrollableArea.react","React","XUICheckboxInput.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m=i.createClass({displayName:"XUICheckboxList",propTypes:{items:i.PropTypes.array.isRequired,height:i.PropTypes.number},renderItem:function(n){return (i.createElement(g,{key:n.value,className:n.className},i.createElement(j,{disabled:n.disabled,value:n.value,checked:n.checked,onChange:this._onItemChange.bind(this,n)}),i.createElement("label",null,n.label)));},render:function(){var n="_5uy8"+' '+(this.props.className||'');return (i.createElement(h,i.__spread({},this.props,{shadow:false,className:l(this.props.className,n)}),this.props.items.map(this.renderItem)));},_onItemChange:function(n,o){if(n.checked){this.props.onRemove&&this.props.onRemove(n);}else this.props.onAdd&&this.props.onAdd(n);}});e.exports=m;},null);
__d("MobileAppRemarketingEventPercentileChart",["AdInterfacesUiLogger","AppEventClientFilter","AsyncRequest","AudienceManagerErrorView.react","AudienceManagerLoggingEvents","BonsaiPercentileChart","BonsaiText","CustomEventPercentilesLoaderMixin","XBonsaiAppEventDataControllerURIBuilder","FBMoreLink.react","InfoTable.react","InfoTableRow.react","InfoTableSection.react","InsightsContext","LoadingIndicator.react","MobileAppRemarketingEventPercentileSentence","React","CustomEventPercentilesLoaderMixinResponseState","WebApiApplication","XUICheckboxList.react","XUIRadioList.react","XUISelector.react","XUITextInput.react","adsGKCheck","areEqual","cx","fbt","invariant","isNumberLike","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja){var ka=aa.Item,la=ba.Option,ma=[75,90],na=75,oa=70,pa="In The Last",qa=['1','7','28'],ra='28',sa='all',ta='count',ua='amount',va='usd_amount',wa={},xa=['fb_mobile_first_app_launch'],ya="Include",za={all:"All Users",count:"Most Active Users",amount:"Highest Value Users"},ab="Filter by platform",bb=w.createClass({displayName:"MobileAppRemarketingEventPercentileChart",mixins:[n],propTypes:{appID:w.PropTypes.number.isRequired,eventName:w.PropTypes.string.isRequired,initialInterval:w.PropTypes.number,initialMeasurement:w.PropTypes.string,initialPercentile:w.PropTypes.number,onMeasurementChange:w.PropTypes.func,width:w.PropTypes.number},getInitialState:function(){var cb=na,db=oa;if(this.props.initialPercentile)if(ma.indexOf(this.props.initialPercentile)!==-1){cb=this.props.initialPercentile;}else{cb='custom';db=this.props.initialPercentile;}var eb=ja(h),fb=[eb.android,eb.ios];if(da('insights_canvas_events'))fb.push(eb.fbcanvas);fb.push(eb.other);var gb={};fb.forEach(function(hb){gb[hb]=true;});return {durationInput:ra,durationSelector:ra,event:null,measurement:this.props.initialMeasurement||sa,percentileRadio:cb,percentileChart:db,showClientFilters:false,selectedClientFilters:gb};},componentWillMount:function(){var cb=y.getAccessToken(),db=y.getClientID();ha(cb&&db);t.setBonsaiApiAccess(cb,db);this._loadData(this.props);},componentWillReceiveProps:function(cb){if(cb.appID!==this.props.appID||cb.eventName!==this.props.eventName||cb.interval!==this.props.interval)this._loadData(cb);},shouldComponentUpdate:function(cb,db){return (cb.appID!==this.props.appID||cb.eventName!==this.props.eventName||cb.interval!==this.props.interval||!ea(db,this.state));},render:function(){if(this._supportsWhaleRules(this.props.eventName)&&(!this.state.event||!this._getAvailableMeasurements()))return this._renderLoadingIndicator();var cb=this.state.measurement!==sa;return (w.createElement("div",null,w.createElement("div",{className:"_5rkp"},w.createElement(q,{className:"_5gfn"},w.createElement(s,null,this._supportsWhaleRules(this.props.eventName)?this._renderMeasurementSelector():null,w.createElement(r,{className:((cb?"_2ozd":'')),label:pa,type:"data"},cb?this._renderDurationSelector():this._renderDurationText()),this._renderClientFilters(cb)))),cb?this._renderChart():null));},_renderClientFilters:function(cb){if(cb)return null;var db=w.createElement(p,{moreLabel:ab,lessLabel:ab,allowToggle:true,onClick:this._onToggleClientFilters,isInitiallyCollapsed:true});if(!this.state.showClientFilters)return (w.createElement(r,null,db));var eb=Object.keys(this.state.selectedClientFilters).map(function(fb){return {value:fb,label:m.breakdown.client[fb],checked:this.state.selectedClientFilters[fb]};}.bind(this));return (w.createElement(r,null,w.createElement("div",null,w.createElement("div",null,db),w.createElement("div",null,w.createElement(z,{items:eb,onAdd:this._onAddClientFilter,onRemove:this._onRemoveClientFilter})))));},_supportsWhaleRules:function(cb){return xa.indexOf(cb)===-1;},_isLoadingInsightsData:function(){var cb=this.state.event.name,db=this.getTotalUsersData(cb),eb=this.getCountPercentileData(cb),fb=this.getValuePercentileData(cb);if(!db||!eb||!fb||this.isAnyDataLoading(eb)||this.isAnyDataLoading(fb))return true;var gb=this.state.durationSelector,hb=db[gb],ib=eb[gb],jb=fb[gb];if(!hb||!ib||!jb)return true;return false;},_getAvailableMeasurements:function(){var cb=this.state.event.name;if(wa[this.props.appID]&&wa[this.props.appID][cb])return wa[this.props.appID][cb];var db=this.getValuePercentileData(cb);if(!db)return null;var eb=false,fb=false,gb=false;Object.keys(db).forEach(function(ib){var jb=db[ib];if(jb.getState()===x.SUCCESS||jb.getState()===x.NO_DATA)eb=true;if(jb.getState()===x.SUCCESS){fb=true;gb=jb.getPayload().isUSD;}});if(!eb)return null;var hb=[sa,ta];if(gb){hb.push(va);}else hb.push(ua);if(!wa[this.props.appID])wa[this.props.appID]={};wa[this.props.appID][cb]=hb;return hb;},_renderChart:function(){if(this._isLoadingInsightsData())return this._renderLoadingIndicator();var cb=this.state.event.name,db=this.getTotalUsersData(cb),eb=this.state.measurement===ta?this.getCountPercentileData(cb):this.getValuePercentileData(cb),fb=this.state.durationSelector,gb=eb[fb],hb=db[fb];if(gb.getState()===x.ERROR||hb.getState()===x.ERROR){var ib;if(gb.getState()===x.ERROR){ib=gb.getPayload();}else ib=hb.getPayload();return (w.createElement(j,{shown:true,message:ib}));}if(gb.getState()===x.NO_DATA)return this._renderNoDataMessage();var jb=this.state.measurement===ta?gb.getPayload():gb.getPayload().data,kb=hb.getPayload(),lb=this.state.measurement===va?'USD':null,mb;if(this.state.measurement===ta){mb='count';}else if(cb==='fb_mobile_purchase'){mb='spend';}else mb='value';return (w.createElement("div",{className:"_409d"},this.state.measurement!==sa?this._renderPercentileRadio(jb,kb):null,this.state.percentileRadio==='custom'?w.createElement(l,{className:"_5688",currency:lb,data:jb,event:this.state.event,hintPercentilePosition:this.state.percentileChart,interval:parseInt(fb,10),key:'day_'+fb,measurement:mb,onHintPercentileChange:this._onPercentileChartChange,totalUsers:kb,width:this.props.width}):null));},_renderDurationText:function(){return (w.createElement("div",null,w.createElement(ca,{className:"_1xio",onChange:this._onDurationTextChange,value:this.state.durationInput}),w.createElement("span",{className:"_5se8"},"days")));},_renderDurationSelector:function(){var cb=[];qa.forEach(function(db){cb.push(w.createElement(la,{key:db,value:db},db==1?"1 day":ga._("{days} days",[ga.param("days",db)])));});return (w.createElement(ba,{onChange:this._onDurationSelectorChange,value:this.state.durationSelector},cb));},_renderMeasurementSelector:function(){var cb=this._getAvailableMeasurements(),db=[];cb.forEach(function(fb){var gb;if(fb===ua||fb===va){gb=za[ua];}else gb=za[fb];db.push(w.createElement(la,{value:fb,key:fb},gb));});var eb=this.state.measurement;if(eb==='amount'&&cb.indexOf('amount')===-1)eb='usd_amount';return (w.createElement(r,{className:"_2ozd",label:ya,type:"data"},w.createElement(ba,{onChange:this._onMeasurementChange,value:eb},db)));},_renderPercentileRadio:function(cb,db){var eb=this.state.measurement===ta?'count':'value',fb=[];ma.forEach(function(gb){fb.push(w.createElement(ka,{key:'radio'+gb,value:gb},w.createElement(v,{data:cb,event:this.state.event,hintPercentilePosition:gb,measurement:eb,totalUsers:db})));}.bind(this));fb.push(w.createElement(ka,{key:"radiocustom",value:"custom"},this.state.percentileRadio==='custom'?w.createElement("div",null,w.createElement(v,{data:cb,event:this.state.event,hintPercentilePosition:this.state.percentileChart,measurement:eb,totalUsers:db,showHelpText:true})):"Custom percentage"));return (w.createElement(aa,{className:"_409h",onChange:this._onPercentileRadioChange,selectedValue:this._getSelectedPercentileRadioValue()},fb));},_getSelectedPercentileRadioValue:function(){if(this.state.percentileRadio===0||ma.indexOf(this.state.percentileRadio)!==-1)return this.state.percentileRadio;return 'custom';},_renderLoadingIndicator:function(){return (w.createElement("div",{className:"_409i"},w.createElement(u,{size:"large",color:"blue"})));},_renderNoDataMessage:function(){g.log(k.AM_MACA_EDITOR_NO_PERCENTILE_DATA);return (w.createElement("div",null,w.createElement(j,{shown:true,message:"There is no data to show for this event"})));},_onMeasurementChange:function(cb){if(cb.value===ta){g.log(k.AM_MACA_EDITOR_INCLUDE_MOST_ACTIVE);}else if(cb.value===ua||cb.value===va)g.log(k.AM_MACA_EDITOR_INCLUDE_HIGHEST_VALUE);this.setState({measurement:cb.value});if(this.props.onMeasurementChange)this.props.onMeasurementChange(cb.value);},_onDurationSelectorChange:function(cb){this.setState({durationSelector:cb.value});this._loadEventMetrics(this.props);},_onDurationTextChange:function(event){var cb=event.target.value;if(!cb||ia(cb)){if(cb&&cb.length>3)cb=cb.substring(0,3);this.setState({durationInput:cb});}},_onPercentileRadioChange:function(event){if(event.target.value==='custom')g.log(k.AM_MACA_EDITOR_SHOW_PERCENTILE_CHART);var cb=event.target.value!=='custom'?parseInt(event.target.value,10):'custom';this.setState({percentileRadio:cb});},_onPercentileChartChange:function(cb){this.setState({percentileChart:cb});},_loadData:function(cb){if(this.state.event&&this.state.event.name===cb.eventName){this._loadEventMetrics(cb);return;}new i(new o().setInt('app_id',this.props.appID).setString('event',this.props.eventName).getURI()).setHandler(function(db){this.setState({event:db.payload});this._loadEventMetrics(cb);}.bind(this)).send();},_loadEventMetrics:function(cb){t.setObjID(cb.appID);cb.event=this.state.event;this.fetchPercentileMetrics(cb,[this.state.durationSelector]);},_onToggleClientFilters:function(){this.setState({showClientFilters:!this.state.showClientFilters});},_onAddClientFilter:function(cb){var db=Object.assign({},this.state.selectedClientFilters);db[cb.value]=true;this.setState({selectedClientFilters:db});},_onRemoveClientFilter:function(cb){var db=Object.assign({},this.state.selectedClientFilters);db[cb.value]=false;this.setState({selectedClientFilters:db});},getCumulativeRule:function(){var cb=this.state.percentileRadio!=='custom'?this.state.percentileRadio:this.state.percentileChart;if(this.state.measurement===sa||cb===0)return null;g.log(k.AM_MACA_EDITOR_CREATE_WHALE_AUDIENCE_ATTEMPT);return {metric:this.state.measurement,period:this.state.durationSelector+'d',technique:{technique_name:'percentile',lower_bound:cb}};},getDuration:function(){var cb=this.state.measurement===sa?this.state.durationInput:this.state.durationSelector;return parseInt(cb,10);},getClientFilters:function(){var cb=Object.keys(this.state.selectedClientFilters).filter(function(db){return this.state.selectedClientFilters[db];}.bind(this));if(cb.length===Object.keys(this.state.selectedClientFilters).length)return null;return cb;}});e.exports=bb;},null);
__d("MobileAppRemarketingWhaleRuleSelector.react",["AbstractTypeahead.react","AdsMobileRemarketingEventNameSearchSource","InsightsContext","InfoTable.react","InfoTableRow.react","InfoTableSection.react","MobileAppRemarketingEventPercentileChart","MobileAppRemarketingRuleTypeaheadPresenter.react","MobileAppRemarketingEventView.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=541,t="Action Taken",u="Action Not Taken",v=p.createClass({displayName:"MobileAppRemarketingWhaleRuleSelector",propTypes:{appID:p.PropTypes.number,events:p.PropTypes.array,initialEventName:p.PropTypes.string,initialDuration:p.PropTypes.string,initialMeasurement:p.PropTypes.string,initialPercentile:p.PropTypes.string,shouldValidateUI:p.PropTypes.bool.isRequired,type:p.PropTypes.oneOf(['inclusion','exclusion'])},getInitialState:function(){return {enableEventParams:!this.props.initialPercentile,initialDuration:this.props.initialDuration,initialMeasurement:this.props.initialMeasurement,initialPercentile:this.props.initialPercentile,queryString:'',selectedEvent:null};},componentWillMount:function(){if(this.props.initialEventName){var w=new h(this.props.events,function(event){return event.event_name;});w.search(this.props.initialEventName,function(x){if(x&&x.length>0)this.setState({selectedEvent:x[0]});}.bind(this));}},render:function(){var w=this.props.type==='inclusion'?t:u,x="Add an action",y=this.state.selectedEvent?this.state.selectedEvent.getTitle():'',event=this.state.selectedEvent?this.state.selectedEvent.getUniqueID():'',z=this.state.selectedEvent?this.state.selectedEvent.getAuxiliaryData().segments:[];return (p.createElement("div",null,p.createElement("div",{className:"_5rkp"},p.createElement(j,{className:"_5gfn"},p.createElement(l,null,p.createElement(k,{type:"data",label:w},p.createElement("div",null,p.createElement("div",{className:((!!this.state.selectedEvent?"hidden_elem":'')+(this.props.shouldValidateUI?' '+"_5vvv":''))},p.createElement(g,{placeholder:x,presenter:n,onSelectAttempt:this._onSelectEventAttempt,searchSource:new h(this.props.events,function(event){return event.display_name;}),queryString:this.state.queryString,onChange:this._onInputChange,showEntriesOnFocus:true})),p.createElement("div",{className:((!this.state.selectedEvent?"hidden_elem":''))},p.createElement(o,{enableEventParameters:this.state.enableEventParams,eventDisplayName:y,event:event,fullDateRange:i.getFullDateRange(),onEventClosed:this._closeEvent,parameters:z,ref:"eventView"}))))))),this._renderPercentileChart()));},_renderPercentileChart:function(){if(!this.state.selectedEvent)return null;var w=this.state.initialPercentile&&parseInt(this.state.initialPercentile,10);return (p.createElement(m,{appID:this.props.appID,eventName:this.state.selectedEvent.getUniqueID(),fullDateRange:i.getFullDateRange(),initialInterval:parseInt(this.state.initialInterval,10),initialMeasurement:this.state.initialMeasurement,initialPercentile:w,key:"percentileChart",onMeasurementChange:this._onMeasurementChange,ref:"percentileChart",width:s,visibleDateRange:i.getDefaultVisibleDateRange()}));},_onSelectEventAttempt:function(w){this.setState({enableEventParams:true,initialDuration:null,initialMeasurement:null,initialPercentile:null,selectedEvent:w});},_onInputChange:function(event){this.setState({queryString:event.target.value});},_onMeasurementChange:function(w){this.setState({enableEventParams:w==='all'});},_closeEvent:function(){this.setState({selectedEvent:null,queryString:''});},getRule:function(){if(!this.state.selectedEvent)return null;var w={retention_days:this.refs.percentileChart.getDuration(),event:this.state.selectedEvent.getUniqueID(),params:this.refs.eventView.getSelectedParams()},x=this.refs.percentileChart.getCumulativeRule();if(x){w.cumulativeRule=x;}else w.clientFilters=this.refs.percentileChart.getClientFilters();return w;}});e.exports=v;},null);
__d("AdsMobileRemarketingRuleOperations",["AudienceManagerAppRemarketingOperatorConfig","copyProperties","fbt","mergeArrays"],function(a,b,c,d,e,f,g,h,i,j){var k=function(o,p){if(!o.event)return false;var q=o.retention_days;if(!q||(parseInt(q,10)!=parseFloat(q,10))||q<1||q>180){p("Days to stay in list must be an integer between 1 and 180");return false;}var r=o.params.filter(function(s){return s.values&&!s.values.length;});if(r.length){p("Parameter value required");return false;}return true;};f.validateCombinationRule=function(o,p){if(!o.name||!o.application||(!o.inclusions&&!o.exclusions))return false;var q=[];if(o.inclusions)q=j(q,o.inclusions);if(o.exclusions)q=j(q,o.exclusions);for(var r=0;r<q.length;r++){var s=q[r];if(!k(s,p))return false;}return true;};f.validateRule=function(o,p){if(!o.name||!o.application||!o.rule.event)return false;return k(o.rule);};var l=function(o){var p={};o.forEach(function(q){if(!p[q.id])p[q.id]=[];var r;if(g.isArray[q.operator]){r=q.values;}else r=q.values[0];var s={};s[q.operator]=r;p[q.id].push(s);});return Object.keys(p).map(function(q){var r=p[q].map(function(s){var t={};t[q]=s;return t;});return {and:r};});};f.transformUIParamsToAPIRule=l;var m=function(o,p){if(o.cumulativeRule)return n(o,p);var q={retention_days:o.retention_days,type:'app',rule:{_application:p,_eventName:o.event}},r=l(o.params);if(r&&r.length)q.rule.and=r;if(o.clientFilters)q.rule._clientFilters=o.clientFilters;return q;},n=function(o,p){var q={retention_days:o.retention_days,type:'app',rule:{_application:p,_eventName:o.event,_cumulativeRule:o.cumulativeRule}};return q;};f.getUploadParams=function(o,p){var q={name:o.name,description:o.description,handleError:function(r,s){var t=s.error&&s.error.message;p(t);}.bind(this)};h(q,m(o.rule,o.application));return q;};f.getCombinationUploadParams=function(o,p){var q={name:o.name,description:o.description,handleError:function(r,s){var t=s.error&&s.error.message;p(t);}.bind(this)};if(o.inclusions){q.inclusions=[];o.inclusions.forEach(function(r){q.inclusions.push(m(r,o.application));});}if(o.exclusions){q.exclusions=[];o.exclusions.forEach(function(r){q.exclusions.push(m(r,o.application));});}return q;};},null);
__d("AdsCreateMobileRemarketingAudienceDialog.react",["AdsCreateMobileRemarketingAudienceViewV2.react","AdInterfacesUiLogger","AudienceManagerLoggingEvents","AudienceManagerUIConstants","AudienceManagerURLConstants","Link.react","React","ReactLayeredComponentMixin","AdsMobileRemarketingRuleOperations","XRemarketingTOSControllerURIBuilder","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogOkayButton.react","XUIDialogFooter.react","XUIDialogButton.react","XUIDialogTitle.react","XUISpinner.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){var aa=m.PropTypes,ba={NUX_DIALOG:1,CREATE_AUDIENCE_DIALOG:2,CREATE_AUDIENCE_REQUEST_SENT:3,CREATE_AUDIENCE_REQUEST_COMPLETE:4},ca=m.createClass({displayName:"AdsCreateMobileRemarketingAudienceDialog",mixins:[n],propTypes:{dao:aa.object.isRequired,accountID:m.PropTypes.string.isRequired,config:aa.object,onAudienceAdded:aa.func.isRequired,onCancel:aa.func.isRequired,tosAccepted:aa.object.isRequired,tosRequirementsForAccount:aa.object.isRequired,defaultMobileApp:aa.object},getInitialState:function(){return {viewState:ba.NUX_DIALOG,termsAccepted:false,error:null,shouldValidateUI:false};},render:function(){return m.createElement("span",null);},renderLayers:function(){return {dialog:m.createElement(q,{layerHideOnBlur:false,shown:true,width:j.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle},m.createElement(w,null,this._renderDialogTitle()),m.createElement(r,null,m.createElement("div",{className:"_5rkr"},this._renderDialogBody())),m.createElement(u,{leftContent:this._renderDialogFooterLeftContent()},this._renderFooter()))};},_renderDialogBody:function(){switch(this.state.viewState){case ba.NUX_DIALOG:return (m.createElement("div",null,m.createElement("div",null,m.createElement("p",null,"Create a custom audience to reach people who take specific actions in your app - like reaching a specific level in a game, adding items to their cart or rating your app."),m.createElement("p",null,z._("Start measuring events in your app by integrating our SDK for {ios-link}, {android-link}, and {canvas-link}. Every time someone takes the specified action within your app, they will be added to your Custom Audience.",[z.param("ios-link",m.createElement(l,{href:k.MACA_IOS_SDK,target:"_blank"},"iOS")),z.param("android-link",m.createElement(l,{href:k.MACA_ANDROID_SDK,target:"_blank"},"Android")),z.param("canvas-link",m.createElement(l,{href:k.MACA_CANVAS_SDK,target:"_blank"},"Canvas"))]))),m.createElement("div",null,m.createElement("input",{type:"checkbox",checked:this._getIsTosAccepted()||this.state.termsAccepted,onChange:this._termsCheckboxChanged,disabled:this._getIsTosAccepted()},z._("I have read and accepted the {=Terms for Custom Audience from your App and Website}",[z.param("=Terms for Custom Audience from your App and Website",m.createElement(l,{target:"_blank",href:(new p()).setInt('act',this.props.accountID).getURI()},"Terms for Custom Audience from your App and Website"))])))));case ba.CREATE_AUDIENCE_DIALOG:case ba.CREATE_AUDIENCE_REQUEST_SENT:return (m.createElement(g,{config:this.props.config,dao:this.props.dao,ref:"view",error:this.state.error,shouldValidateUI:this.state.shouldValidateUI,defaultMobileApp:this.props.defaultMobileApp}));case ba.CREATE_AUDIENCE_REQUEST_COMPLETE:return (m.createElement("div",{className:"_5saq"},m.createElement("div",{className:"_5svr _5svs"},"Thank You for Creating a Custom Audience"),m.createElement("p",null,"Your audience is ready.")));}},_renderDialogTitle:function(){switch(this.state.viewState){case ba.CREATE_AUDIENCE_REQUEST_COMPLETE:return ("Custom Audience from your Mobile App Created");default:return ("Create a Custom Audience from your App");}},_renderFooter:function(){switch(this.state.viewState){case ba.NUX_DIALOG:return (m.createElement("div",null,m.createElement(s,null),m.createElement(v,{use:"confirm",action:"confirm",onClick:this._onNuxCreateClick,disabled:!this.state.termsAccepted&&!this._getIsTosAccepted(),label:"Create Audience"})));case ba.CREATE_AUDIENCE_DIALOG:return (m.createElement("div",null,m.createElement(s,null),m.createElement(v,{use:"confirm",action:"confirm",onClick:this._onCreateClick,label:"Create Audience"})));case ba.CREATE_AUDIENCE_REQUEST_SENT:return (m.createElement("div",null,m.createElement(x,{className:"_5jy4",size:"small",background:"light"}),m.createElement(s,{disabled:true}),m.createElement(v,{use:"confirm",action:"confirm",onClick:this._onCreateClick,disabled:true,label:"Create Audience"})));case ba.CREATE_AUDIENCE_REQUEST_COMPLETE:return m.createElement(t,{use:"confirm",action:"cancel"});}},_renderDialogFooterLeftContent:function(){switch(this.state.viewState){case ba.NUX_DIALOG:return (m.createElement(l,{href:k.MACA_LEARN_MORE,target:"_blank"},"Learn More"));default:return m.createElement("span",null);}},_onNuxCreateClick:function(){if(!this._getIsTosAccepted())this._acceptTos();h.log(i.AM_MACA_NUX_CREATE_AUDIENCE);this.setState({viewState:ba.CREATE_AUDIENCE_DIALOG});},_acceptTos:function(){this.props.dao.add.acceptCustomAudiencesTos.one(function(){},{accountId:this.props.accountID,tos_id:this.props.tosRequirementsForAccount.mobile_app_custom_audience});},_onCreateClick:function(){this.setState({shouldValidateUI:true});var da=this.refs.view.getCreationParams(),ea=o.validateCombinationRule(da,function(ga){this.setState({error:ga,viewState:ba.CREATE_AUDIENCE_DIALOG});}.bind(this));if(!ea){h.log(i.AM_MACA_EDITOR_VALIDATION_FAILURE);return;}h.log(i.AM_MACA_EDITOR_CREATE_AUDIENCE);this.setState({viewState:ba.CREATE_AUDIENCE_REQUEST_SENT});var fa=o.getCombinationUploadParams(da,function(ga){this.setState({error:ga,viewState:ba.CREATE_AUDIENCE_DIALOG});}.bind(this));this.props.dao.add.createMobileAppCombinationCustomAudience.one(function(ga){this.props.onAudienceAdded(ga.id);this.setState({viewState:ba.CREATE_AUDIENCE_REQUEST_COMPLETE});h.log(i.AM_MACA_EDITOR_CREATE_SUCCESS);}.bind(this),fa);},_getIsTosAccepted:function(){var da=this.props.tosRequirementsForAccount.mobile_app_custom_audience;return this.props.tosAccepted.hasOwnProperty(da)&&(this.props.tosAccepted[da]==1);},_termsCheckboxChanged:function(event){this.setState({termsAccepted:event.target.checked});},_onToggle:function(da){if(!da)this.props.onCancel();}});e.exports=ca;},null);
__d("CustomAudienceFinishNextStepSelector.react",["Image.react","ImageBlock.react","React","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m='/images/ads/audience_manager/ca_new_ad.png',n='/images/ads/createflow/targeting/new_ca.png',o=i.createClass({displayName:"CustomAudienceFinishNextStepSelector",propTypes:{onCreateAdClick:i.PropTypes.func.isRequired,onCreateLookalikeClick:i.PropTypes.func.isRequired},render:function(){return (i.createElement("div",{className:"_247t"},i.createElement("ul",null,this._renderCreateAdItem(),this._renderCreateLookalikeItem())));},_renderCreateAdItem:function(){return (i.createElement("li",{className:"_247s",onClick:this.props.onCreateAdClick},i.createElement(h,{spacing:"large"},i.createElement(g,{src:m}),i.createElement("div",null,i.createElement(j,{weight:"bold",shade:"medium",size:"medium"},"Create an Ad Using the Audience"),i.createElement("div",{className:"_3-8x"},"You can start creating an ad using Custom Audience you just created.")))));},_renderCreateLookalikeItem:function(){return (i.createElement("li",{className:"_247s",onClick:this.props.onCreateLookalikeClick},i.createElement(h,{spacing:"large"},i.createElement(g,{src:n}),i.createElement("div",null,i.createElement(j,{weight:"bold",shade:"medium",size:"medium"},"Expand your Audience"),i.createElement("div",{className:"_3-8x"},"Facebook can help you reach more people that matter to your business by finding people that are similar to your source audience.")))));}});e.exports=o;},null);
__d("AudienceManagerNextStepDialogContent.react",["CustomAudienceFinishNextStepSelector.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o=h.createClass({displayName:"AudienceManagerNextStepDialogContent",propTypes:{onFinish:h.PropTypes.func.isRequired,onCreateAdClick:h.PropTypes.func.isRequired,onCreateLookalikeClick:h.PropTypes.func.isRequired},render:function(){return (h.createElement("div",null,h.createElement(i,null,h.createElement("div",{className:"_50_z"},h.createElement(l,{weight:"bold",shade:"medium",size:"medium"},"Next Steps"),h.createElement("div",{className:"_3-98 _3-8y"},"Start creating an ad using the Custom Audience you just created or creating a Lookalike Audience to expand your audience."),h.createElement(g,{onCreateAdClick:this.props.onCreateAdClick,onCreateLookalikeClick:this.props.onCreateLookalikeClick}))),h.createElement(k,null,h.createElement(j,{onClick:this.props.onFinish,label:"Done"}))));}});e.exports=o;},null);
__d("AudienceManagerLookalikeDialog.react",["AdsCreateLookalikeConfig","AdsCreateLookalikeDialogTooltipRangeInput.react","AdsCreateLookalikeDialogCountryTypeahead.react","AdsCreateLookalikeDialogSourceTypeahead.react","AsyncRequest","ads-cluster-constants","InfoTable.react","InfoTableRow.react","InfoTableSection.react","LayerHideOnEscape","React","SearchableEntry","XAdsLookalikeSuggestedCountryControllerURIBuilder","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogButton.react","XUIDialogTitle.react","XUINotice.react","XUISpinner.react","InsightsNumberUtils","adsGKCheck","copyProperties","cx","fbt","ads-lib-formatters"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){var ga=b('ads-lib-formatters').createLimitedSigFigNumberFormatter(0,2),ha=g.countries,ia=l.LOOKALIKE_SOURCE_TYPE,ja=l.LOOKALIKE_CUSTOM_RATIO_LIMIT,ka={CUSTOM_AUDIENCE:("Custom Audience"),CONVERSION_PIXEL:("Conversion Pixel"),PAGE:("Page"),APPLICATION:("Application")},la=q.createClass({displayName:"AudienceManagerLookalikeDialog",propTypes:{accountID:q.PropTypes.string.isRequired,audience:q.PropTypes.object,dao:q.PropTypes.object.isRequired,onAudienceAdded:q.PropTypes.func.isRequired,onClose:q.PropTypes.func.isRequired},getInitialState:function(){return {loading:false,isFinancialService:false,error:null,source:(void 0),country:(void 0),ratio:ja.MIN,minSize:(void 0),maxSize:(void 0)};},render:function(){return (q.createElement(t,{shown:true,width:630,behaviors:{LayerHideOnEscape:p},onToggle:this._onToggle},q.createElement(y,null,"Create Lookalike Audience"),q.createElement(u,null,q.createElement("div",{className:"_wm-"},this._renderError(),this._renderDialogBody())),q.createElement(w,null,q.createElement(v,{onClick:this.props.onClose,disabled:this.state.loading}),q.createElement(x,{use:"confirm",action:"confirm",label:"Create Audience",disabled:this.state.loading||!this._canCreate(),onClick:this._onCreateLookalike}))));},_renderDialogBody:function(){if(this.state.loading)return (q.createElement("div",{className:"_5saq"},q.createElement(aa,{background:"light",size:"large"})));var ma=(q.createElement(n,{label:"Size",className:"_wn2",type:"data"},q.createElement("div",null,q.createElement("div",null,q.createElement("span",{className:"_wn3"},this.state.minSize),q.createElement("div",{className:"_wn4"},q.createElement(h,{min:ja.MIN,max:ja.MAX,step:ja.GRANULARITY,initValue:this.state.ratio,tooltip:this._getAudienceSizeText(),disabled:!this._canCreate(),onChange:this._onAudienceSizeChange})),q.createElement("span",{className:"_wn3"},this.state.maxSize)),q.createElement("p",{className:"_wn5"},"Size range is based on the total audience in the country you choose. Smaller audiences most closely match your source audience. Creating a larger audience increases your potential reach, but reduces the level of similarity to your source.")))),na=[q.createElement(n,{label:"Source",className:"_wn1",type:"data"},q.createElement(j,{accountID:this.props.accountID,source:this.state.source,onSelectAttempt:this._onSourceSelected})),q.createElement(n,{label:"Country",className:"_wn1",type:"data"},q.createElement(i,{ref:"countryTypeahead",country:this.state.country,onSelectAttempt:this._onCountrySelected}))];if(this.state.country!==(void 0))na.push(ma);if(ca('financial_service_lookalike'))na.push(q.createElement(n,null,q.createElement("div",null,q.createElement("input",{type:"checkbox",checked:this.state.isFinancialService,onChange:this._toggleFinancialService}),"Use this lookalike audience in financial service")));return (q.createElement("div",null,q.createElement("p",{className:"_wm_"},"Reach new people who are similar to an audience you care about. Select a source and a country below, then choose an optimization."),q.createElement(m,{className:"_wn0"},q.createElement(o,null,na))));},componentWillMount:function(){this._init();},_init:function(){if(this.props.audience){var ma={uniqueID:this.props.audience.id,title:this.props.audience.name};ma.subtitle=ka.CUSTOM_AUDIENCE;ma.type=ia.CUSTOM_AUDIENCE;this.setState({source:new r(ma)});this._loadSuggestedCountry(this.props.audience.id);}},_canCreate:function(){return !!(this.state.source&&this.state.country);},_toggleFinancialService:function(ma){this.setState({isFinancialService:ma.target.checked});},_onSourceSelected:function(ma){var na=this.state.source;if(ma&&(!na||ma.getUniqueID()!==na.getUniqueID()))this._loadSuggestedCountry(ma.getUniqueID());this.setState({source:ma});},_onCountrySelected:function(ma){this.setState({country:ma,minSize:ba.abbrevInt(this._getApproximateAudienceSize(ma,ja.MIN)),maxSize:ba.abbrevInt(this._getApproximateAudienceSize(ma,ja.MAX))});},_onAudienceSizeChange:function(ma){this.setState({ratio:parseFloat(ma),ratioChanged:true});},_getApproximateAudienceSize:function(ma,na){var oa=Math.floor(ha[ma].count*na);return oa;},_getAudienceSizeText:function(){if(!this._canCreate())return '';var ma=ga(this._getApproximateAudienceSize(this.state.country,this.state.ratio));return (fa._("{size} people",[fa.param("size",ma)]));},_renderError:function(){if(this.state.error)return (q.createElement("div",{className:"_wn6"},q.createElement(z,{use:"warn"},this.state.error.message)));},_onCreateLookalike:function(){var ma=this.state.source,na=this.state.country,oa=this.state.ratio,pa;this.setState({error:null});var qa={accountId:this.props.accountID,lookalike_spec:{country:na,ratio:oa,is_financial_service:this.state.isFinancialService},handleError:(function(ra,sa){this.setState({loading:false,error:sa&&sa.error});}).bind(this)};switch(ma.getType()){case ia.CUSTOM_AUDIENCE:pa='createLookalikeCluster';qa.origin_audience_id=ma.getUniqueID();qa.lookalike_spec.type=l.LOOKALIKE_CUSTOM_RATIO;break;case ia.CONVERSION_PIXEL:pa='createActionsLookalike';da(qa.lookalike_spec,{pixel_ids:[ma.getUniqueID()],conversion_type:'offsite'});break;case ia.PAGE:pa='createActionsLookalike';da(qa.lookalike_spec,{page_id:ma.getUniqueID(),conversion_type:'page_like'});break;case ia.APPLICATION:pa='createActionsLookalike';da(qa.lookalike_spec,{app_id:ma.getUniqueID(),conversion_type:'engaged_app_users'});break;default:return;}this.props.dao.add[pa].one((function(ra){this.setState({loading:false});this.props.onAudienceAdded(ra.id);this.props.onClose();}.bind(this)),qa);this.setState({loading:true});},_loadSuggestedCountry:function(ma){var na=(new s()).setInt('origin_audience_id',ma).getURI(),oa=(new k()).setURI(na).setHandler((function(pa){var qa=this.state.source.getUniqueID(),ra=this.refs.countryTypeahead;if(qa===ma&&!ra.state.queryString){var sa=pa&&pa.payload;if(ha[sa])this._onCountrySelected(sa);}}.bind(this))).setErrorHandler(function(pa){});oa.send();},_onToggle:function(ma){if(!ma)this.props.onClose();}});e.exports=la;},null);
__d("AudienceManagerCreateAudienceInitDialogContent.react",["React","AudienceCreatorTypeSelector.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o=g.createClass({displayName:"AudienceManagerCreateAudienceInitDialogContent",propTypes:{onCancel:g.PropTypes.func.isRequired,onCustomerListClick:g.PropTypes.func.isRequired,onWebsiteTrafficClick:g.PropTypes.func.isRequired,onMobileAppClick:g.PropTypes.func.isRequired},render:function(){return (g.createElement("div",null,g.createElement(i,null,g.createElement("div",{className:"_50_z"},g.createElement(l,{weight:"bold",shade:"medium",size:"medium"},"Choose the type of audience you want to create on Facebook."),g.createElement("div",{className:"_3-98 _3-8y"},"This process is secure and the details about your customers will be kept private."),g.createElement(h,{onCustomerListClick:this.props.onCustomerListClick,onWebsiteTrafficClick:this.props.onWebsiteTrafficClick,onMobileAppClick:this.props.onMobileAppClick}))),g.createElement(k,null,g.createElement(j,{onClick:this.props.onCancel,label:"Cancel"}))));}});e.exports=o;},null);
__d("CustomerListTypeSelector.react",["Image.react","ImageBlock.react","React","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m='/images/ads/audience_manager/ca_file.png',n='/images/ads/audience_manager/ca_copy.png',o='/images/ads/audience_manager/ca_import.png',p=i.createClass({displayName:"CustomerListTypeSelector",propTypes:{onUploadFileClick:i.PropTypes.func.isRequired,onCopyPasteClick:i.PropTypes.func.isRequired,onThirdPartyClick:i.PropTypes.func.isRequired},_renderUploadFileItem:function(){return (i.createElement("li",{className:"_247s",onClick:this.props.onUploadFileClick},i.createElement(h,{spacing:"large"},i.createElement(g,{src:m}),i.createElement("div",null,i.createElement(j,{weight:"bold",shade:"medium",size:"medium"},"Upload a file"),i.createElement("div",{className:"_3-8x"},"Upload a data file that contains emails, phone numbers, Facebook user IDs or mobile advertiser IDs")))));},_renderCopyPasteItem:function(){return (i.createElement("li",{className:"_247s",onClick:this.props.onCopyPasteClick},i.createElement(h,{spacing:"large"},i.createElement(g,{src:n}),i.createElement("div",null,i.createElement(j,{weight:"bold",shade:"medium",size:"medium"},"Copy and paste your custom list"),i.createElement("div",{className:"_3-8x"},"Copy and paste emails, phone numbers, Facebook user IDs or mobile advertiser IDs of your customers and create a Custom Audience")))));},_renderThirdPartyItem:function(){return (i.createElement("li",{className:"_247s",onClick:this.props.onThirdPartyClick},i.createElement(h,{spacing:"large"},i.createElement(g,{src:o}),i.createElement("div",null,i.createElement(j,{weight:"bold",shade:"medium",size:"medium"},"Import from MailChimp"),i.createElement("div",{className:"_3-8x"},"Import a customer list from a third-party email service.")))));},render:function(){return (i.createElement("div",{className:"_247t"},i.createElement("ul",null,this._renderUploadFileItem(),this._renderCopyPasteItem(),this._renderThirdPartyItem())));}});e.exports=p;},null);
__d("AudienceManagerCustomerListDialogContent.react",["React","CustomerListTypeSelector.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o=g.createClass({displayName:"AudienceManagerCustomerListDialogContent",propTypes:{onBack:g.PropTypes.func.isRequired,onUploadFileClick:g.PropTypes.func.isRequired,onCopyPasteClick:g.PropTypes.func.isRequired,onThirdPartyClick:g.PropTypes.func.isRequired},render:function(){return (g.createElement("div",null,g.createElement(i,null,g.createElement("div",{className:"_50_z"},g.createElement(l,{weight:"bold",shade:"medium",size:"medium"},"How do you want to add customers to this audience?"),g.createElement("div",{className:"_3-98 _3-8y"},"Information you provide will be matched with people on Facebook to create an audience. Your contacts won't be notified that you've added them to an audience, and we'll never contact them without your permission."),g.createElement(h,{onUploadFileClick:this.props.onUploadFileClick,onCopyPasteClick:this.props.onCopyPasteClick,onThirdPartyClick:this.props.onThirdPartyClick}))),g.createElement(k,null,g.createElement(j,{onClick:this.props.onBack,label:"Back"}))));}});e.exports=o;},null);
__d("FBDragDropBox.react",["DragDropTarget","FileInput.react","Image.react","InlineBlock.react","React","XUIButton.react","fbt","cx","glyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';var p="/images/icons/groups/files/file-plain-32.png",q=k.createClass({displayName:"FBDragDropBox",propTypes:{onFilesSelection:k.PropTypes.func.isRequired,onFileChange:k.PropTypes.func.isRequired,onFileRemove:k.PropTypes.func.isRequired,selectedFile:k.PropTypes.object,hasError:k.PropTypes.bool,allowedFileTypes:k.PropTypes.array},getDefaultProps:function(){return {allowedFileTypes:['text/plain','text/csv']};},_handleFilesSelection:function(r){this.props.onFilesSelection(r);},_handleFileChange:function(r){this.props.onFileChange(r);},componentDidMount:function(){new g(this.getDOMNode()).setOnFilesDropCallback(this._handleFileChange).enable();},_renderDragAndDropBox:function(){var r;if(this.props.selectedFile&&this.props.selectedFile.name){var s=(this.props.selectedFile.name);r=(k.createElement("div",{className:"_82m"},k.createElement(i,{src:p,className:"_82n"}),s,k.createElement(i,{className:"_82o",onClick:this.props.onFileRemove,src:o('remove')})));}else r=(k.createElement("div",null,"Drag and drop your file here or",' ',k.createElement(h,{accept:this.props.allowedFileTypes.join(', '),onChange:this._handleFilesSelection},k.createElement(l,{href:{url:'#'},label:"Upload File"}))));return (k.createElement(j,{alignv:"middle",height:76,fullWidth:true},r));},render:function(){return (k.createElement("div",{className:(("_82p")+(this.props.selectedFile&&this.props.selectedFile.name?' '+"_82q":'')+(this.props.hasError?' '+"_82r":''))},this._renderDragAndDropBox()));}});e.exports=q;},null);
__d("AudienceManagerErrorContextualDialog.react",["HasLayerContextMixin","React","ReactLayer","ContextualDialog","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=i.createClass({displayName:"AudienceManagerErrorContextualDialogLayer",propTypes:{shown:h.PropTypes.bool,context:h.PropTypes.object.isRequired,offsetY:h.PropTypes.number},getDefaultProps:function(){return {shown:true};},createLayer:function(n){var o=new j({theme:{wrapperClassName:"_1tpb",arrowDimensions:{offset:12,length:16},position:'right',offsetY:this.props.offsetY}},n);o.shouldSetARIAProperties(false);this._setProps(this.props,o);return o;},receiveProps:function(n){this._setProps(n,this.layer);},_setProps:function(n,o){o.setContext(n.context);o.conditionShow(n.shown);}}),m=h.createClass({displayName:"AudienceManagerErrorContextualDialog",mixins:[g],propTypes:{contextRef:h.PropTypes.string.isRequired,shown:h.PropTypes.bool,offsetY:h.PropTypes.number},render:function(){var n=this.props.children,o=(h.createElement(l,{shown:this.props.shown,context:this.getContextNode(),offsetY:this.props.offsetY},h.createElement("div",{className:"_1tp9"},h.createElement("div",{className:"_1tpa"}),h.createElement("div",{className:"_1tp8"},h.createElement("div",null,n)))));return o;}});e.exports=m;},null);
__d("AudienceManagerFileImportInit.react",["AdInterfacesUiLogger","AudienceManagerAppIDInput.react","AudienceManagerDataTypeSelector.react","FBDragDropBox.react","AudienceManagerErrorContextualDialog.react","AudienceManagerLoggingEvents","AudienceManagerURLConstants","AudienceManagerViewFormatingExampleLink.react","ImageBlock.react","Image.react","InlineBlock.react","Link.react","ReactLayeredComponentMixin","React","XUIGrayText.react","cx","fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){'use strict';var y='/images/ads/audience_manager/ca_file.png',z=44,aa=['csv','txt'],ba=t.createClass({displayName:"AudienceManagerFileImportInit",mixins:[s],propTypes:{accountID:t.PropTypes.string.isRequired,selectedDataType:t.PropTypes.string,appIDEntries:t.PropTypes.array,termsAccepted:t.PropTypes.bool,onFileUpdated:t.PropTypes.func.isRequired,onAppEntriesUpdated:t.PropTypes.func,onDataTypeChanged:t.PropTypes.func.isRequired,onTermsCheckboxChanged:t.PropTypes.func.isRequired},getDefaultProps:function(){return {selectedDataType:x.UPLOAD_TYPE_EMAIL,appIDEntries:[]};},getInitialState:function(){return {selectedFile:null,fileError:null};},renderLayers:function(){return {contextualDialog:t.createElement(k,{contextRef:"dragdropbox",shown:this._getShouldShowErrorDialog(),offsetY:17},this.state.fileError)};},render:function(){return (t.createElement("div",null,t.createElement(o,{spacing:"large"},t.createElement(p,{src:y}),t.createElement(q,{alignv:"middle",height:z},t.createElement(u,{weight:"bold",shade:"medium",size:"medium"},"Choose a file to upload"))),t.createElement("div",{className:"_3-8-"},t.createElement("p",null,"You can upload files in .csv or .txt format."),t.createElement("p",null,"Text files (.txt and .csv) can include records on separate lines or in a list separated by commas.",' ',t.createElement(n,null)),t.createElement("div",{className:"_3-98 _3-8z"},t.createElement(i,{defaultValue:this.props.selectedDataType,onTypeChange:this._onDataTypeChanged})),this._renderAppIDInput(),t.createElement("div",{className:"_3-98 _3-8z"},t.createElement(j,{ref:"dragdropbox",onFileRemove:this._onFileRemove,onFilesSelection:this._onFilesSelection,onFileChange:this._onFileChange,selectedFile:this.state.selectedFile,hasError:this._getShouldShowErrorDialog()})),t.createElement("div",{className:"_3-8w"},t.createElement("input",{type:"checkbox",checked:this.props.termsAccepted,onChange:this.props.onTermsCheckboxChanged}),w._("I agree to the {link}",[w.param("link",t.createElement(r,{target:"_blank",href:m.CUSTOM_AUDIENCE_TOS},"Facebook Custom Audiences Terms"))])))));},_renderAppIDInput:function(){if(this.state.selectedDataType===x.UPLOAD_TYPE_UID&&this.props.onAppEntriesUpdated)return t.createElement(h,{accountID:this.props.accountID,onAppEntriesUpdated:this.props.onAppEntriesUpdated});return null;},_getShouldShowErrorDialog:function(){return !!this.state.fileError;},_onDataTypeChanged:function(ca){this.setState({selectedDataType:ca.value},function(){return this.props.onDataTypeChanged(ca);}.bind(this));},_onFileRemove:function(){this.setState({fileError:null,selectedFile:null},function(){return this.props.onFileUpdated(null);}.bind(this));},_onFilesSelection:function(ca){this._onFileChange(ca.target.files);},_onFileChange:function(ca){var da=ca[0];if(da){g.log(l.AM_CA_CREATE_UPLOAD_FILE,{file_name:da.name});if(!da.size){this.setState({selectedFile:da,fileError:"File appears to be empty."},function(){return this.props.onFileUpdated(null);}.bind(this));g.log(l.AM_CA_CREATE_UPLOAD_FILE_ERROR,{error:this.state.fileError,file_name:da.name});return;}var ea='';if(da.name.indexOf('.')>=0)ea=da.name.split('.').pop();var fa=aa.indexOf(ea.toLowerCase())!=-1;if(!fa){this.setState({selectedFile:da,fileError:"File must be .csv or .txt format."},function(){return this.props.onFileUpdated(null);}.bind(this));g.log(l.AM_CA_CREATE_UPLOAD_FILE_ERROR,{error:this.state.fileError,file_name:da.name});return;}this.setState({selectedFile:da,fileError:null},function(){return this.props.onFileUpdated(da);}.bind(this));}}});e.exports=ba;},null);
__d("AudienceManagerCreateAudienceFileImportInitDialogContent.react",["AudienceManagerFileImportInit.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","cx","fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o=h.createClass({displayName:"AudienceManagerCreateAudienceFileImportInitDialogContent",propTypes:{accountID:h.PropTypes.string.isRequired,onBack:h.PropTypes.func.isRequired,onCreateAudienceClick:h.PropTypes.func.isRequired},getInitialState:function(){return {audienceName:'',selectedFile:null,selectedDataType:n.UPLOAD_TYPE_EMAIL,termsAccepted:true,appIDEntries:[]};},render:function(){return (h.createElement("div",null,h.createElement(i,null,h.createElement("div",{className:"_50_z"},h.createElement(g,{accountID:this.props.accountID,selectedDataType:this.state.selectedDataType,appIDEntries:this.state.appIDEntries,termsAccepted:this.state.termsAccepted,onFileUpdated:this._onFileUpdated,onAppEntriesUpdated:this._onAppEntriesUpdated,onDataTypeChanged:this._onDataTypeChanged,onTermsCheckboxChanged:this._onTermsCheckboxChanged}))),h.createElement(k,null,h.createElement("div",null,h.createElement(j,{onClick:this.props.onBack,label:"Back"}),h.createElement(j,{use:"confirm",disabled:!this._getShouldEnableCreateAudienceButton(),onClick:this._onCreateAudienceButtonClick,label:"Create Audience"})))));},_getShouldEnableCreateAudienceButton:function(){var p=true;if(this.state.selectedDataType===n.UPLOAD_TYPE_UID){var q=this.state.appIDEntries.some(function(r){return r.getAuxiliaryData().invalid;});p=this.state.appIDEntries.length>0&&!q;}return !!this.state.termsAccepted&&!!this.state.selectedFile&&p;},_onTermsCheckboxChanged:function(p){this.setState({termsAccepted:p.target.checked});},_onDataTypeChanged:function(p){this.setState({selectedDataType:p.value,appIDEntries:[]});},_onAppEntriesUpdated:function(p){this.setState({appIDEntries:p});},_onFileUpdated:function(p){var q=p?p.name.substr(0,p.name.lastIndexOf('.')):'';this.setState({selectedFile:p,audienceName:q});},_onCreateAudienceButtonClick:function(){this.props.onCreateAudienceClick(this.state.selectedDataType,this.state.appIDEntries,this.state.selectedFile,this.state.audienceName);}});e.exports=o;},null);
__d("AudienceManagerMailChimpInitDialogContent.react",["Image.react","ImageBlock.react","InlineBlock.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q='/images/ads/audience_manager/ca_import.png',r=44,s=j.createClass({displayName:"AudienceManagerMailChimpInitDialogContent",propTypes:{onBack:j.PropTypes.func.isRequired,onLogInToMailChimpClick:j.PropTypes.func.isRequired},render:function(){return (j.createElement("div",null,j.createElement(k,null,j.createElement("div",{className:"_50_z"},j.createElement(h,{spacing:"large"},j.createElement(g,{src:q}),j.createElement(i,{alignv:"middle",height:r},j.createElement(n,{weight:"bold",shade:"medium",size:"medium"},"Import from MailChimp"))),j.createElement("div",{className:"_3-8-"},j.createElement("p",null,"Email addresses from your MailChimp list will be matched with people on Facebook to create an audience."),j.createElement("p",null,"Your contacts won't be notified that you've added them to an audience and we'll never contact them without your permission."),j.createElement("p",null,"Facebook doesn't store your username or password.")))),j.createElement(m,null,j.createElement("div",null,j.createElement(l,{onClick:this.props.onBack,label:"Back"}),j.createElement(l,{use:"confirm",onClick:this.props.onLogInToMailChimpClick,label:"Log in to MailChimp"})))));}});e.exports=s;},null);
__d("AudienceManagerMailChimpSelectListDialogContent.react",["AudienceManagerURLConstants","AudienceThirdPartyContactsList.react","Image.react","Link.react","LeftRight.react","React","XUIButton.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIPagerButtons.react","cx","ix","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=l.createClass({displayName:"AudienceManagerMailChimpSelectListDialogContent",propTypes:{contactsLists:l.PropTypes.array.isRequired,totalPage:l.PropTypes.number.isRequired,currentPage:l.PropTypes.number.isRequired,onLoadContactsLists:l.PropTypes.func.isRequired,onCreateAudienceClick:l.PropTypes.func.isRequired},getInitialState:function(){return {termsAccepted:true,selectedListIDs:{}};},render:function(){return (l.createElement("div",null,l.createElement(n,null,l.createElement("div",{className:"_5rkr"},l.createElement("div",{className:"_5q_x"},"Select one or more lists. A new audience will be created for each email list."),l.createElement(h,{selectedLists:this.state.selectedListIDs,contactsLists:this.props.contactsLists,onListSelectionChange:this._onListSelectionChange,onSelectAllLists:this._onSelectAllLists,onDeselectAllLists:this._onDeselectAllLists}),l.createElement(k,null,l.createElement("div",{className:((this.props.totalPage===0?"hidden_elem":'')+(' '+"mtm"))},this._getSelectedListsSentence()),l.createElement("div",{className:((this.props.totalPage<=1?"hidden_elem":'')+(' '+"mtm"))},l.createElement("span",{className:"prs"},this.props.currentPage+" / "+this.props.totalPage),l.createElement(q,null,l.createElement(m,{href:{url:'#'},image:l.createElement(i,{src:s('/images/ui/x/pager/left.png')}),size:"small",onClick:this._loadPreviousPage,disabled:this.props.currentPage===1}),l.createElement(m,{href:{url:'#'},image:l.createElement(i,{src:s('/images/ui/x/pager/right.png')}),size:"small",onClick:this._loadNextPage,disabled:this.props.currentPage===this.props.totalPage})))),l.createElement("div",{className:"mtm"},l.createElement("input",{type:"checkbox",checked:this.state.termsAccepted,onChange:this._onTermsCheckboxChanged}),t._("I agree to the {link}",[t.param("link",l.createElement(j,{target:"_blank",href:g.CUSTOM_AUDIENCE_TOS},"Facebook Custom Audiences Terms"))])))),l.createElement(p,null,l.createElement(o,{use:"confirm",onClick:this._onCreateAudienceButtonClick,disabled:this._getShouldDiableCreateButton(),label:"Create Audience"}))));},_getShouldDiableCreateButton:function(){var v=this._getSelectedListIDs();return !this.state.termsAccepted||v.length===0;},_onTermsCheckboxChanged:function(v){this.setState({termsAccepted:v.target.checked});},_loadPreviousPage:function(){this.props.onLoadContactsLists(this.props.currentPage-1);},_loadNextPage:function(){this.props.onLoadContactsLists(this.props.currentPage+1);},_getSelectedListsSentence:function(){var v=this._getSelectedListIDs().length;if(v===0){return ("No list selected");}else if(v===1){return ("1 list selected");}else return (t._("{numSelectedLists} lists selected",[t.param("numSelectedLists",v)]));},_getSelectedListIDs:function(){return Object.keys(this.state.selectedListIDs).filter(function(v){return this.state.selectedListIDs[v];}.bind(this));},_onListSelectionChange:function(v){var w=this.state.selectedListIDs;w[v]=!w[v];this.setState({selectedListIDs:w});},_onSelectAllLists:function(){var v=this.state.selectedListIDs;(this.props.contactsLists||[]).forEach(function(w){v[w.list_id]=true;});this.setState({selectedListIDs:v});},_onDeselectAllLists:function(){var v=this.state.selectedListIDs;(this.props.contactsLists||[]).forEach(function(w){v[w.list_id]=false;});this.setState({selectedListIDs:v});},_onCreateAudienceButtonClick:function(){this.props.onCreateAudienceClick(this.state.selectedListIDs);}});e.exports=u;},null);
__d("AdsClearableTextInput.react",["XUITextInput.react","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","XUICloseButton.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n=l.createClass({displayName:"AdsClearableTextInput",propTypes:{id:l.PropTypes.string,height:l.PropTypes.string,onChange:l.PropTypes.func.isRequired,placeholder:l.PropTypes.string,value:l.PropTypes.string},getInitialState:function(){return {inputValue:this.props.value};},render:function(){return (l.createElement("div",{id:"clearableInput"},this._renderClearableInput()));},_renderClearableInput:function(){return (l.createElement("div",null,l.createElement(i,null,l.createElement(h,null,l.createElement(g,{className:"_14e8",placeholder:this.props.placeholder,value:this.state.inputValue,height:this.props.height,onChange:this._onChange})),l.createElement(j,{horizontal:"right",vertical:"top"},l.createElement(k,{onClick:this._onClearInput,className:"_2kaq"})))));},_onClearInput:function(o){var p='';this.setState({inputValue:p});this.props.onChange(p);},_onChange:function(o){this.setState({inputValue:o.target.value});this.props.onChange(o.target.value);}});e.exports=n;},null);
__d("FBReplaceLink.react",["Link.react","React","fbt"],function(a,b,c,d,e,f,g,h,i){var j=h.createClass({displayName:"FBReplaceLink",propTypes:{label:h.PropTypes.string},getDefaultProps:function(){var k="Show";return {label:k};},getInitialState:function(){return {isReplaced:false};},_replace:function(){this.setState({isReplaced:true});},render:function(){if(this.state.isReplaced)return h.createElement("div",null,this.props.children);return (h.createElement("div",null,h.createElement(g,{onClick:this._replace},this.props.label)));}});e.exports=j;},null);
__d("AudienceNameAndDescriptionInput.react",["AdsClearableTextInput.react","FBReplaceLink.react","React","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=i.createClass({displayName:"AudienceNameAndDescriptionInput",propTypes:{audienceName:i.PropTypes.string.isRequired,description:i.PropTypes.string,onAudienceNameChange:i.PropTypes.func.isRequired,onDescriptionChange:i.PropTypes.func.isRequired},render:function(){return (i.createElement("div",null,i.createElement("div",{className:"_3-8z _3-97"},i.createElement(j,{weight:"bold",display:"block",shade:"medium",className:"_3-95"},"Audience Name"),i.createElement(g,{placeholder:"Name your audience",height:"tall",value:this.props.audienceName,onChange:this.props.onAudienceNameChange})),this._renderDescription()));},_renderDescription:function(){if(this.props.description){return this._renderClearableDescription();}else return (i.createElement(h,{label:"Add a description"},this._renderClearableDescription()));},_renderClearableDescription:function(){return (i.createElement("div",{className:"_3-8z _3-97"},i.createElement(j,{weight:"bold",shade:"medium",display:"block",className:"_3-95"},"Description"),i.createElement(g,{placeholder:"Add a description",height:"tall",value:this.props.description||'',onChange:this.props.onDescriptionChange})));}});e.exports=m;},null);
__d("AudienceManagerUploadCompleteDialogContent.react",["AudienceManagerCompleteUploadMessage.react","AudienceManagerCompleteUploadNotice.react","AudienceNameAndDescriptionInput.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';var p=j.createClass({displayName:"AudienceManagerUploadCompleteDialogContent",propTypes:{numberOfValidRecords:j.PropTypes.number,numberOfTotalRecords:j.PropTypes.number,audiences:j.PropTypes.object.isRequired,errorTokenLists:j.PropTypes.array,allowNextStep:j.PropTypes.bool.isRequired,onNextClick:j.PropTypes.func.isRequired,onCompleteClick:j.PropTypes.func.isRequired},getInitialState:function(){return {updatedAudiences:{}};},render:function(){var q="Thanks for creating a Custom Audience";return (j.createElement("div",null,j.createElement(k,null,j.createElement("div",{className:"_50_z"},j.createElement(g,{message:q,numberOfValidRecords:this.props.numberOfValidRecords,numberOfTotalRecords:this.props.numberOfTotalRecords,errorTokenLists:this.props.errorTokenLists}),j.createElement("hr",null),this._renderUploadCompleteInput(),j.createElement(h,null))),j.createElement(m,null,this._renderButton())));},_renderButton:function(){if(this.props.allowNextStep)return (j.createElement(l,{use:"confirm",onClick:this._onNextClick,label:"Next"}));return (j.createElement(l,{onClick:this._onCompleteClick,label:"Done"}));},_renderUploadCompleteInput:function(){var q=[];for(var r in this.props.audiences)q.push(this._renderUpdateAudienceInput(this.props.audiences[r].name,r));return q;},_renderUpdateAudienceInput:function(q,r){var s=function(u){this._onAudienceNameInputChange(u,r);}.bind(this),t=function(u){this._onDescriptionInputChange(u,r);}.bind(this);return (j.createElement(i,{key:r,audienceName:q,onAudienceNameChange:s,onDescriptionChange:t}));},_onAudienceNameInputChange:function(q,r){this._updateAudienceStateByField('name',q,r);},_onDescriptionInputChange:function(q,r){this._updateAudienceStateByField('description',q,r);},_updateAudienceStateByField:function(q,r,s){var t={};if(this.state.updatedAudiences[s]){t=this.state.updatedAudiences[s];}else Object.assign(t,this.props.audiences[s]);t[q]=r;var u=this.state.updatedAudiences;u[s]=t;this.setState({updatedAudiences:u});},_onCompleteClick:function(){this.props.onCompleteClick(this.state.updatedAudiences);},_onNextClick:function(){this.props.onNextClick(this.state.updatedAudiences);}});e.exports=p;},null);
__d("AudienceManagerUploadDialogContent.react",["AdsXUIProgressBar.react","React","XUIDialogBody.react","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=h.createClass({displayName:"AudienceManagerUploadDialogContent",propTypes:{progress:h.PropTypes.number.isRequired},render:function(){return (h.createElement(i,null,h.createElement(g,{className:"_5go",animated:true,value:this.props.progress}),h.createElement("div",{className:"_5gp"},h.createElement(j,{weight:"bold",size:"small"},"UPLOADING"))));}});e.exports=m;},null);
__d("AudienceManagerUploadErrorDialogContent.react",["AudienceManagerDownloadReportLink.react","Image.react","React","XUIDialogBody.react","XUIButton.react","cx","fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o='/images/ads/audience_manager/error.png',p=i.createClass({displayName:"AudienceManagerUploadErrorDialogContent",propTypes:{numLines:i.PropTypes.number,numErrors:i.PropTypes.number.isRequired,errorTokenLists:i.PropTypes.array,onUploadAnotherFileClick:i.PropTypes.func.isRequired,onContinueCreateAudience:i.PropTypes.func.isRequired},getDefaultProps:function(){return {numLines:1};},render:function(){return (i.createElement(j,null,i.createElement("div",{className:"_50_z _5wby"},this._renderErrorMessage(),this._renderErrorSampleMessage(),i.createElement(g,{errorTokenLists:this.props.errorTokenLists}),i.createElement("div",null,"You can choose a new file or continue uploading file."),this._renderButtons())));},_renderErrorMessage:function(){var q;if(this.props.numLines<n.CLUSTER_API_MAX_SIZE){q=m._("We found {numErrors} errors in your file",[m.param("numErrors",this.props.numErrors)]);}else q=m._("We found {numErrors} errors in the first 10,000 records of your file",[m.param("numErrors",this.props.numErrors)]);return (i.createElement("div",null,i.createElement(h,{src:o,className:"_2pii"}),i.createElement("span",{className:"_5wb_ _1ols"},q)));},_renderErrorSampleMessage:function(){var q=(this.props.errorTokenLists||[]).slice(0,2),r=q.join("; ");return (i.createElement("div",null,m._("E.g. {errorTokens}",[m.param("errorTokens",r)])));},_renderButtons:function(){return (i.createElement("div",{className:"_3-8x"},i.createElement(k,{onClick:this.props.onUploadAnotherFileClick,label:"Choose a New File"}),i.createElement("span",{className:"_2pis _2pii"},"OR"),i.createElement(k,{onClick:this.props.onContinueCreateAudience,label:"Continue Uploading File"})));}});e.exports=p;},null);
__d("AudienceManagerUploadFileErrorDialogContent.react",["Image.react","React","XUIDialogBody.react","XUIButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m='/images/ads/audience_manager/error.png',n=h.createClass({displayName:"AudienceManagerUploadFileErrorDialogContent",propTypes:{errorDetails:h.PropTypes.string.isRequired,onUploadAnotherFileClick:h.PropTypes.func.isRequired},render:function(){return (h.createElement(i,null,h.createElement("div",{className:"_50_z _5wby"},this._renderErrorMessage(),this._renderErrorDetailsMessage(),this._renderButtons())));},_renderErrorMessage:function(){var o="We are not able to upload your file.";return (h.createElement("div",null,h.createElement(g,{src:m,className:"_2pii"}),h.createElement("span",{className:"_5wb_ _1ols"},o)));},_renderErrorDetailsMessage:function(){return (h.createElement("div",null,l._("Error: {error details}",[l.param("error details",this.props.errorDetails)])));},_renderButtons:function(){return (h.createElement("div",{className:"_3-8x"},h.createElement(j,{onClick:this.props.onUploadAnotherFileClick,href:{url:'#'},label:"Choose a New File"})));}});e.exports=n;},null);
__d("AudienceManagerWorkflowTypes",[],function(a,b,c,d,e,f){e.exports={DATA_FILE:'datafile',MAIL_CHIMP:'mailchimp',COPY_PASTE:'copypaste',MACA:'maca',WCA:'wca',PIXEL_DETAILS:'pixel',LOOKALIKE:'lal'};},null);
__d("AudienceManagerCreateAudienceDialogV2.react",["AdInterfacesUiLogger","AdsAMCreateAudienceServerActions","AdsAMCreateAudienceStore","AdsAMCreateAudienceViewActions","AdsAMViewActions","AdsCreateMobileRemarketingAudienceDialog.react","AudienceManagerNextStepDialogContent.react","AudienceManagerLookalikeDialog.react","AudienceManagerCopyPasteInitDialogContent.react","AudienceManagerCreateAudienceInitDialogContent.react","AudienceManagerCustomerListDialogContent.react","AudienceManagerCreateAudienceFileImportInitDialogContent.react","AudienceManagerLoggingEvents","AudienceManagerMailChimpInitDialogContent.react","AudienceManagerMailChimpSelectListDialogContent.react","AudienceManagerUIConstants","AudienceManagerUploadCompleteDialogContent.react","AudienceManagerUploadDialogContent.react","AudienceManagerUploadErrorDialogContent.react","AudienceManagerUploadFileErrorDialogContent.react","AudienceManagerWorkflowTypes","CreateCADialogTypes","CreateCAStages","PopupWindow","React","StoreBasedStateMixin","URI","XUIDialog.react","XUIDialogTitle.react","XUISpinner.react","XUIText.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na){var oa=new ga('/ads/manage/mailchimp_auth_init/'),pa="",qa=ea.createClass({displayName:"AudienceManagerCreateAudienceDialogV2",mixins:[fa(i)],propTypes:{onAudienceAdded:ea.PropTypes.func.isRequired,accountID:ea.PropTypes.string.isRequired,tosAccepted:ea.PropTypes.object.isRequired,tosRequirementsForAccount:ea.PropTypes.object.isRequired,onCancel:ea.PropTypes.func.isRequired,defaultMobileApp:ea.PropTypes.object,autoLaunch:ea.PropTypes.object,allowNextStep:ea.PropTypes.bool},getDefaultProps:function(){return {allowNextStep:false};},calculateState:function(){return {viewDialogType:i.getViewDialogType(),viewStage:i.getViewStage(),numberOfRecords:i.getNumberOfRecords(),audiences:i.getAudiences(),currentPage:i.getCurrentPage(),totalPage:i.getTotalPage(),progress:i.getProgress(),contactsLists:i.getContactsLists(),selectableContactsLists:i.getSelectableContactsLists(),errorTokenLists:i.getErrorTokenLists(),errorDetailsForLimitReach:i.getErrorDetailsForLimitReach(),errorMessage:i.getErrorMessage()};},componentDidMount:function(){this.refs.dialog.layer.updatePosition=ma;g.log(s.AM_CA_CREATE_DIALOG_LOAD,{auto_launch:this.props.autoLaunch});if(this.props.autoLaunch)switch(this.props.autoLaunch.workflow_id){case aa.DATA_FILE:setTimeout(function(){return j.setViewStage(ca.FILE_IMPORT_INIT);});break;case aa.MAIL_CHIMP:setTimeout(function(){return j.setViewStage(ca.MAIL_CHIMP_INIT);});break;case aa.COPY_PASTE:setTimeout(function(){return j.setViewStage(ca.COPY_PASTE_INIT);});break;case aa.MACA:setTimeout(function(){return j.setViewDialogType(ba.MACA);});break;}},render:function(){switch(this.state.viewDialogType){case ba.MACA:var ra=this.props.autoLaunch?this.props.autoLaunch.workflow_config:null;return (ea.createElement(l,{dao:this.props.dao,onAudienceAdded:this.props.onAudienceAdded,onCancel:this._onCancel,accountID:this.props.accountID,tosAccepted:this.props.tosAccepted,tosRequirementsForAccount:this.props.tosRequirementsForAccount,defaultMobileApp:this.props.defaultMobileApp,config:ra}));case ba.LOOKALIKE:var sa=this.state.audiences[Object.keys(this.state.audiences)[0]];return (ea.createElement(n,{dao:this.props.dao,accountID:this.props.accountID,audience:sa,onAudienceAdded:this.props.onAudienceAdded,onClose:this._onFinishCreation}));case ba.CUSTOMER_LIST:return (ea.createElement(ha,{layerHideOnBlur:false,shown:true,ref:"dialog",width:v.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle},ea.createElement(ia,null,ea.createElement(ka,{weight:"bold",size:"medium"},"Create a Custom Audience")),this._renderDialogContentForStage()));}},_renderDialogContentForStage:function(){switch(this.state.viewStage){case ca.CREATE_AUDIENCE_INIT:return (ea.createElement(p,{onCancel:this._onCancel,onCustomerListClick:this._onCustomerListClick,onWebsiteTrafficClick:this._onWebsiteTrafficClick,onMobileAppClick:this._onMobileAppClick}));case ca.CUSTOMER_LIST:return (ea.createElement(q,{onBack:this._onCustomerListBack,onUploadFileClick:this._onUploadFileClick,onCopyPasteClick:this._onCopyPasteClick,onThirdPartyClick:this._onThirdPartyClick}));case ca.FILE_IMPORT_INIT:return (ea.createElement(r,{accountID:this.props.accountID,onBack:this._onInitBackToCustomerList,onCreateAudienceClick:this._onFileImportCreateAudienceClick}));case ca.COPY_PASTE_INIT:return (ea.createElement(o,{accountID:this.props.accountID,onBack:this._onInitBackToCustomerList,onCreateAudienceClick:this._onCopyPasteCreateAudienceClick}));case ca.MAIL_CHIMP_INIT:return (ea.createElement(t,{onBack:this._onInitBackToCustomerList,onLogInToMailChimpClick:this._onLogInToMailChimpClick}));case ca.MAIL_CHIMP_AUTHENTICATE:case ca.FILE_IMPORT_CHECK_FILE:return (ea.createElement("div",{className:"_3773"},ea.createElement(ja,{background:"light",size:"large"})));case ca.MAIL_CHIMP_FETCH_COMPLETE:return (ea.createElement(u,{contactsLists:this.state.contactsLists,totalPage:this.state.totalPage,currentPage:this.state.currentPage,onLoadContactsLists:this._onLoadContactsLists,onCreateAudienceClick:this._onMailChimpCreateAudienceClick}));case ca.MAIL_CHIMP_UPLOAD:case ca.COPY_PASTE_UPLOAD:case ca.FILE_IMPORT_UPLOAD:return (ea.createElement(x,{progress:this.state.progress}));case ca.FILE_IMPORT_UPLOAD_CONVERT_ERROR:case ca.FILE_IMPORT_NO_VALID_ENTRY:return (ea.createElement(z,{errorDetails:this.state.errorMessage,onUploadAnotherFileClick:this._onFileImportAnotherFileClick}));case ca.MAIL_CHIMP_UPLOAD_COMPLETE:case ca.COPY_PASTE_UPLOAD_COMPLETE:case ca.FILE_IMPORT_UPLOAD_COMPLETE:return (ea.createElement(w,{numberOfValidRecords:this.state.numberOfRecords.validRecord,numberOfTotalRecords:this.state.numberOfRecords.totalRecord,errorTokenLists:this.state.errorTokenLists,audiences:this.state.audiences,onCompleteClick:this._onUploadCompleteClick,onNextClick:this._onUploadCompleteNextClick,allowNextStep:this.props.allowNextStep}));case ca.FILE_IMPORT_UPLOAD_ERROR:return (ea.createElement(y,{numLines:this.state.errorDetailsForLimitReach.numLines,numErrors:this.state.errorDetailsForLimitReach.numErrors,errorTokenLists:this.state.errorTokenLists,onUploadAnotherFileClick:this._onFileImportAnotherFileClick,onContinueCreateAudience:this._onFileImportContinueCreateAudienceClick}));case ca.CREATION_COMPLETE_NEXT_STEP:return (ea.createElement(m,{onFinish:this._onFinishCreation,onCreateAdClick:this._onCreateAdClick,onCreateLookalikeClick:this._onCreateLookalikeClick}));}},_onCustomerListClick:function(){g.log(s.AM_CA_CREATE_CUSTOMER_LIST_CLICK);j.setViewStage(ca.CUSTOMER_LIST);},_onWebsiteTrafficClick:function(){g.log(s.AM_CA_CREATE_WCA_CLICK);k.showWCADialog(null);this.props.onCancel();},_onMobileAppClick:function(){g.log(s.AM_CA_CREATE_MACA_CLICK);j.showMobileAppDialog();},_onCustomerListBack:function(){g.log(s.AM_CA_CREATE_CUSTOMER_LIST_BACK_CLICK);j.setViewStage(ca.CREATE_AUDIENCE_INIT);},_onUploadFileClick:function(){g.log(s.AM_CA_CREATE_FILE_IMPORT_CLICK);j.setViewStage(ca.FILE_IMPORT_INIT);},_onCopyPasteClick:function(){g.log(s.AM_CA_CREATE_COPY_PASTE_CLICK);j.setViewStage(ca.COPY_PASTE_INIT);},_onThirdPartyClick:function(){g.log(s.AM_CA_CREATE_MAIL_CHIMP_CLICK);j.setViewStage(ca.MAIL_CHIMP_INIT);},_onInitBackToCustomerList:function(){g.log(s.AM_CA_CREATE_BACK_TO_CUSTOMER_LIST_CLICK,{from_view:this.state.viewStage});j.setViewStage(ca.CUSTOMER_LIST);},_onFileImportCreateAudienceClick:function(ra,sa,ta,ua){g.log(s.AM_CA_CREATE_FILE_IMPORT_CREATE_AUDIENCE_CLICK);j.startFileImport(this.props.accountID,ra,sa,ta,this.props.tosRequirementsForAccount.custom_audience,ua);},_onFileImportContinueCreateAudienceClick:function(){g.log(s.AM_CA_CREATE_FILE_IMPORT_CONTINUE_CREATE_AUDIENCE_CLICK);h.continueUploadSelectedFileToServer();},_onFileImportAnotherFileClick:function(){g.log(s.AM_CA_CREATE_FILE_IMPORT_CHOOSE_ANOTHER_FILE_CLICK);j.setViewStage(ca.FILE_IMPORT_INIT);},_onCopyPasteCreateAudienceClick:function(ra,sa,ta,ua){g.log(s.AM_CA_CREATE_COPY_PASTE_CREATE_AUDIENCE_CLICK);j.startCopyPasteUpload(this.props.accountID,ra,sa,ta,this.props.tosRequirementsForAccount.custom_audience,ua);},_getAudiencesNeedUpdate:function(ra){var sa=[];for(var ta in ra){var ua=ra[ta].name,va=ra[ta].description;if(ua!==this.state.audiences[ta].name||!!va)sa.push(ra[ta]);}return sa;},_onUploadCompleteClick:function(ra){var sa=this._getAudiencesNeedUpdate(ra);g.log(s.AM_CA_CREATE_UPLOAD_COMPLETE_CLICK,{audiences_need_update:sa,from_view:this.state.viewStage,audiences:this.state.audiences});j.updateAudiencesNameDescription(this.props.accountID,sa,this._onFinishCreation);},_onUploadCompleteNextClick:function(ra){var sa=this._getAudiencesNeedUpdate(ra);g.log(s.AM_CA_CREATE_UPLOAD_COMPLETE_CLICK,{audiences_need_update:sa,from_view:this.state.viewStage,audiences:this.state.audiences});var ta=function(){j.setViewStage(ca.CREATION_COMPLETE_NEXT_STEP);};j.updateAudiencesNameDescription(this.props.accountID,sa,ta);},_onCreateAdClick:function(){g.log(s.AM_CA_CREATE_CREATE_AD_CLICK,{audiences:this.state.audiences});h.batchCreateAd(this.props.accountID,this.state.audiences);this._onFinishCreation();},_onCreateLookalikeClick:function(){g.log(s.AM_CA_CREATE_CREATE_LAL_CLICK,{audiences:this.state.audiences});j.setViewDialogType(ba.LOOKALIKE);},_onLogInToMailChimpClick:function(){g.log(s.AM_CA_CREATE_LOG_INTO_MAIL_CHIMP_CLICK);j.setViewStage(ca.MAIL_CHIMP_AUTHENTICATE);window.handleMailChimpCredential=this._handleMailChimpCredential;da.open(oa,v.MAILCHIMP_WINDOW_HEIGHT,v.MAILCHIMP_WINDOW_WIDTH);},_handleMailChimpCredential:function(ra){pa=ra;j.handleMailChimpLogin(this.props.accountID,ra);},_onLoadContactsLists:function(ra){j.loadContactsList(this.props.accountID,pa,ra);},_onMailChimpCreateAudienceClick:function(ra){var sa=this._getSelectedLists(ra);g.log(s.AM_CA_CREATE_MAIL_CHIMP_CREATE_AUDIENCE_CLICK,{selected_lists_num:sa.length});j.startMailChimpUpload(this.props.accountID,sa,this.props.tosRequirementsForAccount.custom_audience,pa);},_getSelectedLists:function(ra){var sa=[];Object.keys(ra).forEach(function(ta){if(ra[ta])sa.push(this.state.selectableContactsLists[ta]);}.bind(this));return sa;},_onFinishCreation:function(){Object.keys(this.state.audiences).forEach(function(ra){this.props.onAudienceAdded(ra);}.bind(this));g.log(s.AM_CA_CREATE_FINISH_CREATION_SUCCESS,{audiences:this.state.audiences});this._onCancel();},_onToggle:function(ra){if(!ra){g.log(s.AM_CA_CREATE_CLOSE_DIALOG);this._onCancel();}},_onCancel:function(){this.props.onCancel();j.reset();}});e.exports=qa;},null);
__d("WebRemarketingDialogGear.react",["AudienceManagerURLConstants","ContextualDialogArrow","ContextualLayerAutoFlip","Image.react","PopoverMenu.react","React","XUIButton.react","ReactXUIMenu","XUIMenuSeparator.react","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=n.Item,s="pixel",t=l.createClass({displayName:"WebRemarketingDialogGear",propTypes:{learnMoreURL:l.PropTypes.string,onViewPixelCode:l.PropTypes.func},render:function(){return (l.createElement(k,{menu:l.createElement(n,{onItemClick:this._handleItemClick},this._getMenuItems()),layerBehaviors:[i,h]},l.createElement(m,{image:l.createElement(j,{src:q('/images/ui/x/image/gear.png')})})));},_getMenuItems:function(){var u=[];u.push(this._getViewPixelCodeMenuItem());u.push(this._getlearnMoreMenuItem());u=u.filter(function(v){return !!v;});if(u.length)u.push(l.createElement(o,null));u.push(this._getFeedbackMenuItem());return u;},_getViewPixelCodeMenuItem:function(){if(!this.props.onViewPixelCode)return;return (l.createElement(r,{value:s},"View Pixel Code"));},_getlearnMoreMenuItem:function(){if(!this.props.learnMoreURL)return;return (l.createElement(r,{href:this.props.learnMoreURL,target:"_blank"},"Learn More"));},_getFeedbackMenuItem:function(){return (l.createElement(r,{href:g.WCA_FEEDBACK,target:"_blank"},"Send Feedback"));},_handleItemClick:function(u,v){switch(v.item.getValue()){case s:this.props.onViewPixelCode();break;}}});e.exports=t;},null);
__d("WebsiteCustomAudienceConfirmationDialog.react",["AudienceManagerURLConstants","React","WebRemarketingDialogGear.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIDialogTitle.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=h.createClass({displayName:"WebsiteCustomAudienceConfirmationDialog",propTypes:{pixel:h.PropTypes.object.isRequired},render:function(){var q="Your audience is ready.";if(!this.props.pixel||!this.props.pixel.last_fired_time)q="Finish setting up your Custom Audience pixel code to start adding people to this audience.";return (h.createElement("div",null,h.createElement(m,null,"Website Custom Audience Created"),h.createElement(j,null,h.createElement("div",{className:"_qtd"},h.createElement("div",{className:"_5saq"},h.createElement("div",{className:"_5svr _5svs"},"Thank You for Creating a Custom Audience"),h.createElement("p",null,q)))),h.createElement(k,{leftContent:h.createElement(i,{learnMoreURL:g.WCA_GETTING_STARTED})},h.createElement(l,{use:"confirm",action:"cancel"}))));}});e.exports=p;},null);
__d("WebsiteCustomAudienceNUXDialog.react",["AdInterfacesUiLogger","AudienceManagerLoggingEvents","AudienceManagerURLConstants","Link.react","React","Image.react","WebRemarketingDialogGear.react","XRemarketingTOSControllerURIBuilder","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUISpinner.react","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x={DEFAULT:1,CREATING_PIXEL:2},y=k.createClass({displayName:"WebsiteCustomAudienceNUXDialog",propTypes:{accountID:k.PropTypes.string.isRequired,dao:k.PropTypes.object.isRequired,pixel:k.PropTypes.object,tosAccepted:k.PropTypes.object.isRequired,tosRequirementsForAccount:k.PropTypes.object.isRequired,onPixelCreated:k.PropTypes.func.isRequired,onGotoRuleBuilder:k.PropTypes.func.isRequired,onGotoViewPixelCode:k.PropTypes.func.isRequired},getInitialState:function(){return {tosCheckboxSelected:false,viewState:x.DEFAULT};},render:function(){return (k.createElement("div",null,k.createElement(s,null,"Create a Custom Audience from your Website"),k.createElement(o,null,k.createElement("div",{className:"_qtd"},k.createElement("p",null,"Show ads to people who visit your website."),k.createElement("p",null,"You can set up your audience to include everyone who visits your website, or even create separate audiences for people who visit specific pages on your website."),k.createElement("p",null,"Install the Custom Audience pixel on your website to start building your audience automatically. You can also send this code directly to the person who manages your website."),this._renderPixelStateInfo(),k.createElement("div",null,k.createElement("input",{type:"checkbox",checked:this._getIsTosAccepted()||this.state.tosCheckboxSelected,onChange:this._tosCheckboxChanged,disabled:this._getIsTosAccepted()},v._("I have read and accepted the {=Terms for Custom Audience from your Mobile App and Website}",[v.param("=Terms for Custom Audience from your Mobile App and Website",k.createElement(j,{target:"_blank",href:(new n()).setInt('act',this.props.accountID).getURI()},"Terms for Custom Audience from your Mobile App and Website"))]))))),k.createElement(r,{leftContent:k.createElement(m,{learnMoreURL:i.WCA_GETTING_STARTED})},this._renderFooter())));},_renderFooter:function(){switch(this.state.viewState){case x.DEFAULT:if(!!this.props.pixel)return (k.createElement("div",null,k.createElement(q,null),k.createElement(p,{use:"confirm",onClick:function(){g.log(h.AM_WCA_NUX_CREATE_AUDIENCE);this._acceptTOSIfNeededAndProceed(this.props.onGotoRuleBuilder);}.bind(this),disabled:!this._getCanProceedFromNux(),label:"Create Audience"})));return (k.createElement("div",null,k.createElement(q,null),k.createElement(p,{use:"confirm",onClick:this._onCreatePixel,disabled:!this._getCanProceedFromNux(),label:"Create Web Remarketing Pixel"})));case x.CREATING_PIXEL:return (k.createElement("div",null,k.createElement(t,{className:"_5swe",size:"small",background:"light"}),k.createElement(q,{disabled:true}),k.createElement(p,{use:"confirm",disabled:true,label:"Create Custom Audience Pixel"})));}},_renderPixelStateInfo:function(){if(!this.props.pixel)return k.createElement("span",null);if(this.props.pixel.last_fired_time){return (k.createElement("p",null,k.createElement(j,{onClick:function(){return this._acceptTOSIfNeededAndProceed(this.props.onGotoViewPixelCode);}.bind(this)},"View your Custom Audience pixel code")));}else return (k.createElement("div",{className:"_5yhs"},k.createElement(l,{className:"_5svn _47aw",src:w('/images/ads/audience_manager/warning.png')}),k.createElement("div",{className:"_5svn _47ax"},k.createElement("div",{className:"_47av"},"You haven't finished setting up your Custom Audience pixel."),k.createElement(j,{onClick:function(){return this._acceptTOSIfNeededAndProceed(this.props.onGotoViewPixelCode);}.bind(this)},"View your Custom Audience pixel code")),k.createElement("div",{className:"_5svo"})));},_acceptTOSIfNeededAndProceed:function(z){if(!this._getIsTosAccepted())return this._acceptTos(z);z();},_onCreatePixel:function(){this.setState({viewState:x.CREATING_PIXEL});g.log(h.AM_WCA_NUX_CREATE_PIXEL);this._acceptTOSIfNeededAndProceed(this._createPixel);},_createPixel:function(){this.props.dao.add.createAdsPixel.one(function(z){g.log(h.AM_WCA_NUX_CREATE_PIXEL_SUCCESS);this.props.onPixelCreated();}.bind(this),{accountId:this.props.accountID});},_acceptTos:function(z){this.props.dao.add.acceptCustomAudiencesTos.one(function(){z&&z();g.log(h.AM_WCA_TOS_ACCEPT_SUCCESS);},{tos_id:this.props.tosRequirementsForAccount.website_custom_audience,accountId:this.props.accountID,handleError:function(aa,ba){g.log(h.AM_WCA_TOS_ACCEPT_FAILURE);this.setState({errorMessage:ba.error.message});}.bind(this)});},_getCanProceedFromNux:function(){return (this._getIsTosAccepted()||this.state.tosCheckboxSelected);},_getIsTosAccepted:function(){var z=this.props.tosRequirementsForAccount.website_custom_audience;return this.props.tosAccepted.hasOwnProperty(z)&&(this.props.tosAccepted[z]==1);},_tosCheckboxChanged:function(event){this.setState({tosCheckboxSelected:event.target.checked});}});e.exports=y;},null);
__d("WebsiteCustomAudienceOperators",["fbt"],function(a,b,c,d,e,f,g){var h={EQ:{value:'eq',label:"equals",isNumeric:false},NEQ:{value:'neq',label:"!=",isNumeric:false},LT:{value:'lt',label:"\u003C",isNumeric:true},GT:{value:'gt',label:">",isNumeric:true},GTE:{value:'gte',label:">=",isNumeric:true},LTE:{value:'lte',label:"\u003C=",isNumeric:true},CONTAINS:{value:'i_contains',label:"contains",isNumeric:false},NOT_CONTAINS:{value:'i_not_contains',label:"not cont.",isNumeric:false}},i={EQ:{value:'eq',label:"Equals",isNumeric:false},CONTAINS:{value:'i_contains',label:"Contains",isNumeric:false}},j={EQ:{value:'eq',label:"URL equals",isNumeric:false},CONTAINS:{value:'i_contains',label:"URL contains",isNumeric:false}};e.exports={GenericOperators:h,SimpleOperators:i,URLOperators:j};},null);
__d("WebsiteCustomAudienceModel",["isEmpty","WebsiteCustomAudienceTrafficType","WebsiteCustomAudienceOperators"],function(a,b,c,d,e,f,g,h,i){var j=i.GenericOperators,k=i.URLOperators,l=function(){this.id=null;this.name='';this.description='';this.inclusion_rules=[new o()];this.exclusion_rules=[new o()];this.duration=30;this.trafficType=h.ALL_WEBSITE_VISITORS;this.isRuleEditable=true;},m=0,n=function(){this.key=m++;this.filter=j.CONTAINS.value;this.tokens=[];this.customfield=null;},o=function(){this.id=null;this.key=m++;this.scope='url';this.clauses=[new n()];this.event=null;},p={getAllVisitors:function(){var r=new o();r.clauses[0].tokens.push("");return r;},getDeprecatedAllVisitors:function(){var r=new o();r.clauses[0].tokens.push("/");return r;},isDeprecatedAllVisitors:function(r){return r===q.serializeRule(p.getDeprecatedAllVisitors());},isAllVisitors:function(r){return p.isDeprecatedAllVisitors(r)||q.serializeRule(p.getAllVisitors())===r;}},q={isEventBasedRule:function(r){return r.scope==='event';},migrateAtomicRule:function(r){if(g(r))return null;var s=Object.keys(r)[0];if(s.toLowerCase()==='domain'||s.toLowerCase()==='path')if(Object.keys(r)[0]=='i_not_contains'){return null;}else{r.url=r[s];s='url';}if(s.toLowerCase()!='url')return null;var t=r[s],u=Object.keys(t)[0],v=t[u];if(!q._containsOperator(k,u))return null;return {scope:s,operator:u,token:v};},migrateRule:function(r){var s=new o(),t;if(q._isAtomic(r)){return this.migrateAtomicRule(r);}else if(r.and){for(var u=0;u<r.and.length;u++){var v=r.and[u];t=this.migrateRule(v);if(!t)return null;q._updateRuleClauseWithOrParse(t,s);}s.clauses=s.clauses.filter(function(aa){return q.validateRuleClauseWhenDeserialize(s,aa);});}else if(r.or){var w=[],x=null,y=null;for(var z=0;z<r.or.length;z++){if(!q._isAtomic(r.or[z]))return null;t=this.migrateAtomicRule(r.or[z]);if(!t)return null;if(!x){x=t.scope;}else if(x!==t.scope)return null;y=t.operator;w.push(t.token);}return {tokens:w,scope:x,filter:y};}if(q.isEventBasedRule(s)&&s.clauses.length===0)s.clauses=[new n()];return s;},validateRule:function(r){var s=r.clauses.filter(function(t){return q.validateRuleClause(r,t);});if(q.isEventBasedRule(r)){if(!r.event)return false;if(r.clauses.length)return (s.length>0);return true;}return (s.length>0);},validateRuleClause:function(r,s){return (s.tokens.length>0||(q.isEventBasedRule(r)&&!s.customfield));},validateRuleClauseWhenDeserialize:function(r,s){return s.tokens.length>0;},serializeRule:function(r){if(q.isEventBasedRule(r))return q._serializeCustomEventRule(r);var s=[];for(var t=0;t<r.clauses.length;t++){var u=r.clauses[t];s.push(q._serializeClause(u,r.scope));}s=s.filter(function(v){return !!v;});if(s.length)return JSON.stringify({and:s});},_serializeCustomEventRule:function(r){var s=r.clauses.map(function(t){return q._serializeClause(t,t.customfield);}).filter(function(t){return !!t;});s.push(q._serializeRuleUnit(r.scope,j.EQ.value,r.event));return JSON.stringify({and:s});},_serializeClause:function(r,s){var t=[];for(var u=0;u<r.tokens.length;u++){var v=r.tokens[u];t.push(q._serializeRuleUnit(s,r.filter,v));}if(t.length)return {or:t};},_serializeRuleUnit:function(r,s,t){var u={};u[s]=t;var v={};v[r]=u;return v;},deserializeRule:function(r){try{if(p.isDeprecatedAllVisitors(r))return p.getAllVisitors();var t,u=JSON.parse(r);if(u.and){t=q._deserializeClausesFromAnd(u);}else if(u.or){var v=q._deserializeTokensFromOr(u);if(v&&v.tokens.length){t=new o();q._updateRuleClauseWithOrParse(v,t);t.clauses=t.clauses.filter(function(w){return q.validateRuleClauseWhenDeserialize(t,w);});}}else if(u.url)t=this._deserializeClausesFromAnd({and:[u]});if(!t)return t;if(q.isEventBasedRule(t)&&t.clauses.length===0)t.clauses=[new n()];return t;}catch(s){}},_deserializeClausesFromAnd:function(r){var s=new o();for(var t=0;t<r.and.length;t++){var u=r.and[t];if(u.or){var v=this._deserializeTokensFromOr(u);if(!v)return;q._updateRuleClauseWithOrParse(v,s);}else if(q._isAtomic(u)){v=this._deserializeTokensFromOr({or:[u]});if(!v)return;q._updateRuleClauseWithOrParse(v,s);}}s.clauses=s.clauses.filter(function(w){return q.validateRuleClauseWhenDeserialize(s,w);});return s;},_deserializeTokensFromOr:function(r){var s=[],t=null,u=null;for(var v=0;v<r.or.length;v++){var w=r.or[v];if(!q._isAtomic(w))return;var x=q._deserializeAtomicRule(w);if(!x)return;if(!t){t=x.scope;}else if(t!==x.scope)return;u=x.operator;s.push(x.token);}return {tokens:s,scope:t,filter:u};},_updateRuleClauseWithOrParse:function(r,s){if(!r||!r.tokens.length)return;var t=new n();switch(r.scope){case 'event':s.event=r.tokens[0];s.scope='event';return;case 'url':s.scope=r.scope;break;default:t.customfield=r.scope;}t.tokens=r.tokens;t.filter=r.filter;s.clauses.push(t);},_deserializeAtomicRule:function(r){if(g(r))return;var s=Object.keys(r)[0];if(s.toLowerCase()==='domain'||s.toLowerCase()==='path')return;var t=r[s],u=Object.keys(t)[0],v=t[u];if(s.toLowerCase()==='url'&&!q._containsOperator(k,u))return;return {scope:s,operator:u,token:v};},_isAtomic:function(r){return !r.or&&!r.and;},findRule:function(r,s){var t=q._findRuleInArray(r.inclusion_rules,s);if(!t)t=q._findRuleInArray(r.exclusion_rules,s);return t;},_findRuleInArray:function(r,s){for(var t=0;t<r.length;t++)if(r[t].key==s)return r[t];return null;},findRuleClause:function(r,s){return q._findRuleClauseInArray(r.inclusion_rules,s)||q._findRuleClauseInArray(r.exclusion_rules,s);},_findRuleClauseInArray:function(r,s){for(var t=0;t<r.length;t++){var u=r[t];for(var v=0;v<u.clauses.length;v++){var w=u.clauses[v];if(w.key==s)return w;}}return null;},_containsOperator:function(r,s){return Object.keys(r).some(function(t){return r[t].value===s;});}};e.exports={Audience:l,Operations:q,Rule:o,RuleClause:n,RuleTemplates:p};},null);
__d("WebsiteCustomAudienceRetention.react",["AdsHelpLink.react","AudienceManagerUIConstants","InfoTable.react","InfoTableRow.react","InfoTableSection.react","InputLabel.react","React","XUICheckboxInput.react","XUITextInput.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=m.createClass({displayName:"WebsiteCustomAudienceRetention",propTypes:{duration:m.PropTypes.number.isRequired,prefill:m.PropTypes.bool.isRequired,onChangeDuration:m.PropTypes.func.isRequired,onChangePrefill:m.PropTypes.func},getInitialState:function(){return {duration:this.props.duration.toString()};},componentWillReceiveProps:function(s){if(this.state.duration!==s.duration.toString())this.setState({duration:s.duration.toString()});},render:function(){return (m.createElement(i,null,m.createElement(k,null,m.createElement(j,{label:"In the last",helpLink:m.createElement(g,{position:"above",width:h.HELP_LINK_WIDTH},"The number of days people will remain in your audience after they visit your website. People will be removed from your audience after the set time period unless they visit your website again.",m.createElement("br",null),m.createElement("br",null),"Maximum time: 180 days"),type:"data"},m.createElement("div",null,m.createElement("div",null,m.createElement(o,{className:"_56mh",value:this.state.duration,onChange:function(event){return this.setState({duration:event.target.value});}.bind(this),onBlur:this._updateDuration}),m.createElement("span",{className:"_5r3z"},"days")),this._renderPrefill())))));},_renderPrefill:function(){if(!this.props.onChangePrefill)return;return (m.createElement("div",{className:"_5ns4"},m.createElement(l,null,m.createElement(n,{defaultChecked:this.props.prefill,onChange:function(event){return this.props.onChangePrefill(event.target.checked);}.bind(this)}),m.createElement("label",null,"Include past website traffic"))));},_updateDuration:function(){var s=parseInt(this.state.duration,10);if(!isNaN(s)&&s>0&&s<=180){this.props.onChangeDuration(s);}else this.setState({duration:this.props.duration.toString()});}});e.exports=r;},null);
__d("WebsiteCustomAudienceTrafficSelector.react",["AdsHelpLink.react","AudienceManagerUIConstants","InfoTable.react","InfoTableRow.react","InfoTableSection.react","React","XUISelector.react","XUIMenuSeparator.react","WebsiteCustomAudienceTrafficType","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=m.Option,r=l.createClass({displayName:"WebsiteCustomAudienceTrafficSelector",propTypes:{trafficType:l.PropTypes.number.isRequired,onChangeTrafficType:l.PropTypes.func},render:function(){return (l.createElement(i,null,l.createElement(k,null,l.createElement(j,{label:"Website traffic",helpLink:l.createElement(g,{position:"above",width:h.HELP_LINK_WIDTH},"Choose how you want to add people to your audience. Include all of your website visitors, or create rules that only add people who visit specific parts of your website."),type:"data"},l.createElement("div",null,l.createElement(m,{disabled:!this.props.onChangeTrafficType,size:"large",onChange:this.props.onChangeTrafficType,value:this.props.trafficType,maxwidth:0},l.createElement(q,{value:o.ALL_WEBSITE_VISITORS},"Anyone who visits your website"),l.createElement(q,{value:o.SPECIFIC_PAGE_VISITORS},"People who visit specific web pages"),l.createElement(q,{value:o.SPECIFIC_PAGE_VISITORS_WITH_EXCLUSION},"People visiting specific web pages but not others"),l.createElement(q,{value:o.CHURNED_VISITORS},"People who haven't visited in a certain amount of time"),l.createElement(n,null),l.createElement(q,{value:o.CUSTOM},"Custom Combination")))))));}});e.exports=r;},null);
__d("WebsiteCustomAudienceMetaInfo.react",["AudienceManagerTextInput","InfoTable.react","InfoTableRow.react","InfoTableSection.react","Link.react","React","XUITextInput.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=l.createClass({displayName:"WebsiteCustomAudienceMetaInfo",getInitialState:function(){return {showDescription:this.props.audience.description.length>0};},propTypes:{audience:l.PropTypes.object.isRequired,onUpdateAudienceFields:l.PropTypes.func.isRequired,enableValidation:l.PropTypes.bool.isRequired},render:function(){return (l.createElement(h,null,l.createElement(j,null,l.createElement(i,{label:"Audience Name",type:"data"},l.createElement("div",null,l.createElement(m,{className:(("_4u_")+(this.props.enableValidation&&!this.props.audience.name.length?' '+"_4b5f":'')),placeholder:"Enter a name for your audience",title:"Enter a name to create audience",value:this.props.audience.name,onChange:function(event){this.props.onUpdateAudienceFields(this.props.audience,{name:event.target.value});}.bind(this)}),this._renderDescriptionLink())),this._renderDescription())));},_renderDescriptionLink:function(){if(this.state.showDescription)return;return (l.createElement(k,{onClick:this.setState.bind(this,{showDescription:true},null)},"Add a description"));},_renderDescription:function(){if(!this.state.showDescription)return;return (l.createElement(i,{label:"Description"},l.createElement("div",null,l.createElement(g,{isTextArea:true,className:"_5w16",value:this.props.audience.description,placeholder:"Add an optional description of your audience",onChange:function(q){this.props.onUpdateAudienceFields(this.props.audience,{description:q});}.bind(this)}))));}});e.exports=p;},null);
__d("AdsPixelHostDataSource",["AbstractSearchSource","SearchableEntry"],function(a,b,c,d,e,f,g,h){var i=.05;for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(m,n,o){"use strict";this.hosts=[];this.$AdsPixelHostDataSource0=o;m.fetch.pixelInsights.one(this.$AdsPixelHostDataSource1.bind(this),{pixelId:n,start_time:'-7 days',aggregation:'host'});}l.prototype.$AdsPixelHostDataSource1=function(m){"use strict";if(!m.length)return;var n={},o=0;for(var p=0,q=m.length;p<q;p++){if(!m[p].hasOwnProperty('data'))return;var r=m[p].data;for(var s=0;s<r.length;s++){var t=r[s];o+=t.count;if(n.hasOwnProperty(t.value)){n[t.value]+=t.count;}else n[t.value]=t.count;}}for(var u in n)if(n[u]>o*i)this.hosts.push(u);this.$AdsPixelHostDataSource0();};l.prototype.searchImpl=function(m,n,o){"use strict";var p=[];m=m.toLowerCase();this.hosts.forEach(function(q){q=q.toLowerCase();if(q.contains(m))p.push(new h({uniqueID:q,title:q}));});n(p,m);};l.prototype.getHostNumber=function(){"use strict";return this.hosts.length;};e.exports=l;},null);
__d("AdsSearchHostTokenizerListItem.react",["AdsSBTokenizerConstants","AdsSBTokenizerWhiteBoxLayer.react","React","XUICloseButton.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=i.createClass({displayName:"AdsSearchHostTokenizerListItem",propTypes:{entry:i.PropTypes.object.isRequired,onRemoveEntry:i.PropTypes.func.isRequired,uniqueID:i.PropTypes.string.isRequired},getInitialState:function(){return {highlighted:false};},render:function(){return (i.createElement(h,{info:this.props.entry,type:g.ACTIVE_STATES.BROWSE,shown:this.state.highlighted,onMouseEnterBox:this._onMouseEnterBox,onMouseLeaveBox:this._onMouseLeaveBox,uniqueID:this.props.uniqueID},i.createElement("li",{className:"_5w24 _5ahx",onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,key:this.props.entry.getUniqueID()},this.props.entry.getTitle(),i.createElement(j,{size:"small",className:"_5w28 _5ah_",onClick:this.props.onRemoveEntry}))));},_onMouseEnter:function(){this.setState({highlighted:true});},_onMouseLeave:function(){this.setState({highlighted:false});},_onMouseEnterBox:function(){this.setState({highlighted:true});},_onMouseLeaveBox:function(){this.setState({highlighted:false});}});e.exports=l;},null);
__d("AdsSearchHostTokenizerList.react",["AdsSearchHostTokenizerListItem.react","React","cx"],function(a,b,c,d,e,f,g,h,i){var j=h.createClass({displayName:"AdsSearchHostTokenizerList",propTypes:{entries:h.PropTypes.array.isRequired,onRemoveEntry:h.PropTypes.func.isRequired,uniqueID:h.PropTypes.string.isRequired},render:function(){return (h.createElement("div",{className:"_5w21"},this.props.entries.map(this._toListItem)));},_toListItem:function(k){return (h.createElement(g,{entry:k,onRemoveEntry:function(){return this.props.onRemoveEntry(k);}.bind(this),uniqueID:this.props.uniqueID,key:k.getUniqueID()}));}});e.exports=j;},null);
__d("AdsSearchHostTokenizer.react",["AdsSBTypeahead.react","AdsSearchHostTokenizerList.react","React","SearchableEntry","AdsSB2TypeaheadEntriesView.react","fbt","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=450,o='AdsSearchHostTokenizer',p=i.createClass({displayName:"AdsSearchHostTokenizer",propTypes:{onUpdate:i.PropTypes.func.isRequired,tokens:i.PropTypes.array.isRequired,dataSource:i.PropTypes.object.isRequired},render:function(){return (i.createElement("div",{className:"_4g1r"},this.props.tokens.length?i.createElement(h,{entries:this._getEntries(),onRemoveEntry:this._onRemoveEntry,uniqueID:o}):null,i.createElement(g,{className:"_1qju",showEntriesOnFocus:true,excludedEntries:this._getExcludedEntries(),onSelectAttempt:this._onAddEntry,searchSource:this.props.dataSource,presenter:this._getPresenter(),placeholder:"Choose a website domain",ref:"typeahead"}),this._getBrowseButton()));},_getBrowseButton:function(){return (i.createElement("div",{onMouseDown:this._onBrowse,key:"browse",className:"_49v2 _4-97 _xkk"},"Browse",i.createElement("div",{className:"_ekn _xkl"})));},_onBrowse:function(){setTimeout((function(){this.refs.typeahead.clearTypeahead();this.refs.typeahead.focusTypeahead();}).bind(this),100);},_getEntries:function(){var q=[];this.props.tokens.forEach(function(r){if(r)q.push(new j({uniqueID:r,title:r}));});return q;},_getExcludedEntries:function(){var q={};this.props.tokens.forEach(function(r){return q[r]=true;});return q;},_onRemoveEntry:function(q){var r=this._getEntries().slice(),s=this.props.tokens.indexOf(q.getTitle());if(s!==false){r.splice(s,1);this.props.onUpdate(r);}},_onAddEntry:function(q){this.props.onUpdate(this._getEntries().concat([q]));},_getPresenter:function(){var q={ViewRenderer:k,useLayer:true};q.extraRendererProps={width:n,uniqueID:o,showWhiteBox:false};return q;}});e.exports=p;},null);
__d("WebsiteCustomAudienceRuleBuilderChooseDomain.react",["AdInterfacesUiLogger","AdsPixelHostDataSource","AdsSearchHostTokenizer.react","InfoTable.react","InfoTableRow.react","InfoTableSection.react","AudienceManagerLoggingEvents","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=n.createClass({displayName:"WebsiteCustomAudienceRuleBuilderChooseDomain",propTypes:{dao:n.PropTypes.object.isRequired,pixel:n.PropTypes.object.isRequired,rule:n.PropTypes.object.isRequired,onUpdateClauseFields:n.PropTypes.func.isRequired},getInitialState:function(){return {showComponent:false};},componentWillMount:function(){this._dataSource=new h(this.props.dao,this.props.pixel.id,this._onSourceChange);},render:function(){if(!this.state.showComponent)return n.createElement("script",null);return (n.createElement(j,{className:"_3af5"},n.createElement(l,null,n.createElement(k,null,n.createElement("span",null,n.createElement("div",{className:"_19g1"},"Include people who visit any page on the following websites (optional)."),n.createElement(i,{onUpdate:this._onUpdate,tokens:this.props.rule.clauses[0].tokens,dataSource:this._dataSource}))))));},_onSourceChange:function(){if(this._dataSource.getHostNumber()>1){this.setState({showComponent:true});g.log(m.AM_WCA_EDITOR_DOMAIN_SELECTOR_SHOWN);}},_onUpdate:function(r){var s=r.map(function(t){return t.getTitle();});this.props.onUpdateClauseFields(this.props.rule.clauses[0],{tokens:s});}});e.exports=q;},null);
__d("WebsiteCustomAudienceRuleBuilderChurners.react",["InfoTable.react","InfoTableRow.react","InfoTableSection.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=j.createClass({displayName:"WebsiteCustomAudienceRuleBuilderChurners",render:function(){return (j.createElement(g,{className:"_3af5"},j.createElement(i,null,j.createElement(h,null,j.createElement("div",{className:"_19g1"},"Include people who have visited your website in the last 180 days but haven't been back")))));}});e.exports=m;},null);
__d("AdsPixelEventDataSource",["AdsDaoGraph"],function(a,b,c,d,e,f,g){var h=['PixelInitialized','NoScript','__missing_event'],i=['null'];function j(k){"use strict";this.pixelID=k;}j.prototype.fetchEvents=function(k){"use strict";if(!this.pixelID)this.events={};if(this.events){k(this.events);return;}g.fetch.pixelInsights.one(function(l){return this.$AdsPixelEventDataSource0(l,k);}.bind(this),{pixelId:this.pixelID,start_time:'-7 days',aggregation:'event'});};j.prototype.fetchCustomFields=function(k,l){"use strict";if(this.events[k].fields){l(this.events);return;}g.fetch.pixelInsights.one(function(m){return this.$AdsPixelEventDataSource1(m,k,l);}.bind(this),{pixelId:this.pixelID,start_time:'-7 days',aggregation:'custom_data_field',event:k});};j.prototype.$AdsPixelEventDataSource0=function(k,l){"use strict";if(!k.length)return;k=this.$AdsPixelEventDataSource2(k);this.events=this.$AdsPixelEventDataSource3(k);l(this.events);};j.prototype.$AdsPixelEventDataSource1=function(k,l,m){"use strict";if(!k.length)return;k=this.$AdsPixelEventDataSource2(k);this.events[l].fields=this.$AdsPixelEventDataSource4(k);m(this.events);};j.prototype.$AdsPixelEventDataSource2=function(k){"use strict";var l={};for(var m=0;m<k.length;m++){var n=k[m].data;if(!n)continue;for(var o=0;o<n.length;o++){var p=n[o];if(l.hasOwnProperty(p.value)){l[p.value].count+=p.count;}else l[p.value]={count:p.count};}}return l;};j.prototype.$AdsPixelEventDataSource3=function(k){"use strict";var l=k;h.forEach(function(m){return delete l[m];});return l;};j.prototype.$AdsPixelEventDataSource4=function(k){"use strict";var l=k;i.forEach(function(m){return delete l[m];});return l;};e.exports=j;},null);
__d("AdsPixelCommonSearchSource",["AbstractSearchSource","SearchableEntry"],function(a,b,c,d,e,f,g,h){'use strict';for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(){if(g!==null)g.apply(this,arguments);}k.prototype.searchImpl=function(l,m,n){var o=[],p=l.toLowerCase();Object.keys(this.items).forEach(function(q){if(this.items.hasOwnProperty(q))if(q.toLowerCase().indexOf(p)!==-1){var r=new h({uniqueID:q,title:q});o.push(r);}}.bind(this));m(o,l);};k.prototype.setItems=function(l){this.items=l;};e.exports=k;},null);
__d("AdsPixelCommonTypeahead.react",["AdsPixelCommonSearchSource","React","XUITypeahead.react"],function(a,b,c,d,e,f,g,h,i){var j=h.createClass({displayName:"AdsPixelCommonTypeahead",propTypes:{items:h.PropTypes.object.isRequired,onSelected:h.PropTypes.func.isRequired,placeholder:h.PropTypes.string.isRequired},getInitialState:function(){return {query:''};},render:function(){var k=new g();k.setItems(this.props.items);return (h.createElement(i,{placeholder:this.props.placeholder,tallInput:true,viewStyle:"textonly",queryString:this.state.query,searchSource:k,showEntriesOnFocus:true,onSelectAttempt:function(l){return this.props.onSelected(l.getTitle());}.bind(this),onChange:function(event){return this.setState({query:event.target.value});}.bind(this)}));}});e.exports=j;},null);
__d("AdsPixelEventSelector.react",["AdsPixelCommonTypeahead.react","React","XUICloseButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.createClass({displayName:"AdsPixelEventSelector",propTypes:{rule:h.PropTypes.object.isRequired,onUpdateRuleEvent:h.PropTypes.func.isRequired,events:h.PropTypes.object.isRequired,onEventSelected:h.PropTypes.func.isRequired,showPotentialWarnings:h.PropTypes.bool},render:function(){if(!this.props.rule.event)return (h.createElement("div",{className:(("_5ssa")+(this.props.showPotentialWarnings?' '+"_3gqy":''))},h.createElement(g,{items:this.props.events,onSelected:this._onEventSelected,placeholder:"Choose an event"})));return (h.createElement("div",{className:"_5ssc _5ssa"},this.props.rule.event,h.createElement(i,{size:"small",className:"_3-90 _5ssb",onClick:this._onDelete,key:"close_button"})));},_onEventSelected:function(m){this.props.onUpdateRuleEvent(m);this.props.onEventSelected(m);},_onDelete:function(){this.props.onUpdateRuleEvent(null);}});e.exports=l;},null);
__d("AdsPixelRuleClauseTokenInput.react",["Grid.react","React","Token.react","XUITextInput.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.GridItem,n=h.createClass({displayName:"AdsPixelRuleClauseTokenInput",propTypes:{onUpdateTokens:h.PropTypes.func.isRequired,clause:h.PropTypes.object.isRequired,placeholder:h.PropTypes.string.isRequired},getInitialState:function(){return {textInProgress:''};},render:function(){return (h.createElement(m,{onClick:function(){return this.refs.tokeninput.getDOMNode().focus();}.bind(this),key:"token_input",className:"_2ck7"},this._getTokensDisplay(),this._getTokenInput()));},_getTokensDisplay:function(){if(!this.props.clause.tokens.length)return [];var o=[this._renderToken(this.props.clause.tokens[0],0)];for(var p=1;p<this.props.clause.tokens.length;p++){o.push(h.createElement("span",{className:"_2ck8",key:"or_token_"+p},"or"));o.push(this._renderToken(this.props.clause.tokens[p],p));}return o;},_getTokenInput:function(){return (h.createElement(j,{ref:"tokeninput",className:"_2ck9",value:this.state.textInProgress,onChange:this._onTextChange,onBlur:this._tokenizeCurrentText,onBackspace:this._onBackSpace,onEnter:this._tokenizeCurrentText,placeholder:this.props.placeholder,key:"token_input"}));},_renderToken:function(o,p){return (h.createElement(i,{className:"_2cka",label:o,removable:true,onRemove:this._onRemoveToken.bind(this,p),key:"clause_token_"+p+"_"+o}));},_onTextChange:function(event){var o=event.target.value,p=o.slice(-1);if(p===','||p===' '){this._onAddNewToken(o.slice(0,o.length-1));o='';}this.setState({textInProgress:o});},_onAddNewToken:function(o){var p=this.props.clause.tokens;p.push(o);this.props.onUpdateTokens(p);},_onRemoveToken:function(o){var p=this.props.clause.tokens;p.splice(o,1);this.props.onUpdateTokens(p);},_tokenizeCurrentText:function(event){var o=event.target.value;if(o.length>0){this._onAddNewToken(o);o='';}this.setState({textInProgress:o});},_onBackSpace:function(event){var o=event.target.value;if(o.length===0&&this.props.clause.tokens.length>0)this._onRemoveToken(this.props.clause.tokens.length-1);}});e.exports=n;},null);
__d("AdsPixelRuleClause.react",["Grid.react","React","AdsPixelCommonTypeahead.react","AdsPixelRuleClauseTokenInput.react","XUISelector.react","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=k.Option,p=g.GridItem,q=h.createClass({displayName:"AdsPixelRuleClause",propTypes:{clause:h.PropTypes.object.isRequired,customFields:h.PropTypes.object,isSimpleClause:h.PropTypes.bool.isRequired,operators:h.PropTypes.object.isRequired,onUpdateClause:h.PropTypes.func.isRequired,showPotentialWarnings:h.PropTypes.bool,className:h.PropTypes.string},getInitialState:function(){return {textInProgress:''};},render:function(){if(this.props.isSimpleClause)return (h.createElement(g,{className:this._getRootClassName(),cols:2},this._getOperator(),this._getTokenInput()));if(this.props.clause.customfield)return (h.createElement(g,{className:this._getRootClassName(),cols:3},this._getCustomFieldsSelector(),this._getOperator(),this._getTokenInput()));return (h.createElement("div",{className:"_j_3"},h.createElement(i,{items:this._getCustomFields(),onSelected:this._onUpdateCustomField,placeholder:"Choose a property of the event (optional)"})));},_getTokenInput:function(){return h.createElement(j,{onUpdateTokens:this._onUpdateTokens,clause:this.props.clause,placeholder:this._getTokenInputPlaceholder()});},_getCustomFields:function(){var r=this.props.customFields;if(this.props.clause.customfield&&!r.hasOwnProperty(this.props.clause.customfield))r[this.props.clause.customfield]=true;return r;},_getRootClassName:function(){return n(this.props.className,(("_j_4")+(this.props.showPotentialWarnings&&!this.props.clause.tokens.length?' '+"_j_5":'')));},_getCustomFieldsSelector:function(){var r=[];for(var s in this._getCustomFields())r.push(h.createElement(o,{value:s,key:"field_option_"+s},s));return (h.createElement(p,{key:"custom_field",className:"_j_6"},h.createElement(k,{className:"_j_7",size:"large",onChange:function(event){return this._onUpdateCustomField(event.value);}.bind(this),value:this.props.clause.customfield},r)));},_getOperator:function(){var r=[];for(var s in this.props.operators)r.push(h.createElement(o,{value:this.props.operators[s].value,key:"operation_option_"+this.props.operators[s].value},this.props.operators[s].label));return (h.createElement(p,{className:"_j_6",key:"operator"},h.createElement(k,{className:"_j_7",size:"large",onChange:this._onUpdateOperator,value:this.props.clause.filter},r)));},_getTokenInputPlaceholder:function(){return this.props.isSimpleClause?"Add URL keywords":"Add a value";},_onUpdateTokens:function(r){this._onUpdateClauseFields({tokens:r});},_onUpdateOperator:function(event){this._onUpdateClauseFields({filter:event.value});},_onUpdateCustomField:function(r){this._onUpdateClauseFields({customfield:r});},_onUpdateClauseFields:function(r){var s=this.props.clause;for(var t in r)s[t]=r[t];this.props.onUpdateClause(s);}});e.exports=q;},null);
__d("AdsPixelRuleDialogMode",[],function(a,b,c,d,e,f){var g={CREATE:'create',EDIT:'edit'};e.exports=g;},null);
__d("AdsPixelRuleClauseGroup.react",["React","AdsPixelEventSelector.react","AdsPixelRuleClause.react","WebsiteCustomAudienceModel","WebsiteCustomAudienceOperators","XUIButton.react","XUICloseButton.react","AdsPixelRuleDialogMode","cx","fbt","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=j.Operations,s=j.RuleClause,t=g.createClass({displayName:"AdsPixelRuleClauseGroup",propTypes:{rule:g.PropTypes.object.isRequired,onUpdateRule:g.PropTypes.func.isRequired,showPotentialWarnings:g.PropTypes.bool,onDeleteRule:g.PropTypes.func,onEventSelected:g.PropTypes.func.isRequired,events:g.PropTypes.object.isRequired,mode:g.PropTypes.string.isRequired},render:function(){var u=[],v=r.isEventBasedRule(this.props.rule);if(v){u.push(g.createElement(h,{rule:this.props.rule,onUpdateRuleEvent:this._onUpdateRuleEvent,events:this.props.events,onEventSelected:this.props.onEventSelected,showPotentialWarnings:this.props.showPotentialWarnings,key:"event_selector"}));if(!this.props.rule.event)return g.createElement("div",null,u);}var w=this.props.rule.clauses.length,x=v?k.GenericOperators:k.SimpleOperators,y=this.props.events[this.props.rule.event]&&this.props.events[this.props.rule.event].fields||{};if(v&&q(y)&&this.props.mode===n.CREATE)return g.createElement("div",null,u);for(var z=0;z<w;z++)u.push(g.createElement("div",{key:"rule_clause_row_"+z,className:(("_54aj")+(v||z>0?' '+"_54al":'')+(v&&z===0?' '+"_54am":''))},g.createElement(i,{clause:this.props.rule.clauses[z],customFields:y,operators:x,isSimpleClause:!v,showPotentialWarnings:this.props.showPotentialWarnings,onUpdateClause:this._onUpdateClause.bind(this,z),key:"rule_clause_"+z}),g.createElement("div",{className:"_54an"},this._getAndToken(z,w),this._getDeleteButton(z,w))));return g.createElement("div",null,u);},_getAndToken:function(u,v){if(u!==v-1)return (g.createElement("span",{className:"_2arl",key:"and_token_"+u},"and"));return (g.createElement(l,{label:"and",size:"large",className:"_2arm",onClick:this._onAddEmptyClause,key:"and_token_"+u}));},_getDeleteButton:function(u,v){if(v===1&&!this.props.onDeleteRule)return null;return (g.createElement(m,{size:"small",className:"_3-90",onClick:this._onDeleteClause.bind(this,u,v),key:"delete_button_"+u}));},_onUpdateRuleEvent:function(event){if(event!==this.props.rule.event)this._onUpdateRuleFields({event:event,clauses:[new s()]});},_onUpdateClause:function(u,v){var w=this.props.rule.clauses;w[u]=v;this._onUpdateRuleFields({clauses:w});},_onAddEmptyClause:function(){var u=this.props.rule.clauses;u.push(new s());this._onUpdateRuleFields({clauses:u});},_onDeleteClause:function(u,v){if(v===1){this.props.onDeleteRule();}else{var w=this.props.rule.clauses;w.splice(u,1);this._onUpdateRuleFields({clauses:w});}},_onUpdateRuleFields:function(u){var v=this.props.rule;for(var w in u)v[w]=u[w];this.props.onUpdateRule(v);}});e.exports=t;},null);
__d("AdsPixelRuleBuilder.react",["AdsPixelRuleClauseGroup.react","React","WebsiteCustomAudienceModel","XUISelector.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=i.Operations,n=i.RuleClause,o=j.Option,p=h.createClass({displayName:"AdsPixelRuleBuilder",propTypes:{rule:h.PropTypes.object.isRequired,onDeleteRule:h.PropTypes.func,onUpdateRule:h.PropTypes.func.isRequired,eventSource:h.PropTypes.object.isRequired,showPotentialWarnings:h.PropTypes.bool,mode:h.PropTypes.string.isRequired},componentWillMount:function(){this.props.eventSource.fetchEvents(this._onEventsFetched);},getInitialState:function(){return {events:{}};},render:function(){return (h.createElement("span",null,this._getRuleScopeSelector(),h.createElement(g,{rule:this.props.rule,onDeleteRule:this.props.onDeleteRule,onUpdateRule:this.props.onUpdateRule,showPotentialWarnings:this.props.showPotentialWarnings,events:this.state.events,onEventSelected:this._updateCustomField,mode:this.props.mode})));},_getRuleScopeSelector:function(){var q=[h.createElement(o,{value:"url",key:"scope_option_url"},"URL")];if(this._showEventOption())q.push(h.createElement(o,{value:"event",key:"scope_option_event"},"Event"));return (h.createElement(j,{value:this.props.rule.scope,onChange:this._onSelectorChange,className:"_4hia"},q));},_onSelectorChange:function(q){this._onUpdateRuleFields({scope:q.value,event:null,clauses:[new n()]});},_onUpdateRuleFields:function(q){var r=this.props.rule;for(var s in q)r[s]=q[s];this.props.onUpdateRule(r);},_showEventOption:function(){return Object.keys(this.state.events).length>0||m.isEventBasedRule(this.props.rule);},_updateCustomField:function(q){this.props.eventSource.fetchCustomFields(q,this._updateEvents);},_updateEvents:function(q){this.setState({events:q});},_onEventsFetched:function(q){this._updateEvents(q);if(this.props.rule.event)this._updateCustomField(this.props.rule.event);}});e.exports=p;},null);
__d("WebsiteCustomAudienceRuleBuilderCustom.react",["AdsHelpLink.react","AdsPixelEventDataSource","AdsPixelRuleSet.react","AudienceManagerUIConstants","InfoTable.react","InfoTableRow.react","InfoTableSection.react","Link.react","React","WebsiteCustomAudienceModel","AdsPixelRuleDialogMode","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=p.Operations,u=o.createClass({displayName:"WebsiteCustomAudienceRuleBuilderCustom",propTypes:{audience:o.PropTypes.object.isRequired,onUpdateAudienceFields:o.PropTypes.func.isRequired,pixel:o.PropTypes.object,showPotentialWarnings:o.PropTypes.bool.isRequired},getInitialState:function(){var v=this.props.audience.exclusion_rules.filter(t.validateRule),w=new h(this.props.pixel&&this.props.pixel.id);return {showExclusions:v.length>0,eventDataSource:w};},componentWillReceiveProps:function(v){if(!this.props.pixel||this.props.pixel.id!==v.pixel.id){var w=new h(v.pixel.id);this.setState({eventDataSource:w});}},render:function(){return (o.createElement(k,{className:"_38ck"},o.createElement(m,null,this._getInclusionRow(),this._getExclusionRow())));},_getInclusionRow:function(){return (o.createElement(l,{label:"Include",helpLink:o.createElement(g,{position:"above",width:j.HELP_LINK_WIDTH},"These people would be included in your targeting"),type:"data"},o.createElement("span",null,this._getRuleSetDesc(),o.createElement(i,{rules:this.props.audience.inclusion_rules,onUpdateRuleSet:this._onUpdateInclusionRules,eventSource:this.state.eventDataSource,showPotentialWarnings:this.props.showPotentialWarnings,mode:this._isEdit()?q.EDIT:q.CREATE}),this._getAddExclusionLink())));},_getExclusionRow:function(){if(!this.state.showExclusions)return null;return (o.createElement(l,{label:"Exclude",helpLink:o.createElement(g,{position:"above",width:j.HELP_LINK_WIDTH},"These people would be excluded in your targeting"),type:"data"},o.createElement("span",null,this._getRuleSetDesc(),o.createElement(i,{rules:this.props.audience.exclusion_rules,onUpdateRuleSet:this._onUpdateExclusionRules,onDeleteRuleSet:function(){return this.setState({showExclusions:false});}.bind(this),eventSource:this.state.eventDataSource,showPotentialWarnings:this.props.showPotentialWarnings,mode:this._isEdit()?q.EDIT:q.CREATE}))));},_getAddExclusionLink:function(){if(this.state.showExclusions||this._isEdit())return null;return (o.createElement("div",{className:"_38cl"},o.createElement(n,{onClick:this._onAddExclusion},"Add exclusions")));},_getRuleSetDesc:function(){return (o.createElement("div",{className:"_38cm"},"Traffic that meets the following conditions:"));},_isEdit:function(){return !!this.props.audience.id;},_onAddExclusion:function(){this.setState({showExclusions:true});},_onUpdateInclusionRules:function(v){this.props.onUpdateAudienceFields(this.props.audience,{inclusion_rules:v});},_onUpdateExclusionRules:function(v){this.props.onUpdateAudienceFields(this.props.audience,{exclusion_rules:v});}});e.exports=u;},null);
__d("WebsiteCustomAudienceRuleBuilderIncludeExclude.react",["AdsPixelRuleClause.react","WebsiteCustomAudienceOperators","InfoTable.react","InfoTableRow.react","InfoTableSection.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=l.createClass({displayName:"WebsiteCustomAudienceRuleBuilderIncludeExclude",propTypes:{inclusionClause:l.PropTypes.object.isRequired,exclusionClause:l.PropTypes.object.isRequired,onUpdateInclusionClause:l.PropTypes.func.isRequired,onUpdateExclusionClause:l.PropTypes.func.isRequired,showPotentialWarnings:l.PropTypes.bool.isRequired},render:function(){return (l.createElement(i,{className:"_4xt2"},l.createElement(k,null,l.createElement(j,null,l.createElement("div",null,l.createElement("div",{className:"_4xt3"},"Include people who visit any web page that meets the following rules."),l.createElement(g,{className:"_4xt4",isSimpleClause:true,operators:h.URLOperators,clause:this.props.inclusionClause,onUpdateClause:this.props.onUpdateInclusionClause,showPotentialWarnings:this.props.showPotentialWarnings}),l.createElement("div",{className:"_4xt3"},"Exclude people who visit any web page that meets the following rules."),l.createElement(g,{className:"_4xt4",isSimpleClause:true,operators:h.URLOperators,clause:this.props.exclusionClause,onUpdateClause:this.props.onUpdateExclusionClause,showPotentialWarnings:this.props.showPotentialWarnings}))))));}});e.exports=o;},null);
__d("WebsiteCustomAudienceRuleBuilderSpecificPages.react",["AdsPixelRuleClause.react","WebsiteCustomAudienceOperators","InfoTable.react","InfoTableRow.react","InfoTableSection.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=l.createClass({displayName:"WebsiteCustomAudienceRuleBuilderSpecificPages",propTypes:{clause:l.PropTypes.object.isRequired,onUpdateClause:l.PropTypes.func.isRequired,showPotentialWarnings:l.PropTypes.bool.isRequired},render:function(){return (l.createElement(i,{className:"_23h"},l.createElement(k,null,l.createElement(j,null,l.createElement("div",null,l.createElement("div",{className:"_28x"},"Include people who visit any web page that meets the following rules."),l.createElement(g,{className:"_28y",isSimpleClause:true,operators:h.URLOperators,clause:this.props.clause,onUpdateClause:this.props.onUpdateClause,showPotentialWarnings:this.props.showPotentialWarnings}))))));}});e.exports=o;},null);
__d("WebsiteCustomAudienceUneditableRule.react",["AudienceManagerURLConstants","InfoTable.react","InfoTableRow.react","InfoTableSection.react","React","WebRemarketingDialogGear.react","WebsiteCustomAudienceModel","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUINotice.react","XUISpinner.react","XUIText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=m.Operations,x=k.createClass({displayName:"WebsiteCustomAudienceUneditableRule",propTypes:{audience:k.PropTypes.object.isRequired,audienceMetaInfo:k.PropTypes.object.isRequired,errorMessage:k.PropTypes.string.isRequired,onAudienceRuleUpdated:k.PropTypes.func.isRequired,onSetNotice:k.PropTypes.func.isRequired,onViewPixelCode:k.PropTypes.func.isRequired,waitingForServerReponse:k.PropTypes.bool.isRequired},getInitialState:function(){return {migratedRule:w.migrateRule(JSON.parse(this.props.audience.rule))};},render:function(){var y=this.state.migratedRule?k.createElement(r,{use:"warn",className:"_2pi4"},k.createElement(t,{size:"small",weight:"bold"},"Can't Edit Audience"),k.createElement("br",null),k.createElement(t,{size:"small"},"This audience was created using settings that have been changed. You can still use this audience for your ads. To make changes to this audience, update to the new settings.")):k.createElement(r,{use:"warn",className:"_2pi4"},k.createElement(t,{size:"small",weight:"bold"},"Can't Edit Audience"),k.createElement("br",null),k.createElement(t,{size:"small"},"This audience can't be edited because it was created using settings that are no longer available. You can still use this audience for your ads. To make changes or updates, create a new audience."));return (k.createElement("div",null,k.createElement(n,null,k.createElement("div",{className:"_qtd"},k.createElement("div",{className:"_5rkp _5rkq"},this.props.audienceMetaInfo,k.createElement("div",null,k.createElement(h,{className:"_3af5"},k.createElement(j,null,k.createElement(i,{label:"Rule"},this.props.audience.rule),k.createElement(i,{label:"Retention"},this.props.audience.retention_days))),y)),!!this.props.errorMessage?k.createElement(r,{className:"_4o1o",use:"warn"},k.createElement("div",{className:"_5wbz"},this.props.errorMessage)):k.createElement("span",null))),k.createElement(q,{leftContent:k.createElement(l,{learnMoreURL:g.WCA_CONFIGURE_RULES_DOC,onViewPixelCode:this.props.onViewPixelCode})},this.props.waitingForServerReponse?k.createElement(s,{className:"_5swe",size:"small",background:"light"}):k.createElement("span",null),k.createElement(p,{disabled:this.props.waitingForServerReponse}),this._renderMigrateButton())));},_renderMigrateButton:function(){var y=k.createElement("span",null);if(!this.state.migratedRule)return y;y="Update Audience";return k.createElement(o,{use:"confirm",onClick:this._migrateRule,label:y});},_migrateRule:function(){var y=k.createElement(r,{className:"_2pi4"},k.createElement(t,{size:"small",weight:"bold"},"Audience Updated"),k.createElement("br",null),k.createElement(t,{size:"small"},"Your audience has been automatically updated to the new settings. You can undo these changes or save them and continue."));this.props.onSetNotice(y);this.props.onAudienceRuleUpdated(this.state.migratedRule);}});e.exports=x;},null);
__d("WebsiteCustomAudienceRuleBuilderDialog.react",["AdsAMViewActions","AdInterfacesUiLogger","AudienceManagerURLConstants","AudienceManagerLoggingEvents","React","WebsiteCustomAudienceModel","WebsiteCustomAudienceRetention.react","WebsiteCustomAudienceTrafficSelector.react","WebRemarketingDialogGear.react","WebsiteCustomAudienceMetaInfo.react","WebsiteCustomAudienceRuleBuilderChooseDomain.react","WebsiteCustomAudienceRuleBuilderChurners.react","WebsiteCustomAudienceRuleBuilderCustom.react","WebsiteCustomAudienceRuleBuilderIncludeExclude.react","WebsiteCustomAudienceRuleBuilderSpecificPages.react","WebsiteCustomAudienceUneditableRule.react","WebsiteCustomAudienceTrafficType","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUINotice.react","XUISpinner.react","areEqual","copyProperties","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){var ia=l.Operations,ja=l.Rule,ka=180,la=k.createClass({displayName:"WebsiteCustomAudienceRuleBuilderDialog",propTypes:{accountID:k.PropTypes.string.isRequired,audience:k.PropTypes.object,dao:k.PropTypes.object.isRequired,onAudienceAdded:k.PropTypes.func,onAudienceUpdated:k.PropTypes.func,embedded:k.PropTypes.bool,onValidationFail:k.PropTypes.func,onViewPixelCode:k.PropTypes.func,pixel:k.PropTypes.object},componentWillReceiveProps:function(ma){if(this.props.audience&&this.props.audience!=ma.audience){var na=this._setupAudience(ma.audience);this.setState({audience:na,waitingForServerReponse:false});}},getInitialState:function(){var ma=null;if(this.props.audience){ma=this._setupAudience(this.props.audience);}else ma=new l.Audience();return {prefill:true,audience:ma,domainRules:this._setupDomainRules(this.props.audience),errorMessage:'',waitingForServerReponse:false,enableValidation:false,audienceNotice:k.createElement("span",null)};},render:function(){return (k.createElement("div",null,this._renderTitle(),this._renderDialogBody()));},_renderDialogBody:function(){var ma=k.createElement(p,{audience:this.state.audience,onUpdateAudienceFields:this._updateAudienceFields,enableValidation:this.state.enableValidation});if(this.state.audience.isRuleEditable){return (k.createElement("div",null,k.createElement(x,null,k.createElement("div",{className:"_qtd"},k.createElement("div",{className:"_5rkp _5rkq"},this._renderRuleSpecificControls(),k.createElement("div",{className:"_1x0g"}),ma,this.state.audienceNotice),!!this.state.errorMessage?k.createElement(ca,{className:"_4o1o",use:"warn"},k.createElement("div",{className:"_5wbz"},this.state.errorMessage)):k.createElement("span",null))),this._renderFooter()));}else return k.createElement(v,{audience:this.props.audience,audienceMetaInfo:ma,errorMessage:this.state.errorMessage,onAudienceRuleUpdated:this._onAudienceRuleUpdated,onSetNotice:this._onSetNotice,onViewPixelCode:this.props.onViewPixelCode,waitingForServerReponse:this.state.waitingForServerReponse});},_renderRuleSpecificControls:function(){return (k.createElement("div",null,k.createElement(n,{trafficType:this.state.audience.trafficType,onChangeTrafficType:this.props.audience?null:function(ma){this._updateAudienceFields(this.state.audience,{trafficType:ma.value});}.bind(this)}),this._renderRuleTemplate(),k.createElement(m,{duration:this.state.audience.duration,prefill:this.state.prefill,onChangeDuration:function(ma){this._updateAudienceFields(this.state.audience,{duration:ma});}.bind(this),onChangePrefill:this.props.audience?null:function(ma){return this.setState({prefill:ma});}.bind(this)})));},_renderTitle:function(){if(this.props.embedded)return;var ma="Create Audience";if(this.props.audience)ma=ha._("Edit {Audience Name}",[ha.param("Audience Name",this.props.audience.name)]);return (k.createElement(ba,null,ma));},_renderFooter:function(){if(this.props.embedded)return;return (k.createElement(aa,{leftContent:k.createElement(o,{learnMoreURL:i.WCA_CONFIGURE_RULES_DOC,onViewPixelCode:this.props.onViewPixelCode})},this.state.waitingForServerReponse?k.createElement(da,{className:"_5swe",size:"small",background:"light"}):k.createElement("span",null),k.createElement(z,{disabled:this.state.waitingForServerReponse}),this._renderActionButton()));},_renderRuleTemplate:function(){switch(this.state.audience.trafficType){case w.ALL_WEBSITE_VISITORS:return k.createElement(q,{dao:this.props.dao,pixel:this.props.pixel,rule:this.state.domainRules[0],onUpdateClauseFields:this._updateDomain});case w.SPECIFIC_PAGE_VISITORS:return k.createElement(u,{clause:this.state.audience.inclusion_rules[0].clauses[0],onUpdateClause:this._updateFirstInclusionClause,showPotentialWarnings:this.state.enableValidation});case w.SPECIFIC_PAGE_VISITORS_WITH_EXCLUSION:return k.createElement(t,{inclusionClause:this.state.audience.inclusion_rules[0].clauses[0],exclusionClause:this.state.audience.exclusion_rules[0].clauses[0],onUpdateInclusionClause:this._updateFirstInclusionClause,onUpdateExclusionClause:this._updateFirstExclusionClause,showPotentialWarnings:this.state.enableValidation});case w.CHURNED_VISITORS:return k.createElement(r,null);case w.CUSTOM:return k.createElement(s,{audience:this.state.audience,pixel:this.props.pixel,onUpdateAudienceFields:this._updateAudienceFields,showPotentialWarnings:this.state.enableValidation});}},_renderActionButton:function(){if(this.props.audience){return k.createElement(y,{use:"confirm",onClick:this._updateAudience,label:"Update Audience"});}else return k.createElement(y,{disabled:this.state.waitingForServerReponse||!this.state.audience.name.length,use:"confirm",onClick:this._createAudience,label:"Create Audience"});},_serializeSubAudience:function(ma,na){if(!na)na=this.state.audience.duration;var oa=ia.serializeRule(ma);if(oa)return {id:ma.id,type:'website',retention_days:na,rule:oa};},_serializeSubAudiences:function(){var ma=[],na=[];switch(this.state.audience.trafficType){case w.ALL_WEBSITE_VISITORS:h.log(j.AM_WCA_EDITOR_AUDIENCE_TYPE_ALL_WEBSITE_VISITORS);if(ia.validateRule(this.state.domainRules[0])){ma.push(this._serializeSubAudience(this.state.domainRules[0]));h.log(j.AM_WCA_EDITOR_AUDIENCE_TYPE_ALL_WEBSITE_VISITORS_WITH_DOMAIN);}else ma.push(this._serializeSubAudience(l.RuleTemplates.getAllVisitors()));break;case w.SPECIFIC_PAGE_VISITORS:h.log(j.AM_WCA_EDITOR_AUDIENCE_TYPE_SPECIFIC_PAGES);ma.push(this._serializeSubAudience(this.state.audience.inclusion_rules[0]));break;case w.SPECIFIC_PAGE_VISITORS_WITH_EXCLUSION:h.log(j.AM_WCA_EDITOR_AUDIENCE_TYPE_INC_EXC);ma.push(this._serializeSubAudience(this.state.audience.inclusion_rules[0]));na.push(this._serializeSubAudience(this.state.audience.exclusion_rules[0]));break;case w.CHURNED_VISITORS:h.log(j.AM_WCA_EDITOR_AUDIENCE_TYPE_CHURNED);ma.push(this._serializeSubAudience(l.RuleTemplates.getAllVisitors(),ka));na.push(this._serializeSubAudience(l.RuleTemplates.getAllVisitors()));break;case w.CUSTOM:h.log(j.AM_WCA_EDITOR_AUDIENCE_TYPE_RULES);ma=this.state.audience.inclusion_rules.map(function(oa){return this._serializeSubAudience(oa);}.bind(this)).filter(function(oa){return !!oa;});na=this.state.audience.exclusion_rules.map(function(oa){return this._serializeSubAudience(oa);}.bind(this)).filter(function(oa){return !!oa;});break;}return {inclusion_rules:ma,exclusion_rules:na};},_onSetNotice:function(ma){this.setState({audienceNotice:ma});},_createAudience:function(){if(!this._validate())return;h.log(j.AM_WCA_EDITOR_CREATE_AUDIENCE);var ma=this._serializeSubAudiences(),na={accountId:this.props.accountID,name:this.state.audience.name,description:this.state.audience.description,inclusions:ma.inclusion_rules,prefill:this.state.prefill,creation_params:{combination_type:'website',traffic_type:this.state.audience.trafficType},handleError:function(oa,pa){h.log(j.AM_WCA_EDITOR_CREATE_FAIL);this.setState({waitingForServerReponse:false,errorMessage:pa.error.message});}.bind(this)};if(ma.exclusion_rules.length)na.exclusions=ma.exclusion_rules;this.props.dao.add.createWebsiteCombinationAudience.one(function(oa){h.log(j.AM_WCA_EDITOR_CREATE_SUCCESS);this.props.onAudienceAdded(oa.id);}.bind(this),na);this.setState({waitingForServerReponse:true,errorMessage:''});},_updateAudience:function(){var ma={name:this.state.audience.name,description:this.state.audience.description,retention_days:this.state.audience.duration},na={name:this.props.audience.name,description:this.props.audience.description,retention_days:this.props.audience.retention_days};if(this.props.audience.rule){na.rule=this.props.audience.rule;if(this.state.audience.trafficType===w.ALL_WEBSITE_VISITORS){if(ia.validateRule(this.state.domainRules[0])){ma.rule=ia.serializeRule(this.state.domainRules[0]);}else ma.rule=ia.serializeRule(l.RuleTemplates.getAllVisitors());}else ma.rule=ia.serializeRule(this.state.audience.inclusion_rules[0]);}else{var oa=this._serializeSubAudiences();na.inclusions=this.props.audience.included_custom_audiences;na.exclusions=this.props.audience.excluded_custom_audiences;ma.inclusions=oa.inclusion_rules;ma.exclusions=oa.exclusion_rules;}if(!this._validate()){this.props.onValidationFail&&this.props.onValidationFail(ma);return;}if(!ea(ma,na))this.props.onAudienceUpdated(this.props.audience,ma);if(!this.props.embedded)g.closeWCADialog();},_updateAudienceFields:function(ma,na){var oa=this._cloneAudience();for(var pa in na)if(na.hasOwnProperty(pa))oa[pa]=na[pa];this.setState({audience:oa},this._updateAudienceForEmbeddedForm);},_updateAudienceForEmbeddedForm:function(){if(this.props.embedded)this._updateAudience();},_updateRuleFields:function(ma,na){var oa=this._cloneAudience(),pa=ia.findRule(oa,ma.key);for(var qa in na)if(na.hasOwnProperty(qa))pa[qa]=na[qa];this.setState({audience:oa},this._updateAudienceForEmbeddedForm);},_updateFirstInclusionClause:function(ma){var na=this._cloneAudience();na.inclusion_rules.clauses=[ma];this.setState({audience:na},this._updateAudienceForEmbeddedForm);},_updateFirstExclusionClause:function(ma){var na=this._cloneAudience();na.exclusion_rules.clauses=[ma];this.setState({audience:na},this._updateAudienceForEmbeddedForm);},_updateClauseFields:function(ma,na){var oa=this._cloneAudience(),pa=ia.findRuleClause(oa,ma.key);for(var qa in na)if(na.hasOwnProperty(qa))pa[qa]=na[qa];this.setState({audience:oa},this._updateAudienceForEmbeddedForm);},_updateDomain:function(ma,na){var oa=this.state.domainRules,pa=ia._findRuleClauseInArray(oa,ma.key);for(var qa in na)if(na.hasOwnProperty(qa))pa[qa]=na[qa];this.setState({domainRules:oa},this._updateAudienceForEmbeddedForm);},_cloneAudience:function(){return fa((new l.Audience()),this.state.audience);},_onAudienceRuleUpdated:function(ma){if(!ia.validateRule(ma))return;var na=this._cloneAudience();na.isRuleEditable=true;na.inclusion_rules=[ma];na.trafficType=w.CUSTOM;this.setState({audience:na});},_setupAudience:function(ma){var na=new l.Audience();na.id=ma.id;na.name=ma.name;na.description=ma.description;na.duration=ma.retention_days;var oa=JSON.parse(ma.data_source.creation_params);if(ma.rule){var pa=ia.deserializeRule(ma.rule);if(!pa||!ia.validateRule(pa)){na.isRuleEditable=false;return na;}na.inclusion_rules=[pa];if(pa.event||pa.clauses.length>1){na.trafficType=w.CUSTOM;}else if(parseInt(oa.traffic_type,10)===1||l.RuleTemplates.isAllVisitors(ma.rule)){na.trafficType=w.ALL_WEBSITE_VISITORS;}else na.trafficType=w.SPECIFIC_PAGE_VISITORS;}else if(ma.included_custom_audiences){na.trafficType=+oa.traffic_type;var qa=ma.included_custom_audiences,ra=ma.excluded_custom_audiences||[],sa=[],ta=[];for(var ua=0;ua<qa.length;ua++){var va=qa[ua];na.duration=va.retention_days;var wa=ia.deserializeRule(va.rule);wa.id=va.id;sa.push(wa);}for(ua=0;ua<ra.length;ua++){var xa=ra[ua];wa=ia.deserializeRule(xa.rule);wa.id=xa.id;ta.push(wa);}if(sa.length)na.inclusion_rules=sa;if(ta.length)na.exclusion_rules=ta;if(na.trafficType==w.CHURNED_VISITORS)na.duration=ra[0].retention_days;}return na;},_setupDomainRules:function(ma){if(ma&&ma.rule)return [ia.deserializeRule(ma.rule)];return [new ja()];},_validate:function(){var ma=this._validateAudienceData();if(!ma){this.setState({enableValidation:true});h.log(j.AM_WCA_EDITOR_VALIDATION_FAILURE);}return ma;},_validateAudienceData:function(){if(!this.state.audience.name.length)return false;var ma=[];switch(this.state.audience.trafficType){case w.SPECIFIC_PAGE_VISITORS:ma=[this.state.audience.inclusion_rules[0]];break;case w.SPECIFIC_PAGE_VISITORS_WITH_EXCLUSION:ma=[this.state.audience.inclusion_rules[0],this.state.audience.exclusion_rules[0]];break;case w.CUSTOM:if(this.state.audience.exclusion_rules.length>1){ma=this.state.audience.inclusion_rules.concat(this.state.audience.exclusion_rules);}else ma=this.state.audience.inclusion_rules;}if(ma.length)return ma.every(function(na){return ia.validateRule(na);});return true;}});e.exports=la;},null);
__d("AdsPixelEmailInput.react",["CIWebmailValidator","React","Token.react","XUITextInput.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=h.createClass({displayName:"AdsPixelEmailInput",propTypes:{onChange:h.PropTypes.func},getInitialState:function(){return {emails:[],textInProgress:''};},componentDidMount:function(){this.props.onChange&&this.props.onChange();},render:function(){return (h.createElement("div",{className:"_2_m clearfix",onClick:function(){this.refs.textInput.getDOMNode().focus();}.bind(this)},h.createElement("div",null,this._getEmailTokens()),h.createElement(j,{className:"_2_q",ref:"textInput",value:this.state.textInProgress,onChange:this._onChange,onBlur:this._onCommit,onBackspace:this._onBackspace,onEnter:this._onCommit,placeholder:this._getPlaceHolderText()})));},_showDialog:function(){this.refs.dialog.showDialog();},_getEmailTokens:function(){return this.state.emails.map(function(n,o){return h.createElement(i,{className:(("_2_r")+(!g.isValidEmail(n)?' '+"_2_s":'')),key:o,label:n,removable:true,onRemove:this._removeEmailByIndex.bind(this,o)});}.bind(this));},_getPlaceHolderText:function(){return ("Add a recipient");},_onCommit:function(event){this._onAdd(event.target.value);this.setState({textInProgress:''});},_onChange:function(event){var n=event.target.value,o=n.slice(-1);if([',',';',' '].indexOf(o)!==-1){this._onAdd(n.slice(0,n.length-1));this.setState({textInProgress:''});}else this.setState({textInProgress:n});this.props.onChange&&this.props.onChange();},_onAdd:function(n){if(n){var o=this.state.emails;o.push(n);this.setState({emails:o});this.props.onChange&&this.props.onChange();}},_onBackspace:function(event){var n=event.target.value;if(n.length===0&&this.state.emails.length>0)this._removeEmailByIndex(-1);},_removeEmailByIndex:function(n){var o=this.state.emails;o.splice(n,1);this.setState({emails:o});this.props.onChange&&this.props.onChange();},getEmailList:function(){return this.state.emails;},isInputValid:function(){if(this.state.textInProgress&&!g.isValidEmail(this.state.textInProgress))return false;if(this.state.emails.length===0&&!this.state.textInProgress)return false;return this.state.emails.every(function(n){return g.isValidEmail(n);});}});e.exports=m;},null);
__d("XAdsPixelCodeEmailControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/ads\/pixels\/sendcodebymail\/",{recipients:{type:"StringVector",required:true},personal_message:{type:"String"},pixel_id:{type:"Int",required:true}});},null);
__d("WebsiteCustomAudienceSendPixelByMailDialog.react",["AdInterfacesUiLogger","AdsPixelNotifFieldEnum","AdsPixelNotifParamsEnum","AdsPixelSnippet.react","AsyncRequest","AudienceManagerURLConstants","AdsPixelEmailInput.react","AdsPixelCodeEmailFormParams","XAdsPixelCodeEmailControllerURIBuilder","AudienceManagerLoggingEvents","React","WebRemarketingDialogGear.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=q.createClass({displayName:"WebsiteCustomAudienceSendPixelByMailDialog",propTypes:{pixel:q.PropTypes.object.isRequired,onSendComplete:q.PropTypes.func.isRequired,onCancel:q.PropTypes.func.isRequired},getInitialState:function(){return {enableSend:false};},render:function(){var aa=n[h.PERSONAL_MESSAGE_LABEL];return (q.createElement("div",null,q.createElement(v,null,"Send Custom Audience Pixel to Your Website Developer"),q.createElement(s,null,q.createElement("div",{className:"_qtd"},q.createElement(w,{weight:"bold",className:"_4az6 _4az7"},"To:"),q.createElement(m,{ref:"emailInput",onChange:function(){this.setState({enableSend:this.refs.emailInput.isInputValid()});}.bind(this)}),q.createElement("div",{className:"_4az8"},q.createElement("span",{className:"_4az6"},y._("{=Personal Message} (optional):",[y.param("=Personal Message",q.createElement(w,{weight:"bold"},aa))])),q.createElement("textarea",{className:"_4az9 _4azb",placeholder:"Add personal message",ref:"personalMessageInput"})),q.createElement("div",{className:"_4az8"},q.createElement(w,{weight:"bold",className:"_4az6"},"Pixel Information:"),q.createElement("div",{className:"_4az9 scrollable _4azc _4azd"},q.createElement(w,{weight:"bold"},n[h.INSTRUCTION_LABEL]),q.createElement("div",{className:"_4aze"},n[h.INSTRUCTION]),q.createElement("div",{className:"_4azf"},q.createElement(j,{pixelCode:this.props.pixel.code})))))),q.createElement(u,{leftContent:q.createElement(r,{learnMoreURL:l.WCA_INSTALL_PIXEL_DOC})},q.createElement(t,{onClick:this.props.onCancel,label:"Back"}),q.createElement(t,{use:"confirm",onClick:this._send,disabled:!this.state.enableSend,label:"Send Email"}))));},_send:function(){var aa=new o().setString(i.PERSONAL_MESSAGE,this.refs.personalMessageInput.getDOMNode().value).setInt(i.PIXEL_ID,this.props.pixel.id).setStringVector(i.RECIPIENTS,this.refs.emailInput.getEmailList()).getURI(),ba=this.refs.emailInput.getEmailList();new k().setURI(aa).setHandler(function(ca){g.log(p.WCA_EMAIL_PIXEL_SUCCESS);this.props.onSendComplete(y._("Successfully sent the pixel code to {list of items}",[y.param("list of items",ba.join(', '))]),true);}.bind(this)).setErrorHandler(function(ca,da){g.log(p.WCA_EMAIL_PIXEL_FAILURE);this.props.onSendComplete(y._("Failed to send the pixel code to {list of items}",[y.param("list of items",ba.join(', '))]),false);}.bind(this)).send();}});e.exports=z;},null);
__d("AdsPixelCode.react",["AudienceManagerURLConstants","Link.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){var l=i.createClass({displayName:"AdsPixelCode",propTypes:{pixel:i.PropTypes.object.isRequired,onSendEmailLinkClick:i.PropTypes.func.isRequired},render:function(){return (i.createElement("div",null,i.createElement("p",null,"Copy the code below and paste it between the \u003Chead> and \u003C\/head> in your website code. Then you can set up rules to track specific actions people take across your website."),i.createElement("p",null,i.createElement(h,{onClick:this.props.onSendEmailLinkClick},"Send the code to your website developer")),i.createElement("textarea",{readOnly:true,noresize:true,value:this.props.pixel.code,onClick:function(){return this.refs.pixelCodeTextArea.getDOMNode().select();}.bind(this),className:"_13d_",ref:"pixelCodeTextArea"}),i.createElement("p",null,k._("Learn more about how to verify your pixel installation in the {help-center-link}.",[k.param("help-center-link",i.createElement(h,{href:g.WCA_INSTALL_PIXEL_DOC,target:"_blank"},"Help Center"))]))));},_defaultEmailContent:function(m){return ("Hi Friendly Developer,"+'\n\n'+"Please copy the code below and paste into my website between \u003Chead> and \u003C\/head> so I can remarket to my customers on Facebook. Learn more in the Help Center."+'\n\n'+m);}});e.exports=l;},null);
__d("WebsiteCustomAudienceViewPixelDialog.react",["AdInterfacesUiLogger","AdsPixelCode.react","AudienceManagerURLConstants","AudienceManagerLoggingEvents","React","WebRemarketingDialogGear.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUINotice.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=k.createClass({displayName:"WebsiteCustomAudienceViewPixelDialog",propTypes:{pixel:k.PropTypes.object.isRequired,pixelMessage:k.PropTypes.string,onGotoRuleBuilder:k.PropTypes.func.isRequired,onGotoSendCodeByMail:k.PropTypes.func.isRequired},render:function(){return (k.createElement("div",null,k.createElement(q,null,"View Custom Audience Pixel"),k.createElement(m,null,k.createElement("div",{className:"_qtd"},this._renderMessage(),k.createElement(h,{pixel:this.props.pixel,onSendEmailLinkClick:this.props.onGotoSendCodeByMail}))),k.createElement(p,{leftContent:k.createElement(l,{learnMoreURL:i.WCA_INSTALL_PIXEL_DOC})},k.createElement(o,null),k.createElement(n,{use:"confirm",onClick:function(){g.log(j.AM_WCA_VIEW_PIXEL_CREATE_AUDIENCE);this.props.onGotoRuleBuilder();}.bind(this),label:"Create Audience"}))));},_renderMessage:function(){if(!this.props.pixelMessage)return;return (k.createElement(r,{use:"notify",className:"_13e0"},this.props.pixelMessage));}});e.exports=u;},null);
__d("WebRemarketingViewState",["AudienceManagerURLConstants"],function(a,b,c,d,e,f,g){var h={INTRODUCTION_DIALOG:1,VIEW_REMARKETING_PIXEL_DIALOG:2,CREATE_AUDIENCE_DIALOG:3,CREATE_AUDIENCE_REQUEST_SENT:4,CREATE_AUDIENCE_REQUEST_COMPLETE:5,CREATING_PIXEL:6,EDIT_AUDIENCE_DIALOG:7,LOADING_PIXEL:8,SEND_PIXEL_EMAIL_DIALOG:9},i=function(j){switch(j){case h.INTRODUCTION_DIALOG:return g.WCA_GETTING_STARTED;case h.CREATE_AUDIENCE_DIALOG:case h.EDIT_AUDIENCE_DIALOG:return g.WCA_CONFIGURE_RULES_DOC;case h.VIEW_REMARKETING_PIXEL_DIALOG:return g.WCA_INSTALL_PIXEL_DOC;case h.CREATE_AUDIENCE_REQUEST_SENT:case h.CREATE_AUDIENCE_REQUEST_COMPLETE:return;default:return;}};e.exports={Enum:h,getLearnMoreURI:i};},null);
__d("AudienceManagerWebsiteUsers.react",["React","WebsiteCustomAudience.react"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:"AudienceManagerWebsiteUsers",propTypes:{dao:g.PropTypes.object.isRequired,accountID:g.PropTypes.string.isRequired,audience:g.PropTypes.object,embedded:g.PropTypes.bool,createMode:g.PropTypes.bool,onAudienceChanged:g.PropTypes.func,onAudienceUpdated:g.PropTypes.func,onAudienceAdded:g.PropTypes.func,tosAccepted:g.PropTypes.object.isRequired,tosRequirementsForAccount:g.PropTypes.object.isRequired},render:function(){var j=this.props.onAudienceUpdated?this.props.onAudienceUpdated:this.props.onAudienceChanged;return (g.createElement(h,{dao:this.props.dao,accountID:this.props.accountID,audience:this.props.audience,embedded:this.props.embedded,onAudienceUpdated:j,onAudienceAdded:this.props.onAudienceAdded,tosAccepted:this.props.tosAccepted,tosRequirementsForAccount:this.props.tosRequirementsForAccount}));}});e.exports=i;},null);
__d("AdsAMViewStore",["AdsAMActionTypes","AdsAMDispatcher","Arbiter","ImmutableObject","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o,p,q,r,s,t,u,v,w,x;function y(){l={showCreateCustomAudienceDialog:false,showDeleteDialog:false,showPixelDialog:false,showRegularEditDialog:false,showWCADialog:false,showMACADialog:false,showShareDialog:false,showLookalikeDialog:false,showSavedTargetSpecDialog:false,showBulkDeleteDialog:false,showOptOutDialog:false,showFilterPane:false};m=null;n=null;o=null;p=null;q={name:true,type:true,source:true,size:true,status:true,dateCreated:true,audienceID:false,sharing:false,debug:true};r=false;s=false;t=null;u=false;v={edit:false};w={edit:null};x={wcaState:null,stsState:null};}y();function z(ba){if(ba&&ba.cursors.after){p=ba.cursors.after;}else p=null;}var aa=k(new i(),{getViewState:function(){return new j(l);},getAudienceIdClicked:function(){return m;},getSelectedTab:function(){return n;},hasFilterContent:function(){return u;},getNameFilter:function(){return o?o.name:null;},setNameFilter:function(ba){u=true;o=o||{};o.name=ba;},getAfterCursor:function(){return p;},getColumnsShown:function(){return q;},getFilterSet:function(){return t;},isSaveEnableForDetailsPage:function(){return v.edit;},getEditSaveHandlerForDetailsPage:function(){return w.edit;},getWCAFormState:function(){return x.wcaState;},getSTSFormState:function(){return x.stsState;},isFiltering:function(){return r;},isLoadingMoreAudiences:function(){return s;},dispatchToken:h.register(function(ba){var ca=ba.action,da=true;switch(ca.actionType){case g.VIEW_SHOW_CREATE_CA_DIALOG:l.showCreateCustomAudienceDialog=true;break;case g.VIEW_CLOSE_CREATE_CA_DIALOG:l.showCreateCustomAudienceDialog=false;break;case g.VIEW_SHOW_DELETE_AUDIENCE_DIALOG:l.showDeleteDialog=true;m=ca.audienceId;break;case g.VIEW_CLOSE_DELETE_AUDIENCE_DIALOG:l.showDeleteDialog=false;m=null;break;case g.VIEW_SHOW_PIXEL_DIALOG:l.showPixelDialog=true;break;case g.VIEW_CLOSE_PIXEL_DIALOG:l.showPixelDialog=false;break;case g.VIEW_SHOW_REGULAR_EDIT_DIALOG:l.showRegularEditDialog=true;m=ca.audienceId;break;case g.VIEW_CLOSE_REGULAR_EDIT_DIALOG:l.showRegularEditDialog=false;m=null;break;case g.VIEW_SHOW_WCA_DIALOG:l.showWCADialog=true;m=ca.audienceId;break;case g.VIEW_CLOSE_WCA_DIALOG:l.showWCADialog=false;m=null;break;case g.VIEW_SHOW_MACA_DIALOG:l.showMACADialog=true;break;case g.VIEW_CLOSE_MACA_DIALOG:l.showMACADialog=false;break;case g.VIEW_SHOW_SHARE_AUDIENCE_DIALOG:l.showShareDialog=true;m=ca.audienceId;break;case g.VIEW_CLOSE_SHARE_AUDIENCE_DIALOG:l.showShareDialog=false;m=null;break;case g.VIEW_SHOW_LOOKALIKE_DIALOG:l.showLookalikeDialog=true;m=ca.audienceId;break;case g.VIEW_CLOSE_LOOKALIKE_DIALOG:l.showLookalikeDialog=false;m=null;break;case g.VIEW_SHOW_SAVED_TARGET_SPEC_DIALOG:l.showSavedTargetSpecDialog=true;m=ca.audienceId;break;case g.VIEW_CLOSE_SAVED_TARGET_SPEC_DIALOG:l.showSavedTargetSpecDialog=false;m=null;break;case g.VIEW_SHOW_BULK_DELETE_DIALOG:l.showBulkDeleteDialog=true;break;case g.VIEW_CLOSE_BULK_DELETE_DIALOG:l.showBulkDeleteDialog=false;break;case g.VIEW_SHOW_OPT_OUT_DIALOG:l.showOptOutDialog=true;m=ca.audienceId;break;case g.VIEW_CLOSE_OPT_OUT_DIALOG:l.showOptOutDialog=false;m=null;break;case g.VIEW_INIT_DETAILS_TAB:n=ca.tab;break;case g.VIEW_DETAILS_TAB_CHANGE:n=ca.tab;break;case g.VIEW_AFTER_CURSOR_CHANGE:z(ca.paging);da=false;break;case g.VIEW_INIT_COLUMN_DISPLAY:q=ca.columnsShown;da=false;break;case g.VIEW_COLUMN_DISPLAY_CHANGE:q[ca.column]=ca.show;break;case g.VIEW_SHOW_FILTER_PANE:l.showFilterPane=true;break;case g.VIEW_HIDE_FILTER_PANE:l.showFilterPane=false;break;case g.VIEW_UPDATE_FILTER_SET:u=true;t=ca.filterSet;break;case g.VIEW_UPDATE_SAVE_STATE_FOR_EDIT:if(v.edit===ca.saveEnable)da=false;v.edit=ca.saveEnable;w.edit=ca.editSaveCallback;break;case g.VIEW_UPDATE_WCA_FORM_STATE:x.wcaState=ca.formState;break;case g.VIEW_UPDATE_STS_FORM_STATE:x.stsState=ca.formState;break;case g.VIEW_UPDATE_FILTERING_STATE:r=ca.isFiltering;break;case g.VIEW_UPDATE_LOADING_MORE_AUDIENCES:s=ca.isLoadingMoreAudiences;break;default:da=false;break;}if(da)aa.inform('change');})});e.exports=aa;},null);
__d("AdsAMDataSourceUtil",["CustomAudienceDataSourceType","CustomAudienceDataSourceSubType","fbt"],function(a,b,c,d,e,f,g,h,i){var j=g,k=h,l={};l[j.UNKNOWN]="Unknown";l[j.FILE_IMPORTED]="Data File";l[j.EVENT_BASED]="Event";l[j.SEED_BASED]="Lookalike";l[j.THIRD_PARTY_IMPORTED]="Email Provider";l[j.COPY_PASTE]="Copy & Paste";l[j.CLAIM_BASED]="Claim";var m={};m[k.ANYTHING]="Anything";m[k.NOTHING]="Nothing";m[k.HASHES]="Hashes";m[k.USER_IDS]="UIDs";m[k.HASHES_OR_USER_IDS]="Hashes & UIDs";m[k.MOBILE_ADVERTISER_IDS]="IDFAs";m[k.EXTERNAL_IDS]="External IDs";m[k.MULTI_HASHES]="Multi Hashes";m[k.WEB_PIXEL_HITS]="Website";m[k.WEB_PIXEL_COMBINATION_EVENTS]="Website";m[k.MOBILE_APP_EVENTS]="App";m[k.MOBILE_APP_COMBINATION_EVENTS]="App";m[k.CUSTOM_AUDIENCE_USERS]="Custom Audience";m[k.PAGE_FANS]="Page Fans";m[k.CONVERSION_PIXEL_HITS]="Conversion Pixel Hits";m[k.APP_USERS]="App Users";m[k.S_EXPR]="Saved Target Group";m[k.MAIL_CHIMP_EMAIL_HASHES]="MailChimp";m[k.CONSTANT_CONTACTS_EMAIL_HASHES]="ConstantContacts";m[k.COPY_PASTE_EMAIL_HASHES]="Emails";m[k.USER_PROPERTIES]="User Properties";var n={};n[j.FILE_IMPORTED]=true;n[j.EVENT_BASED]=true;n[j.SEED_BASED]=true;n[j.THIRD_PARTY_IMPORTED]=true;n[j.COPY_PASTE]=true;n[j.CLAIM_BASED]=true;var o={};o[k.WEB_PIXEL_HITS]=true;o[k.WEB_PIXEL_COMBINATION_EVENTS]=true;o[k.MOBILE_APP_EVENTS]=true;o[k.MOBILE_APP_COMBINATION_EVENTS]=true;o[k.MAIL_CHIMP_EMAIL_HASHES]=true;o[k.COPY_PASTE_EMAIL_HASHES]=true;o[k.USER_PROPERTIES]=true;o[k.CUSTOM_AUDIENCE_USERS]=true;o[k.PAGE_FANS]=true;o[k.CONVERSION_PIXEL_HITS]=true;o[k.APP_USERS]=true;o[k.S_EXPR]=true;var p=j.FILE_IMPORTED,q={};q[j.FILE_IMPORTED]=function(w){var x=JSON.parse(w.data_source.creation_params);return (x&&x.file_name)||'';};q[j.SEED_BASED]=function(w){var x=w.lookalike_spec&&w.lookalike_spec.origin;if(x&&x.length){var y=x.map(function(z){return z.name;}).join(', ');return i._("Similar to {name}",[i.param("name",y)]);}return '';};q[j.THIRD_PARTY_IMPORTED]=function(w){var x=JSON.parse(w.data_source.creation_params);return (x&&x.list_name)||'';};var r=function(w){return n[w]?l[w]:l[p];},s=function(w){return o[w]?m[w]:'';},t=function(w){var x=w.data_source.type;if(!x)return '';var y=q[x];return y?y(w):'';},u=function(w){var x=s(w.sub_type);if(!x)x=r(w.type);if(!x)x="Unknown";return x;},v=function(w){return (w.type===j.SEED_BASED?"Lookalike":"Custom Audience");};e.exports={TYPES:j,SUBTYPES:k,textByType:r,textBySubType:s,textByDataSource:u,detailOfAudience:t,getTypeColumnText:v};},null);
__d("CustomAudienceTosUtils",[],function(a,b,c,d,e,f){e.exports={getTosRequirements:function(g){return {custom_audience:g?228298987271350:215449065224656,website_custom_audience:206760949512025,mobile_app_custom_audience:206760949512025};}};},null);
__d("AdsCMStateActions",["AdsCMActionTypes","AdsCMActionCategories","AdsCMStateConfig","AdsDispatcher"],function(a,b,c,d,e,f,g,h,i,j){'use strict';function k(m,n,o){var p={old_value:n};j.handleUpdateFromViewAction({category:h.STATE_CHANGE,actionType:g.PAGE_CHANGE,data:{state:m,replacePage:o},logData:p});}var l={toggleSort:function(m,n){j.handleUpdateFromViewAction({category:h.STATE_CHANGE,actionType:g.SORT_TOGGLED,data:{tabHash:n,field:m}});},navigateBy:function(m,n){j.handleUpdateFromViewAction({category:h.STATE_CHANGE,actionType:g.BACK_FORWARD_PRESSED,data:{tabHash:n,forwardBy:m}});},navigateToIndex:function(m,n){j.handleUpdateFromViewAction({category:h.STATE_CHANGE,actionType:g.HISTORY_JUMP,data:{tabHash:n,forwardBy:m}});},replaceWithPage:function(m,n){k(m,n,true);},navigateToPage:function(m,n){k(m,n,false);},selectTab:function(m){var n={};n[i.getKey('TAB')]=m;j.handleUpdateFromViewAction({category:h.STATE_CHANGE,actionType:g.TAB_SELECTED,data:n});},removePages:function(m){j.handleUpdateFromViewAction({category:h.STATE_CHANGE,actionType:g.REMOVE_PAGES,data:{pageIDs:m}});}};e.exports=l;},null);
__d("AdsCMBackLink.react",["Link.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j){'use strict';var k=h.PropTypes,l=h.createClass({displayName:"AdsCMBackLink",propTypes:{onClick:k.func.isRequired},render:function(){return (h.createElement(g,h.__spread({},this.props,{onClick:this.props.onClick}),h.createElement("div",{className:"_3ue6"}),"Back"));}});e.exports=l;},null);
__d("AdsCMNavigationBlocker",["HistoryManager","Run","URI","fbt","invariant","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m={didTransitionTo:r,setBlocker:s,hasBlocker:u,removeBlocker:t,callBlocker:v},n,o=(new i(window.location.href)).toString(),p=o,q=null;function r(w,x){o=x.toString();if(q){if(!n){n=true;var y=function(){l(function(){u()&&t();w.go(o,false);});};l(function(){g.go(p,false);n=false;q(y);});}return true;}p=o;return false;}h.onBeforeUnload(function(){if(q)return ("You have unsaved changes that will be lost if you leave the page.");return null;},false);function s(w){k(q===null||q===w);q=w;}function t(){k(!n);k(q);q=null;p=o;}function u(){return !!q;}function v(w){k(q);var x=function(){u()&&t();l(w);};q(x);}e.exports=m;},null);
__d("AdsFlexibleTargetingConstants",["keyMirror","adsGKCheck"],function(a,b,c,d,e,f,g,h){'use strict';var i=g({INCLUDE_ALL:null,INCLUDE_ANY:null,EXCLUDE_ALL:null}),j={interests:["Interests"],behaviors:["Behaviors"],user_adclusters:["More Categories","Partner Categories"],college_years:["Demographics","Education","Undergrad Years"],education_majors:["Demographics","Education","Fields of Study"],education_schools:["Demographics","Education","Schools"],education_statuses:["Demographics","Education","Education level"],ethnic_affinity:["Demographics","Ethnic Affinity"],family_statuses:["Demographics","Parents"],generation:["Demographics","Generation"],home_ownership:["Demographics","Home","Home Ownership"],home_type:["Demographics","Home","Home Type"],home_value:["Demographics","Home","Home Value"],household_composition:["Demographics","Home","Household Composition"],income:["Demographics","Financial","Income"],industries:["Demographics","Work","Industries"],interested_in:["Demographics","Relationship","Interested In"],life_events:["Demographics","Life Events"],moms:["Demographics","Parents","Moms"],net_worth:["Demographics","Financial","Net Worth"],office_type:["Demographics","Work","Office Type"],politics:["Demographics","Politics (US)"],relationship_statuses:["Demographics","Relationship","Relationship Status"],work_employers:["Demographics","Work","Employers"],work_positions:["Demographics","Work","Job Titles"]},k={education_majors:true,education_schools:true,interests:true,work_employers:true,work_positions:true},l={college_years:true,education_statuses:true,interested_in:true,relationship_statuses:true},m={interests:true,behaviors:true,user_adclusters:true,ethnic_affinity:true,family_statuses:true,generation:true,home_ownership:true,home_type:true,home_value:true,household_composition:true,income:true,industries:true,life_events:true,moms:true,net_worth:true,office_type:true,politics:true},n=[{type:i.INCLUDE_ANY,income:[{id:'6006371343132',name:"Over 125,000"}],behaviors:[{id:'6017831572183',name:"iPhone 6"}]},{type:i.EXCLUDE_ALL,interests:[{id:'6003167425934',name:"Shopping and fashion"}]}],o=[{component:'AudienceEditor'},{component:'SectionDivider'},{component:h('geo_v2_ui_gk')?'LocationEditorV2':'LocationEditor'},{component:'InvisibleSectionDivider'},{component:'DemographicsEditor'},{component:'InvisibleSectionDivider'},{component:'LanguagesEditor'},{component:'InvisibleSectionDivider'},{component:'AdvancedDemographicsDropdownEditor',customProperties:{showFlexibleTargetingDemoOptions:true}},{component:'SectionDivider'},{component:'FlexibleEditor'},{component:'SectionDivider'},{component:'ConnectionsEditor'}],p='FLEXIBLE_TARGETING_API',q={ITEM_TYPE:i,MOCK_DATA:n,TARGETING_TYPE_TO_LABELS:j,TARGETING_TYPES_FROM_SEARCH:k,TARGETING_TYPES_FROM_ENUM:l,USE_ENUM_TYPES:false,USE_WORK_EDU_SEARCH_TYPES:false,DEFAULT_ITEM_EDITOR_WIDTH:430,MTC_PE_CONFIG:o,SUPPORT_TARGETING_TYPES:m,FLEXIBLE_TARGETING_API:p};e.exports=q;},null);
__d("AdsCommonTargetingApiTransformer",["AdsAPISpec","AdsCommonTargetingStore","AdsCreationConfig","AdsTargetingAdvancedDemoConstants","AdsFlexibleTargetingConstants","AdsUtils","LocationConstants","ads-app-platforms","ads-mobile-platforms","getAdsTargetingLocationsCount","copyProperties","trimObject","whitelistObjectKeys"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=i.maxAge,u=i.minAge,v=i.minAgeDefault,w=j.graduationYearBounds,x=o.operatingSystems,y=k.ITEM_TYPE,z=function(ia){if(!ia||!ia.length)return ia;return ia.charAt(0).toUpperCase()+ia.slice(1);},aa=function(ia){var ja={};return function(ka){if(!ja[ka])ja[ka]=ia+z(ka);return ja[ka];};},ba=aa('get'),ca=aa('from');function da(ia,ja){return function(ka){var la=h.getValue(ia,ka);return la===(void 0)?ja:la;};}function ea(ia,ja){return function(ka){var la=h.getValue(ia,ka)||ja||[],ma=['id','name'];return la.map(function(na){return s(na,ma);});};}function fa(ia,ja){return function(ka){var la={};la[ia]=ka[l.underscoreKey(ia)]||ja;return la;};}function ga(ia,ja){ia=ia||{};ja=ja||{};var ka={countries:ia.countries||[],cities:(ia.cities||[]).map(function(na){return {name:na.name,key:na.key,radius:na.radius,distance_unit:na.distance_unit,region:na.region};}),regions:(ia.regions||[]).map(function(na){return {name:na.name,key:na.key};}),zips:(ia.zips||[]).map(function(na){return {name:na.name,key:na.key};})};if(ia.custom_locations)ka.custom_locations=ia.custom_locations.map(function(na){return {name:na.address_string,address_string:na.address_string,distance_unit:na.distance_unit,latitude:na.latitude,longitude:na.longitude,radius:na.radius};});if(ia.geo_markets)ka.geo_markets=ia.geo_markets.map(function(na){return {name:na.name,key:na.key};});var la=p(ia);if(la&&!ja.isExclusion){var ma=ia.location_types||[];if(!ma.length)ma=[m.TYPE_HOME,m.TYPE_RECENT];ka.location_types=ma;}return ka;}var ha={fromApi:function(ia,ja){var ka={},la=g.TARGETING_FIELDS;for(var ma=0;ma<la.length;ma++)ka=q(ka,this.from(la[ma],ia));if(ja&&ja[k.FLEXIBLE_TARGETING_API]){Object.keys(k.SUPPORT_TARGETING_TYPES).forEach(function(na){return delete ka[l.camelCaseKey(na)];});}else delete ka.flexibleSpec;return ka;},toApi:function(ia,ja){var ka={},la=g.TARGETING_FIELDS;for(var ma=0;ma<la.length;ma++)ka[l.underscoreKey(la[ma])]=this.get(la[ma],ia);delete ka.countries;delete ka.regions;delete ka.cities;delete ka.zips;delete ka.radius;delete ka.keywords;return r(ka);},get:function(ia,ja){return this[ba(ia)](ja);},from:function(ia,ja){return this[ca(ia)](ja);},getCities:da('cities',[]),fromCities:fa('cities',[]),getGeoMarkets:da('geo_markets',[]),fromGeoMarkets:fa('geo_markets',[]),getCustomLocations:da('custom_locations',[]),fromCustomLocations:fa('custom_locations',[]),getCountries:da('countries',[]),fromCountries:fa('countries',[]),getRadius:da('radiusIfValid',0),fromRadius:fa('radius',0),getRegions:da('regions',[]),fromRegions:fa('regions',[]),getZips:da('zips',[]),fromZips:fa('zips',[]),getAgeMax:function(ia){var ja=h.getValue('ageMax',ia);if(!ja){return t;}else return ja;},fromAgeMax:fa('ageMax',t),getAgeMin:function(ia){var ja=h.getValue('ageMin',ia),ka=0;if(!ja){ka=v;}else ka=ja;return Math.max(this._getAgeMinLimit(ia),ka);},fromAgeMin:fa('ageMin',v),_getAgeMinLimit:da('ageMinLimit',u),getGenders:function(ia){var ja=this._getSex(ia);return ja===g.GENDERS.ALL?[]:[ja];},fromGenders:function(ia){var ja=g.GENDERS.ALL;if(ia.genders&&ia.genders.length)ja=ia.genders[0];return {sex:ja};},_getSex:da('sex',g.GENDERS.ALL),getInterests:da('interests'),fromInterests:fa('interests'),getKeywords:da('keywords'),fromKeywords:fa('keywords'),getUserAdclusters:da('userAdclusters'),fromUserAdclusters:fa('userAdclusters'),getConjunctiveUserAdclusters:da('conjunctiveUserAdclusters'),fromConjunctiveUserAdclusters:fa('conjunctiveUserAdclusters'),getCustomAudiences:ea('customAudiences'),fromCustomAudiences:fa('customAudiences'),getExcludedCustomAudiences:ea('excludedCustomAudiences'),fromExcludedCustomAudiences:fa('excludedCustomAudiences'),getConnections:da('connections'),fromConnections:fa('connections'),getExcludedConnections:da('excludedConnections'),fromExcludedConnections:fa('excludedConnections'),getFriendsOfConnections:da('friendsOfConnections'),fromFriendsOfConnections:fa('friendsOfConnections'),getInterestedIn:da('interestedIn',[]),fromInterestedIn:function(ia){return {interestedIn:ia.interested_in};},getRelationshipStatuses:da('relationshipStatuses'),fromRelationshipStatuses:fa('relationshipStatuses'),getFamilyStatuses:da('familyStatuses'),fromFamilyStatuses:fa('familyStatuses'),getIndustries:da('industries'),fromIndustries:fa('industries'),getLifeEvents:da('lifeEvents'),fromLifeEvents:fa('lifeEvents'),getMarkets:da('markets'),fromMarkets:fa('markets'),getPolitics:da('politics'),fromPolitics:fa('politics'),getIncome:da('income'),fromIncome:fa('income'),getNetWorth:da('netWorth'),fromNetWorth:fa('netWorth'),getHomeType:da('homeType'),fromHomeType:fa('homeType'),getHomeOwnership:da('homeOwnership'),fromHomeOwnership:fa('homeOwnership'),getHomeValue:da('homeValue'),fromHomeValue:fa('homeValue'),getEthnicAffinity:da('ethnicAffinity'),fromEthnicAffinity:fa('ethnicAffinity'),getGeneration:da('generation'),fromGeneration:fa('generation'),getHouseholdComposition:da('householdComposition'),fromHouseholdComposition:fa('householdComposition'),getMoms:da('moms'),fromMoms:fa('moms'),getOfficeType:da('officeType'),fromOfficeType:fa('officeType'),getLocales:da('locales'),fromLocales:fa('locales'),getUserOs:function(ia){var ja=this._getMobileOperatingSystem(ia);if(!ja)return [];var ka;if(ja===x.IOS){ka=this._getMinIosVersion(ia);}else if(ja===x.ANDROID)ka=this._getMinAndroidVersion(ia);var la=function(ma,na){if(!na)return ma;return ma+'_ver_'+na+'_and_above';};return [la(ja,ka)];},fromUserOs:function(ia){var ja=ia.user_os||[],ka={userOs:ja};ja.forEach(function(la){var ma=null;if(la.indexOf('_ver_')>=0){var na=la.split('_ver_')[1];ma=na.split('_')[0];}var oa=n.getMobileOperatingSystemFromUserOS(la);if(oa===x.IOS){ka.mobileOperatingSystem=x.IOS;ka.minIosVersion=ma;}else if(oa===x.ANDROID){ka.mobileOperatingSystem=x.ANDROID;ka.minAndroidVersion=ma;}else ka.mobileOperatingSystem=null;});return ka;},_getMobileOperatingSystem:da('mobileOperatingSystem'),_getMinIosVersion:da('minIosVersion'),_getMinAndroidVersion:da('minAndroidVersion'),getUserDevice:function(ia){var ja=this._getMobileOperatingSystem(ia),ka=this._getMobileDevices(ia);if(ja===x.IOS){return ka.filter(o.isIosDevice);}else if(ja===x.ANDROID)return ka.filter(o.isAndroidDevice);return [];},fromUserDevice:function(ia){var ja=o.deviceTypes,ka=ia.user_device||[];if(!ka.length)ka=[ja.IPAD,ja.IPOD,ja.IPHONE];return {mobileDevices:ka};},_getMobileDevices:da('mobileDevices',[]),getWirelessCarrier:function(ia){var ja=o.carriers;if(this._getWifiOnly(ia))return [ja.WIFI];return [];},fromWirelessCarrier:function(ia){var ja=ia.wireless_carrier,ka=o.carriers,la={wifiOnly:false};if(ja&&ja.length&&ja[0]===ka.WIFI)la.wifiOnly=true;return la;},_getWifiOnly:da('wifiOnly',false),getEducationMajors:da('educationMajors',[]),fromEducationMajors:fa('educationMajors',[]),getEducationSchools:da('educationSchools',[]),fromEducationSchools:fa('educationSchools',[]),getCollegeYears:function(ia){if(this._getTargetAllGraduationYears(ia))return [];var ja=this._getMinGradYear(ia),ka=this._getMaxGradYear(ia),la=[];for(var ma=ja;ma<=ka;ma++)la.push(ma);return la;},fromCollegeYears:function(ia){var ja=ia.college_years,ka={targetAllGraduationYears:true};if(ja&&ja.length){ka.minGradYear=ja[0];ka.maxGradYear=ja[ja.length-1];ka.targetAllGraduationYears=false;}return ka;},_getTargetAllGraduationYears:da('targetAllGraduationYears'),_getMaxGradYear:da('maxGradYear',w.maxGraduationYear),_getMinGradYear:da('minGradYear',w.minGraduationYear),getEducationStatuses:da('educationStatuses'),fromEducationStatuses:fa('educationStatuses'),getGeoLocations:function(ia){var ja=h.getValue('geoLocations',ia);return ga(ja,{isExclusion:false});},fromGeoLocations:function(ia){var ja=ia.geo_locations||{};if(Array.isArray(ja))ja={};return {geoLocations:ja};},getExcludedGeoLocations:function(ia){var ja=h.getValue('excludedGeoLocations',ia);return ga(ja,{isExclusion:true});},fromExcludedGeoLocations:function(ia){var ja=ia.excluded_geo_locations||{};if(Array.isArray(ja))ja={};return {excludedGeoLocations:ja};},getWorkEmployers:da('workEmployers',[]),fromWorkEmployers:fa('workEmployers',[]),getWorkPositions:da('workPositions'),fromWorkPositions:fa('workPositions'),getBehaviors:da('behaviors'),fromBehaviors:fa('behaviors'),getExcludedUserAdclusters:da('excludedUserAdclusters'),fromExcludedUserAdclusters:fa('excludedUserAdclusters'),getPageTypes:da('pageTypes'),fromPageTypes:fa('pageTypes'),getFlexibleSpec:function(ia){var ja=h.getValue('flexibleSpec',ia)||[],ka=[];ja.forEach(function(la){if(Object.keys(la).length<=1)return;if(la.type===y.INCLUDE_ALL){Object.keys(la).forEach(function(na){if(na!=='type')la[na].forEach(function(oa){var pa={};pa[na]=[oa];ka.push(pa);});});}else if(la.type===y.INCLUDE_ANY){var ma={};Object.keys(la).forEach(function(na){if(na!=='type')ma[na]=la[na];});ka.push(ma);}});return ka;},fromFlexibleSpec:function(ia){return this._fromFlexibleSpec(ia);},getExclusions:function(ia){var ja=h.getValue('flexibleSpec',ia)||[],ka={};ja.forEach(function(la){if(Object.keys(la).length<=1)return;if(la.type===y.EXCLUDE_ALL)Object.keys(la).forEach(function(ma){if(ma!=='type'){ka[ma]=ka[ma]||[];ka[ma]=ka[ma].concat(la[ma]);}});});return ka;},fromExclusions:function(ia){return this._fromFlexibleSpec(ia);},_fromFlexibleSpec:function(ia){var ja=[];Object.keys(ia).forEach(function(oa){if(k.SUPPORT_TARGETING_TYPES[oa]){var pa={type:y.INCLUDE_ANY};pa[oa]=ia[oa];ja.push(pa);}});var ka=ia.flexible_spec;if(ka){var la={type:y.INCLUDE_ALL};ka.forEach(function(oa){if(Object.keys(oa).length===1&&oa[Object.keys(oa)[0]].length===1){var pa=Object.keys(oa)[0],qa=pa in la?la[pa].concat(oa[pa]):oa[pa];la[pa]=qa;}else{var ra=Object.assign({},oa);ra.type=y.INCLUDE_ANY;ja.push(ra);}});if(Object.keys(la).length>1)ja.push(la);}var ma=ia.exclusions;if(ma){var na={type:y.EXCLUDE_ALL};na=Object.assign(na,ma);ja.push(na);}return {flexibleSpec:ja};}};e.exports=ha;},null);
__d("AdsCommonTargetingBulkApiSpecStore",["AdsAPITargetFields","AdsCommonTargetingActionTypes","ImmutableObject","getObjectValues","mixInEventEmitter","whitelistObjectKeys"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m=j(g),n='canonical-id';function o(p){this.$AdsCommonTargetingBulkApiSpecStore0=p;this.$AdsCommonTargetingBulkApiSpecStore1=this.$AdsCommonTargetingBulkApiSpecStore0.register(this.$AdsCommonTargetingBulkApiSpecStore2.bind(this));this.$AdsCommonTargetingBulkApiSpecStore3={};}o.prototype.$AdsCommonTargetingBulkApiSpecStore2=function(p){var q=p.action,r=false;switch(q.actionType){case h.TARGETING_INIT:this.clearState(q.targetingID||n);break;case h.BULK_API_SPEC_SET:this.$AdsCommonTargetingBulkApiSpecStore4(q.targetingID||n,l(q,m));break;}if(r)this.emit('change',{payloadsource:p.payloadsource,targetingID:q.targetingID||n});};o.prototype.clearAllState=function(){this.$AdsCommonTargetingBulkApiSpecStore3={};};o.prototype.clearState=function(p){this.$AdsCommonTargetingBulkApiSpecStore3[p]={};};o.prototype.getState=function(p){return new i(this.$AdsCommonTargetingBulkApiSpecStore3[p]||{});};o.prototype.getValue=function(p,q){return this.$AdsCommonTargetingBulkApiSpecStore5(p,q||n);};o.prototype.$AdsCommonTargetingBulkApiSpecStore5=function(p,q){return (this.$AdsCommonTargetingBulkApiSpecStore3[q]||{})[p];};o.prototype.$AdsCommonTargetingBulkApiSpecStore4=function(p,q){this.$AdsCommonTargetingBulkApiSpecStore3[p]=Object.assign(this.$AdsCommonTargetingBulkApiSpecStore3[p],q);};k(o,{change:true});e.exports=o;},null);
__d("AdsCommonTargetingBulkApiSpecStoreInstance",["AdsDispatcher","AdsCommonTargetingBulkApiSpecStore"],function(a,b,c,d,e,f,g,h){'use strict';e.exports=new h(g);},null);
__d("AdsCommonTargetingViewConfig",["invariant"],function(a,b,c,d,e,f,g){var h={AdvancedDemographicsDropdownEditor:{interested_in:true,relationship_statuses:true,education_statuses:true,education_schools:true,education_majors:true,college_years:true,work_employers:true,work_positions:true,family_statuses:true,industries:true,life_events:true,politics:true,income:true,net_worth:true,home_type:true,home_ownership:true,home_value:true,ethnic_affinity:true,generation:true,household_composition:true,moms:true,office_type:true},AgeEditor:{age_min:true,age_max:true},AppTargetEditor:{},AudienceEditor:{custom_audiences:true,excluded_custom_audiences:true},BehaviorsEditor:{behaviors:true},CategoriesEditor:{user_adclusters:true},ConnectionsEditor:{connections:true,excluded_connections:true,friends_of_connections:true},DemographicsEditor:{age_min:true,age_max:true,genders:true},GenderEditor:{genders:true},InterestsEditor:{interests:true},LanguagesEditor:{locales:true},LocationEditor:{geo_locations:true,excluded_geo_locations:true},MapLocationEditor:{geo_locations:true,excluded_geo_locations:true},MobilePlatformEditor:{wireless_carrier:true,user_device:true},SaveSpecComponent:{},LoadSpecComponent:{},SectionDivider:{},TargetingSentences:{},EstimatedReach:{},MsiteExample:{},LocationEditorV2:{},FlexibleEditor:{},InvisibleSectionDivider:{}},i=function(l){g(l in h);return Object.keys(h[l]);},j=function(){return [{component:'TargetingSentences'},{component:'SectionDivider'},{component:'EstimatedReach'},{component:'SectionDivider'},{component:'AudienceEditor'},{component:'MobilePlatformEditor'},{component:'AgeEditor'},{component:'GenderEditor'},{component:'SectionDivider'},{component:'InterestsEditor'},{component:'SectionDivider'},{component:'LocationEditor'},{component:'SectionDivider'},{component:'LanguagesEditor'},{component:'SectionDivider'},{component:'BehaviorsEditor'},{component:'SectionDivider'},{component:'ConnectionsEditor'},{component:'SectionDivider'},{component:'AdvancedDemographicsDropdownEditor'},{component:'SectionDivider'},{component:'CategoriesEditor'},{component:'SectionDivider'},{component:'SaveSpecComponent'},{component:'SectionDivider'},{component:'LoadSpecComponent'}];},k={VALID_COMPONENTS:h,getDefaultConfig:j,getFieldsForComponent:i};e.exports=k;},null);
__d("AdsCommonTargetingUtils",["AdsCommonTargetingViewConfig","AdsCreationConfig","AdsMixedValue","AdsUniformValue"],function(a,b,c,d,e,f,g,h,i,j){var k='US';function l(t,u){var v={},w={},x={};u.forEach(function(z){var aa=z.component,ba=g.getFieldsForComponent(aa),ca=ba.some(function(da){return (t[da] instanceof i);});if(ca){w[aa]=true;ba.forEach(function(da){v[da]=true;x[da]=t[da];});}});var y={};Object.keys(t).forEach(function(z){if(!v[z]&&t[z] instanceof j)y[z]=t[z].getValue();});return {newSpec:y,mixedStateComponents:w,remainingBulkSpec:x};}function m(t){var u=Object.keys(t);u.forEach(function(v){var w=t[v],x=n(w);if(x)t[v]=x;});}function n(t){if(!t||typeof t!=='object')return null;var u=Object.keys(t);if(u.length!==1||u[0]!=='$BulkValue')return null;var v=t[u[0]];return o(v)?j.create(v):i.create(v);}function o(t){if(t.length<2)return true;var u=p(t[0]);for(var v=1;v<t.length;v++)if(p(t[v])!==u)return false;return true;}function p(t){if(t===null||typeof t==='undefined')return null;if(Object(t)!==t)return t;if(Array.isArray(t)){t=t.map(function(w){return p(w);}).sort();return JSON.stringify(t);}var u=Object.keys(t).sort(),v=u.map(function(w){return [w,p(t[w])];});return JSON.stringify(v);}function q(t,u){return (p(t)===p(u));}function r(t){return {geo_locations:{cities:[],countries:[s(t)],regions:[],zips:[]}};}function s(t){return (t.business_country_code||h.userLocalCountryCode||k);}f.getMixedStateComponents=l;f.reconstructBulkValues=m;f.reconstructBulkValue=n;f.isUniform=o;f.toComparable=p;f.areEqual=q;f.getDefaultTargeting=r;f.getDefaultCountry=s;},null);
__d("AdsCommonTargetingSectionMixin",["AdsCommonTargetingStore","React","SubscriptionsHandler","XUISpinner.react"],function(a,b,c,d,e,f,g,h,i,j){var k={_sectionEditor:null,componentDidMount:function(){this._subscriptions=new i();this._subscriptions.addSubscriptions(g.subscribe('change',function(l,m){if(m.targetingID===this.props.targetingID)this.forceUpdate();}.bind(this)));},componentWillUnmount:function(){this._subscriptions.release();},updateSectionEditor:function(l){this._setSectionEditor(l);if(!this.isMounted())return;this.forceUpdate();},_setSectionEditor:function(l){this._sectionEditor=l;},getSectionEditor:function(){return this._sectionEditor;},getConfigValue:function(l,m,n){if(!l||l[m]===(void 0))return n;return l[m];},getDefaultWidth:function(){return this.props.extraData.defaultWidth;},getDefaultTooltip:function(){return (this.props.config?this.getConfigValue(this.props.config.customProperties,'tooltip'):(void 0));},renderSpinner:function(){return h.createElement(j,{size:"small"});},render:function(){if(!this._sectionEditor)return this.renderSpinner();return this.renderSectionEditor();}};e.exports=k;},null);
__d("AdsCommonTargetingAdvancedDemographicsDropdownEditor",["AdsCommonTargetingActions","AdsCommonTargetingSectionMixin","AdsCommonTargetingStore","Bootloader","React","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=k.createClass({displayName:"AdsCommonTargetingAdvancedDemographicsDropdownEditor",mixins:[h],propTypes:{targetingID:k.PropTypes.string.isRequired,config:k.PropTypes.object,rowRenderer:k.PropTypes.func,extraData:k.PropTypes.object},getDefaultProps:function(){return {extraData:{}};},componentWillMount:function(){j.loadModules(["AdsTargetingAdvancedDemographicsDropdownEditor.react"],this.updateSectionEditor);},renderSectionEditor:function(){var n=this.getSectionEditor();l(this.props.extraData.dao);var o=this.getConfigValue(this.props.config.customProperties,'showNewAdvancedDemoOptions',true),p=this.getConfigValue(this.props.config.customProperties,'showFlexibleTargetingDemoOptions',false),q=this.props.targetingID,r=function(s){return function(t){s(t,q);};};return (k.createElement(n,{width:this.getDefaultWidth(),dao:this.props.extraData.dao,rowRenderer:this.props.rowRenderer,oneColumn:this.props.extraData.oneColumn,alternateLayout:this.props.extraData.alternateLayout,targetingData:{geoLocations:i.getValue('geoLocations',q),interestedIn:i.getValue('interestedIn',q),relationshipStatuses:i.getValue('relationshipStatuses',q),educationStatuses:i.getValue('educationStatuses',q),educationSchools:i.getValue('educationSchools',q),educationMajors:i.getValue('educationMajors',q),targetAllGraduationYears:i.getValue('targetAllGraduationYears',q),maxGradYear:i.getValue('maxGradYear',q),minGradYear:i.getValue('minGradYear',q),workEmployers:i.getValue('workEmployers',q),workPositions:i.getValue('workPositions',q),familyStatuses:i.getValue('familyStatuses',q),industries:i.getValue('industries',q),lifeEvents:i.getValue('lifeEvents',q),politics:i.getValue('politics',q),income:i.getValue('income',q),netWorth:i.getValue('netWorth',q),homeType:i.getValue('homeType',q),homeOwnership:i.getValue('homeOwnership',q),homeValue:i.getValue('homeValue',q),ethnicAffinity:i.getValue('ethnicAffinity',q),generation:i.getValue('generation',q),householdComposition:i.getValue('householdComposition',q),moms:i.getValue('moms',q),officeType:i.getValue('officeType',q)},actions:{changeInterestedIn:r(g.changeInterestedIn),changeRelationshipStatuses:r(g.changeRelationshipStatuses),changeEducationStatuses:r(g.changeEducationStatuses),changeEducationSchools:r(g.changeEducationSchools),changeEducationMajors:r(g.changeEducationMajors),changeMaxGradYear:r(g.changeMaxGradYear),changeMinGradYear:r(g.changeMinGradYear),changeTargetAllGraduationYears:r(g.changeTargetAllGraduationYears),changeWorkEmployers:r(g.changeWorkEmployers),changeWorkPositions:r(g.changeWorkPositions),changeFamilyStatuses:r(g.changeFamilyStatuses),changeIndustries:r(g.changeIndustries),changeLifeEvents:r(g.changeLifeEvents),changePolitics:r(g.changePolitics),changeIncome:r(g.changeIncome),changeNetWorth:r(g.changeNetWorth),changeHomeType:r(g.changeHomeType),changeHomeOwnership:r(g.changeHomeOwnership),changeHomeValue:r(g.changeHomeValue),changeGeneration:r(g.changeGeneration),changeHouseholdComposition:r(g.changeHouseholdComposition),changeMoms:r(g.changeMoms),changeOfficeType:r(g.changeOfficeType),changeEthnicAffinity:r(g.changeEthnicAffinity)},showNewAdvancedDemoOptions:o,showFlexibleTargetingDemoOptions:p,size:this.props.size}));}});e.exports=m;},null);
__d("AdsCommonTargetingAgeEditor",["AdsCommonTargetingActions","AdsCommonTargetingSectionMixin","AdsCommonTargetingStore","Bootloader","React"],function(a,b,c,d,e,f,g,h,i,j,k){var l=k.createClass({displayName:"AdsCommonTargetingAgeEditor",propTypes:{targetingID:k.PropTypes.string.isRequired,rowRenderer:k.PropTypes.func,extraData:k.PropTypes.object},getDefaultProps:function(){return {extraData:{}};},mixins:[h],componentWillMount:function(){j.loadModules(["AdsTargetingAgeEditor.react"],this.updateSectionEditor);},renderSectionEditor:function(){var m=this.getSectionEditor(),n=this.props.targetingID,o=this.getDefaultTooltip();return (k.createElement(m,{ageMin:i.getValue('ageMin',n),ageMax:i.getValue('ageMax',n),ageMinLimit:i.getValue('ageMinLimit',n),alternateLayout:this.props.extraData.alternateLayout,oneColumn:this.props.extraData.oneColumn,rowRenderer:this.props.rowRenderer,size:this.props.size,width:this.getDefaultWidth(),changeAgeMaxAndAgeMin:function(p,q){g.changeAgeMaxAndAgeMin(p,q,n);},tooltip:o}));}});e.exports=l;},null);
__d("AdsCommonTargetingAppTargetEditor",["AdsAPIObjectives","AdsCommonTargetingActions","AdsCommonTargetingSectionMixin","AdsCommonTargetingStore","Bootloader","React"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=l.createClass({displayName:"AdsCommonTargetingAppTargetEditor",propTypes:{targetingID:l.PropTypes.string.isRequired,rowRenderer:l.PropTypes.func,extraData:l.PropTypes.object},getDefaultProps:function(){return {extraData:{}};},mixins:[i],componentWillMount:function(){k.loadModules(["AdsTargetingAppTargetEditor.react"],this.updateSectionEditor);},renderSectionEditor:function(){var n=this.getSectionEditor();if(!this.props.extraData.appName||!this.props.extraData.appTargetID||!this.props.extraData.objectiveData||this.props.extraData.objectiveData.objective!==g.MOBILE_APP_ENGAGEMENT)return l.createElement("div",null);var o=this.props.targetingID,p=j.getValue('connections',o)||[],q=this.props.extraData.appTargetID,r=p.some(function(s){return s.id===q;});return (l.createElement(n,{alternateLayout:this.props.extraData.alternateLayout,checked:r,oneColumn:this.props.extraData.oneColumn,rowRenderer:this.props.rowRenderer,size:this.props.size,width:this.getDefaultWidth(),changeAppTarget:this._changeAppTarget}));},_changeAppTarget:function(n){var o=this.props.targetingID,p=this.props.extraData.appTargetID,q=j.getValue('connections',o)||[],r=q.slice();r=r.filter(function(s){return (s.id+'')!==p;});if(n)r.push({id:p,name:this.props.extraData.appName});h.changeConnections({includedConnections:r},o);}});e.exports=m;},null);
__d("AdsCommonTargetingAudienceEditor",["AdsCommonTargetingActions","AdsCommonTargetingSectionMixin","AdsCommonTargetingStore","Bootloader","React","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=k.createClass({displayName:"AdsCommonTargetingAudienceEditor",mixins:[h],propTypes:{targetingID:k.PropTypes.string.isRequired,config:k.PropTypes.object,extraData:k.PropTypes.object,rowRenderer:k.PropTypes.func},getDefaultProps:function(){return {extraData:{}};},componentWillMount:function(){j.loadModules(["AdsTargetingAudienceEditor.react"],this.updateSectionEditor);},renderSectionEditor:function(){l(this.props.extraData.dao);l(this.props.extraData.accountID);var n=this.getSectionEditor(),o=this.getConfigValue(this.props.config.customProperties,'defaultMobileApp',null),p=this.getConfigValue(this.props.config.customProperties,'directSales',false),q=this.getConfigValue(this.props.config.customProperties,'tosAccepted',{}),r=this.props.targetingID;return (k.createElement(n,{width:this.getDefaultWidth(),accountID:this.props.extraData.accountID,rowRenderer:this.props.rowRenderer,oneColumn:this.props.extraData.oneColumn,alternateLayout:this.props.extraData.alternateLayout,actions:{includeAudience:function(s){g.includeAudience(s,r);},excludeAudience:function(s){g.excludeAudience(s,r);},removeAudience:function(s){g.removeAudience(s,r);},changeCustomAudiences:function(s){g.changeCustomAudiences(s,r);}},customAudiences:i.getValue('customAudiences',r)||[],excludedCustomAudiences:i.getValue('excludedCustomAudiences',r)||[],dao:this.props.extraData.dao,alwaysVisible:this.props.extraData.alwaysShowAudienceEditor,defaultMobileApp:o,directSales:p,tosAccepted:q,size:this.props.size}));}});e.exports=m;},null);
__d("AdsCommonTargetingBehaviorsEditor",["AdsCommonTargetingActions","AdsCommonTargetingSectionMixin","AdsCommonTargetingStore","Bootloader","React","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=k.createClass({displayName:"AdsCommonTargetingBehaviorsEditor",mixins:[h],propTypes:{targetingID:k.PropTypes.string.isRequired,config:k.PropTypes.object,extraData:k.PropTypes.object,rowRenderer:k.PropTypes.func},getDefaultProps:function(){return {extraData:{}};},componentWillMount:function(){j.loadModules(["AdsTargetingBehaviorsEditor.react"],this.updateSectionEditor);},renderSectionEditor:function(){l(this.props.extraData.dao);var n=this.getSectionEditor(),o=this.props.targetingID;return (k.createElement(n,{dao:this.props.extraData.dao,oneColumn:this.props.extraData.oneColumn,alternateLayout:this.props.extraData.alternateLayout,actions:{changeBehaviors:function(p){g.changeBehaviors(p,o);}},targetingData:{behaviors:i.getValue('behaviors',o)},rowRenderer:this.props.rowRenderer,size:this.props.size}));}});e.exports=m;},null);
__d("AdsCommonTargetingCategoriesEditor",["AdsCommonTargetingActions","AdsCommonTargetingSectionMixin","AdsCommonTargetingStore","Bootloader","React","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=k.createClass({displayName:"AdsCommonTargetingCategoriesEditor",mixins:[h],propTypes:{targetingID:k.PropTypes.string.isRequired,config:k.PropTypes.object,extraData:k.PropTypes.object,rowRenderer:k.PropTypes.func},getDefaultProps:function(){return {extraData:{}};},componentWillMount:function(){j.loadModules(["AdsTargetingCategoriesEditor.react"],this.updateSectionEditor);},renderSectionEditor:function(){var n=this.getSectionEditor();l(this.props.extraData.dao);l(this.props.extraData.accountID);var o=this.props.targetingID;return (k.createElement(n,{width:this.getDefaultWidth(),accountID:this.props.extraData.accountID,dao:this.props.extraData.dao,oneColumn:this.props.extraData.oneColumn,alternateLayout:this.props.extraData.alternateLayout,actions:{changeUserAdclusters:function(p){g.changeUserAdclusters(p,o);}},targetingData:{userAdclusters:i.getValue('userAdclusters',o)},privatePCOnly:this.getConfigValue(this.props.config.customProperties,'showPrivatePCOnly',true),hideMigratedPC:this.getConfigValue(this.props.config.customProperties,'hideMigratedPC',true),rowRenderer:this.props.rowRenderer,size:this.props.size}));}});e.exports=m;},null);
__d("AdsCommonTargetingConnectionsEditor",["AdsCommonTargetingActions","AdsCommonTargetingSectionMixin","AdsCommonTargetingStore","AdsSimpleSearchSource","Bootloader","React","invariant","ads-destinationType"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=l.createClass({displayName:"AdsCommonTargetingConnectionsEditor",mixins:[h],propTypes:{targetingID:l.PropTypes.string.isRequired,config:l.PropTypes.object,extraData:l.PropTypes.object.isRequired,rowRenderer:l.PropTypes.func},getDefaultProps:function(){return {extraData:{}};},componentWillMount:function(){k.loadModules(["AdsTargetingConnectionsEditor.react"],this.updateSectionEditor);},renderSectionEditor:function(){var p=this.getSectionEditor();m(this.props.extraData.accountID);m(this.props.extraData.dao);m(this.props.extraData.destinationData);m(this.props.extraData.objectiveData);var q=this.props.targetingID;return (l.createElement(p,{width:this.getDefaultWidth(),dao:this.props.extraData.dao,objectiveData:this.props.extraData.objectiveData,destinationData:this.props.extraData.destinationData,oneColumn:this.props.extraData.oneColumn,alternateLayout:this.props.extraData.alternateLayout,shouldHideFriendsOfConnections:this.getConfigValue(this.props.config.customProperties,'shouldHideFriendsOfConnections',false),shouldHideExcludedConnections:this.getConfigValue(this.props.config.customProperties,'shouldHideExcludedConnections',false),targetingData:{includedConnections:i.getValue('connections',q)||[],excludedConnections:i.getValue('excludedConnections',q)||[],friendsOfConnections:i.getValue('friendsOfConnections',q)||[]},searchSource:j.getInstance(this.props.extraData.dao.fetch.connectionObjectsForAccount,{accountID:this.props.extraData.accountID,limit:50,getSubtitle:function(r){var s=r.type;return n.DEST_TYPE_TO_NAME[s];}}),size:this.props.size,changeConnections:function(r){g.changeConnections(r,q);},rowRenderer:this.props.rowRenderer}));}});e.exports=o;},null);
__d("AdsCommonTargetingDemographicsEditor",["AdsCommonTargetingActions","AdsCommonTargetingSectionMixin","AdsCommonTargetingStore","Bootloader","React"],function(a,b,c,d,e,f,g,h,i,j,k){var l=k.createClass({displayName:"AdsCommonTargetingDemographicsEditor",propTypes:{targetingID:k.PropTypes.string.isRequired},mixins:[h],componentWillMount:function(){j.loadModules(["AdsTargetingDemographicsEditor.react"],this.updateSectionEditor);},renderSectionEditor:function(){var m=this.getSectionEditor(),n=this.props.targetingID;return (k.createElement(m,{width:this.getDefaultWidth(),ageMinLimit:i.getValue('ageMinLimit',n),ageMin:i.getValue('ageMin',n),ageMax:i.getValue('ageMax',n),sex:i.getValue('sex',n),changeAgeMaxAndAgeMin:function(o,p){g.changeAgeMaxAndAgeMin(o,p,n);},changeSex:function(o){g.changeSex(o,n);}}));}});e.exports=l;},null);
__d("AdsCommonTargetingEstimatedReach",["AdsCommonTargetingApiTransformer","AdsCommonTargetingSectionMixin","Bootloader","React","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){var l=j.createClass({displayName:"AdsCommonTargetingEstimatedReach",mixins:[h],propTypes:{targetingID:j.PropTypes.string.isRequired,config:j.PropTypes.object,extraData:j.PropTypes.object},componentWillMount:function(){i.loadModules(["AdsTargetingEstimatedReach.react"],this.updateSectionEditor);},renderSectionEditor:function(){var m=this.getSectionEditor();k(this.props.extraData.accountID);return (j.createElement(m,{width:this.getDefaultWidth(),accountID:this.props.extraData.accountID,targetingApiSpec:g.toApi(this.props.targetingID)}));}});e.exports=l;},null);
__d("AdsCommonTargetingFlexibleTargetingEditor",["AdsCommonTargetingActions","AdsCommonTargetingSectionMixin","AdsCommonTargetingStore","AdsFlexibleTargetingConstants","Bootloader","React","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n=l.createClass({displayName:"AdsCommonTargetingFlexibleTargetingEditor",mixins:[h],propTypes:{targetingID:l.PropTypes.string.isRequired,config:l.PropTypes.object,extraData:l.PropTypes.object,rowRenderer:l.PropTypes.func},getDefaultProps:function(){return {extraData:{}};},componentWillMount:function(){k.loadModules(["AdsTargetingFlexibleTargetingEditor.react"],this.updateSectionEditor);},renderSectionEditor:function(){var o=this.getSectionEditor();m(this.props.extraData.dao);m(this.props.extraData.accountID);var p=this._getTargetingData();return (l.createElement(o,{width:this.getDefaultWidth(),accountID:this.props.extraData.accountID,dao:this.props.extraData.dao,oneColumn:this.props.extraData.oneColumn,alternateLayout:this.props.extraData.alternateLayout,targetingData:p,rowRenderer:this.props.rowRenderer,onTargetingChange:this._handleTargetingChanged,targetingID:this.props.targetingID}));},_handleTargetingChanged:function(o){g.changeFlexibleSpec(o,this.props.targetingID);},_getTargetingData:function(){var o=i.getValue('flexibleSpec',this.props.targetingID);if(!o||o.length===0)o=this._getDefaultSpec();return {flexibleSpec:o};},_getDefaultSpec:function(){return [{type:j.ITEM_TYPE.INCLUDE_ANY}];}});e.exports=n;},null);
__d("AdsCommonTargetingGenderEditor",["AdsCommonTargetingActions","AdsCommonTargetingSectionMixin","AdsCommonTargetingStore","Bootloader","React"],function(a,b,c,d,e,f,g,h,i,j,k){var l=k.createClass({displayName:"AdsCommonTargetingGenderEditor",propTypes:{targetingID:k.PropTypes.string.isRequired,rowRenderer:k.PropTypes.func,extraData:k.PropTypes.object},getDefaultProps:function(){return {extraData:{}};},mixins:[h],componentWillMount:function(){j.loadModules(["AdsTargetingGenderEditor.react"],this.updateSectionEditor);},renderSectionEditor:function(){var m=this.getSectionEditor(),n=this.props.targetingID,o=this.getDefaultTooltip();return (k.createElement(m,{width:this.getDefaultWidth(),sex:i.getValue('sex',n),size:this.props.size,rowRenderer:this.props.rowRenderer,oneColumn:this.props.extraData.oneColumn,alternateLayout:this.props.extraData.alternateLayout,changeSex:function(p){g.changeSex(p,n);},tooltip:o}));}});e.exports=l;},null);
__d("AdsCFHelpLink.react",["AdsHelpLink.react","React","ReactChildren","cx"],function(a,b,c,d,e,f,g,h,i,j){var k=h.PropTypes,l=h.createClass({displayName:"AdsCFHelpLink",propTypes:{position:k.string},render:function(){var m=i.map(this.props.children,function(n,o){return (h.createElement("p",{className:"_5spo",key:o},n));});return (h.createElement(g,{className:"_5s_w",position:this.props.position||'above',linger:this.props.linger,width:300},m));}});e.exports=l;},null);
__d("AdsInfoTable.react",["InfoTable.react","React","ReactChildren","cx"],function(a,b,c,d,e,f,g,h,i,j){var k=h.createClass({displayName:"AdsInfoTable",propTypes:{oneColumn:h.PropTypes.bool,alternateLayout:h.PropTypes.bool},render:function(){var l=this.props.oneColumn||this.props.alternateLayout;if(!l)return h.createElement(g,h.__spread({},this.props));i.forEach(this.props.children,function(n){n.props.alternateLayout=l;});var m=(("_19b9")+(' '+"_34l3")+(this.props.oneColumn?' '+"_19ba":'')+(!this.props.oneColumn?' '+"_19bb":''));return (h.createElement("div",{className:m},this.props.children));}});e.exports=k;},null);
__d("AdsInfoTableRow.react",["InfoTableRow.react","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){var k=h.createClass({displayName:"AdsInfoTableRow",propTypes:{annotation:h.PropTypes.string,helpLink:h.PropTypes.object,label:h.PropTypes.string,alternateLayout:h.PropTypes.bool},render:function(){if(!this.props.alternateLayout)return h.createElement(g,h.__spread({},this.props));var l=(h.createElement("div",null,this.props.label,this.props.annotation,this.props.helpLink)),m=(h.createElement("div",null,this.props.children)),n=(h.createElement("div",null,l,m));if(this.props.rowRenderer)n=this.props.rowRenderer(n,l,m);l.props.className=j(l.props.className,"_4jci _4209");m.props.className=j(m.props.className,"_4jcj _420a");n.props.className=j(n.props.className,this.props.className,"_4jch _420b");return n;}});e.exports=k;},null);
__d("AdsInfoTableSection.react",["InfoTableSection.react","React","ReactChildren","cx"],function(a,b,c,d,e,f,g,h,i,j){var k=h.createClass({displayName:"AdsInfoTableSection",propTypes:{alternateLayout:h.PropTypes.bool},render:function(){if(!this.props.alternateLayout)return h.createElement(g,h.__spread({},this.props));i.forEach(this.props.children,function(l){l.props.alternateLayout=true;});return (h.createElement("div",{className:"_2d0v"},this.props.children));}});e.exports=k;},null);
__d("AdsCommonTargetingInterestsEditor",["AdsCFHelpLink.react","AdsCommonTargetingActions","AdsCommonTargetingSectionMixin","AdsCommonTargetingStore","AdsTargetingSectionsLabels","Bootloader","AdsInfoTable.react","AdsInfoTableRow.react","AdsInfoTableSection.react","React","cx","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=p.createClass({displayName:"AdsCommonTargetingInterestsEditor",mixins:[i],propTypes:{targetingID:p.PropTypes.string.isRequired,config:p.PropTypes.object,extraData:p.PropTypes.object,rowRenderer:p.PropTypes.func},getDefaultProps:function(){return {extraData:{}};},componentWillMount:function(){l.loadModules(["AdsSearchBrowseInterests.react"],this.updateSectionEditor);},renderSectionEditor:function(){s(this.props.extraData.dao);var u=this.getSectionEditor(),v=this.props.targetingID,w=j.getValue('interests',v);w=w||[];var x=this.getDefaultTooltip()||["Facebook can help you reach specific audiences by looking at their interests, activities, the Pages they have liked and closely related topics.","Combine interests to expand your ad's reach."];return (p.createElement("div",{style:{width:this.getDefaultWidth()}},p.createElement(m,{oneColumn:this.props.extraData.oneColumn,alternateLayout:this.props.extraData.alternateLayout,sectionborders:false},p.createElement(o,{className:"_5w17"},p.createElement(n,{label:k.interests,helpLink:p.createElement(g,null,x),rowRenderer:this.props.rowRenderer,useColon:false},p.createElement(u,{interests:w,ref:"unifiedInterestsTargetingComponent",size:this.props.size,dao:this.props.extraData.dao,onUpdateInterests:function(y){h.changeInterests(y,v);}}))))));}});e.exports=t;},null);
__d("AdsCommonTargetingLanguagesEditor",["AdsCommonTargetingActions","AdsCommonTargetingSectionMixin","AdsCommonTargetingStore","Bootloader","React","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=k.createClass({displayName:"AdsCommonTargetingLanguagesEditor",mixins:[h],propTypes:{targetingID:k.PropTypes.string.isRequired,config:k.PropTypes.object,extraData:k.PropTypes.object,rowRenderer:k.PropTypes.func},getDefaultProps:function(){return {extraData:{}};},componentWillMount:function(){j.loadModules(["AdsTargetingLanguagesEditor.react"],this.updateSectionEditor);},renderSectionEditor:function(){l(this.props.extraData.dao);var n=this.getSectionEditor(),o=this.props.targetingID;return (k.createElement(n,{width:this.getDefaultWidth(),rowRenderer:this.props.rowRenderer,oneColumn:this.props.extraData.oneColumn,alternateLayout:this.props.extraData.alternateLayout,changeLanguages:function(p){g.changeLanguages(p,o);},size:this.props.size,locales:i.getValue('locales',o)||[],dao:this.props.extraData.dao}));}});e.exports=m;},null);
__d("AdsCommonTargetingLoadSpec",["AdsCommonTargetingActions","AdsCommonTargetingApiTransformer","AdsCommonTargetingSectionMixin","Bootloader","React","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=k.createClass({displayName:"AdsCommonTargetingLoadSpec",mixins:[i],propTypes:{targetingID:k.PropTypes.string.isRequired,config:k.PropTypes.object,extraData:k.PropTypes.object,rowRenderer:k.PropTypes.func},getDefaultProps:function(){return {extraData:{}};},componentWillMount:function(){j.loadModules(["AdsTargetingLoadSpec"],this.updateSectionEditor);},_loadApiSpec:function(n){var o=h.fromApi(n);g.updateStoreFromUI(o,this.props.targetingID);},_subscribeApiChange:function(n){return this.props.extraData.controller.subscribeApiChange(n);},renderSectionEditor:function(){var n=this.getSectionEditor();l(this.props.extraData.dao);return (k.createElement(n,{width:this.getDefaultWidth(),dao:this.props.extraData.dao,accountID:this.props.extraData.accountID,loadApiSpec:this._loadApiSpec,rowRenderer:this.props.rowRenderer,oneColumn:this.props.extraData.oneColumn,alternateLayout:this.props.extraData.alternateLayout,subscribeApiChange:this._subscribeApiChange}));}});e.exports=m;},null);
__d("AdsCommonTargetingLocationEditor",["AdsCommonTargetingActions","AdsCommonTargetingSectionMixin","AdsCommonTargetingStore","Bootloader","React","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=k.createClass({displayName:"AdsCommonTargetingLocationEditor",mixins:[h],propTypes:{targetingID:k.PropTypes.string.isRequired,config:k.PropTypes.object,extraData:k.PropTypes.object,rowRenderer:k.PropTypes.func},getDefaultProps:function(){return {extraData:{}};},componentWillMount:function(){j.loadModules(["AdsTargetingGeoLocationEditor.react"],this.updateSectionEditor);},renderSectionEditor:function(){l(this.props.extraData.dao);var n=this.getSectionEditor(),o=this.getConfigValue(this.props.config.customProperties,'allowedCountryList',[]),p=this.getConfigValue(this.props.config.customProperties,'disallowedCountryList',[]),q=this.props.targetingID,r=this.getDefaultTooltip();return (k.createElement(n,{width:this.getDefaultWidth(),dao:this.props.extraData.dao,rowRenderer:this.props.rowRenderer,oneColumn:this.props.extraData.oneColumn,alternateLayout:this.props.extraData.alternateLayout,onChange:function(s){g.changeGeoLocations(s.geoLocations,s.excludedGeoLocations,q);},size:this.props.size,storedData:{geoLocations:i.getValue('geoLocations',q),excludedGeoLocations:i.getValue('excludedGeoLocations',q)},allowedCountryList:o,disallowedCountryList:p,tooltip:r}));}});e.exports=m;},null);
__d("AdsCommonTargetingLocationEditorV2",["AdsCommonTargetingActions","AdsCommonTargetingSectionMixin","AdsCommonTargetingStore","Bootloader","React","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=k.createClass({displayName:"AdsCommonTargetingLocationEditorV2",mixins:[h],propTypes:{targetingID:k.PropTypes.string.isRequired,config:k.PropTypes.object,extraData:k.PropTypes.object},componentWillMount:function(){j.loadModules(["AdsTargetingLocationEditorV2"],this.updateSectionEditor);},renderSectionEditor:function(){l(this.props.extraData.dao);var n=this.getSectionEditor(),o=this.getConfigValue(this.props.config.customProperties,'allowedCountryList',[]),p=this.props.targetingID,q=this.getDefaultTooltip();return (k.createElement(n,{alternateLayout:this.props.extraData.alternateLayout,dao:this.props.extraData.dao,oneColumn:this.props.extraData.oneColumn,rowRenderer:this.props.rowRenderer,onLocationsChange:function(r,s){g.changeGeoLocations(r,s,p);},geoLocations:i.getValue('geoLocations',p)||{},excludedGeoLocations:i.getValue('excludedGeoLocations',p)||{},onLocationTypesChange:function(r){g.changeGeoLocations({location_types:r},null,p);},showHomeRecentSelector:true,allowedCountryList:o,tooltip:q}));}});e.exports=m;},null);
__d("AdsCommonTargetingMapLocationEditor",["AdsCommonTargetingActions","AdsCommonTargetingSectionMixin","AdsCommonTargetingStore","Bootloader","React"],function(a,b,c,d,e,f,g,h,i,j,k){'use strict';var l=k.PropTypes,m=k.createClass({displayName:"AdsCommonTargetingMapLocationEditor",mixins:[h],propTypes:{size:l.string,targetingID:l.string.isRequired,rowRenderer:l.func,extraData:l.object},getDefaultProps:function(){return {size:'large',extraData:{}};},componentWillMount:function(){j.loadModules(["AdsTargetingMapLocationEditor"],this.updateSectionEditor);},renderSectionEditor:function(){var n=this.getSectionEditor(),o=this.props.targetingID,p=i.getCompatibleCustomLocationOrDefaultStateForUI(o),q=this.getConfigValue(this.props.config.customProperties,'mapHeight'),r=this.getConfigValue(this.props.config.customProperties,'mapWidth');q=q?q-2:q;r=r?r-2:r;return (k.createElement(n,{address:p,alternateLayout:this.props.extraData.alternateLayout,height:q,oneColumn:this.props.extraData.oneColumn,rowRenderer:this.props.rowRenderer,size:this.props.size,targetingID:o,width:r,onAddressChanged:this._onAddressChanged,onRadiusChanged:this._onRadiusChanged}));},_onAddressChanged:function(n){g.changeCustomLocation(n,this.props.targetingID);},_onRadiusChanged:function(n){g.changeLocalGeoRadius(n,this.props.targetingID);}});e.exports=m;},null);
__d("AdsCommonTargetingSaveSpec",["AdsCommonTargetingApiTransformer","AdsCommonTargetingSectionMixin","Bootloader","React","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){var l=j.createClass({displayName:"AdsCommonTargetingSaveSpec",mixins:[h],propTypes:{targetingID:j.PropTypes.string.isRequired,config:j.PropTypes.object,extraData:j.PropTypes.object,rowRenderer:j.PropTypes.func},getDefaultProps:function(){return {extraData:{}};},componentWillMount:function(){i.loadModules(["AdsTargetingSaveSpec"],this.updateSectionEditor);},renderSectionEditor:function(){var m=this.getSectionEditor();k(this.props.extraData.dao);var n=g.toApi(this.props.targetingID);return (j.createElement(m,{width:this.getDefaultWidth(),dao:this.props.extraData.dao,targetingApiSpec:n,rowRenderer:this.props.rowRenderer,oneColumn:this.props.extraData.oneColumn,alternateLayout:this.props.extraData.alternateLayout}));}});e.exports=l;},null);
__d("AdsCommonTargetingSentences",["AdsCommonTargetingApiTransformer","AdsCommonTargetingSectionMixin","Bootloader","React","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){var l=j.createClass({displayName:"AdsCommonTargetingSentences",mixins:[h],propTypes:{targetingID:j.PropTypes.string.isRequired,config:j.PropTypes.object,extraData:j.PropTypes.object},componentWillMount:function(){i.loadModules(["TargetingSentences.react"],this.updateSectionEditor);},renderSectionEditor:function(){var m=this.getSectionEditor();k(this.props.extraData.dao);k(this.props.extraData.accountID);return (j.createElement(m,{dao:this.props.extraData.dao,accountID:this.props.extraData.accountID,targetingApiSpec:g.toApi(this.props.targetingID)}));}});e.exports=l;},null);
__d("MAdsCommonTargetingExampleView",["AdsCommonTargetingActions","AdsCommonTargetingStore","React","SubscriptionsHandler"],function(a,b,c,d,e,f,g,h,i,j){var k=i.createClass({displayName:"MAdsCommonTargetingExampleView",propTypes:{targetingID:i.PropTypes.string.isRequired},componentDidMount:function(){this._subscriptions=new j();this._subscriptions.addSubscriptions(h.subscribe('change',function(l,m){if(m.targetingID===this.props.targetingID)this.forceUpdate();}.bind(this)));},componentWillUnmount:function(){this._subscriptions.release();},render:function(){var l=h.getValue('ageMin',this.props.targetingID)||'unknown';return (i.createElement("div",null,i.createElement("p",null,i.createElement("b",null," Render a mobile view here. ")),i.createElement("p",null,"The minimal age is ",l,"."),i.createElement("p",null,i.createElement("a",{href:"#",onClick:this._onClick},"This is a link, click to change the min age"))));},_onClick:function(){g.changeAgeMin(25,this.props.targetingID);}});e.exports=k;},null);
__d("AdsTargetingLocationPasteFailedSummaryDialog",["List.react","LocationConstants","React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIDialogButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=i.createClass({displayName:"AdsTargetingLocationPasteFailedSummaryDialog",mixins:[j],propTypes:{failedLocations:i.PropTypes.array.isRequired,locationType:i.PropTypes.string.isRequired},getInitialState:function(){return {showDialog:false};},render:function(){return null;},renderLayers:function(){if(!this.state.showDialog)return null;return {dialog:i.createElement(k,{layerHideOnBlur:false,shown:this.state.showDialog,width:400,onToggle:this._onToggle},i.createElement(n,null,q._("Discarded Locations {locationTypeName}",[q.param("locationTypeName",this._renderLocationTypeName())])),i.createElement(l,null,this._renderBody()),i.createElement(m,null,i.createElement(o,{label:"Okay",use:"confirm",action:"cancel"})))};},_renderBody:function(){var s=[];this.props.failedLocations.forEach(function(t){return s.push(i.createElement("li",{key:t},t));});return (i.createElement("div",{className:"phl"},i.createElement(g,{border:"none",spacing:"small",style:{listStyleType:'disc'}},s)));},_renderLocationTypeName:function(){var s='';switch(this.props.locationType){case h.COUNTRY:s="Countries";break;case h.REGION:s="States\/Regions";break;case h.CITY:s="Cities";break;case h.ZIP:s="US ZIP Codes";break;}if(s)return (q._("({locationTypeName})",[q.param("locationTypeName",s)]));return '';},show:function(){this.setState({showDialog:true});},_onToggle:function(s){this.setState({showDialog:s});}});e.exports=r;},null);
__d("AdsTargetingLocationPasteResult",["AdsTargetingLocationPasteFailedSummaryDialog","Image.react","Link.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=m('/images/ads/createflow/creative/image_error.png'),o=m('/images/ads/createflow/creative/check.png'),p=j.createClass({displayName:"AdsTargetingLocationPasteResult",propTypes:{successLocations:j.PropTypes.array.isRequired,failedLocations:j.PropTypes.array.isRequired,locationType:j.PropTypes.string.isRequired},render:function(){if(this.props.failedLocations.length)return (j.createElement("div",{className:"_4fqi"},j.createElement("span",{className:"_4fqj"},j.createElement(h,{src:n})),l._("We were unable to match {numSuccessLocations} of your locations.",[l.param("numSuccessLocations",this.props.failedLocations.length)]),j.createElement(i,{onClick:this._onDialogLinkClick,className:"mls"},"View list"),j.createElement(g,{locationType:this.props.locationType,failedLocations:this.props.failedLocations,ref:"dialog"})));if(this.props.successLocations.length)return (j.createElement("div",{className:"_4fqi"},j.createElement("span",{className:"_4fqj"},j.createElement(h,{src:o})),l._("{numSuccessLocations} locations successfully added.",[l.param("numSuccessLocations",this.props.successLocations.length)])));return null;},_onDialogLinkClick:function(){this.refs.dialog&&this.refs.dialog.show();}});e.exports=p;},null);
__d("AdsTargetingLocationWarningMode",["keyMirror"],function(a,b,c,d,e,f,g){'use strict';var h=g({EXCLUDE_OVERLAP_IGNORE:null,EXCLUDE_REPLACE:null,INVALID_EXCLUDE:null,INCLUDE_REPLACE:null,INCLUDE_OVERWRITE_EXCLUDE:null});e.exports=h;},null);
__d("AdsCommonTargetingViewConfigValidator",["invariant","AdsCommonTargetingViewConfig"],function(a,b,c,d,e,f,g,h){var i=h.VALID_COMPONENTS,j={validate:function(k){g(k&&k.length>0);k.forEach(function(l){var m=l.component;g(i[m]);});}};e.exports=j;},null);
__d("AdsCommonTargetingViewRenderer",["AdInterfacesUiLogger","AdsCommonTargetingAdvancedDemographicsDropdownEditor","AdsCommonTargetingAgeEditor","AdsCommonTargetingAppTargetEditor","AdsCommonTargetingAudienceEditor","AdsCommonTargetingBehaviorsEditor","AdsCommonTargetingCategoriesEditor","AdsCommonTargetingConnectionsEditor","AdsCommonTargetingDemographicsEditor","AdsCommonTargetingEstimatedReach","AdsCommonTargetingFlexibleTargetingEditor","AdsCommonTargetingGenderEditor","AdsCommonTargetingInterestsEditor","AdsCommonTargetingLanguagesEditor","AdsCommonTargetingLocationEditor","AdsCommonTargetingLocationEditorV2","AdsCommonTargetingMapLocationEditor","AdsCommonTargetingMobilePlatformEditor","AdsCommonTargetingSaveSpec","AdsCommonTargetingLoadSpec","AdsCommonTargetingSentences","MAdsCommonTargetingExampleView","React","XUIButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){var ga='Modular Targeting Component',ha=ca.createClass({displayName:"AdsCommonTargetingViewRenderer",propTypes:{config:ca.PropTypes.array.isRequired,targetingID:ca.PropTypes.string.isRequired,extraData:ca.PropTypes.object},getDefaultProps:function(){return {extraData:{}};},componentDidMount:function(){g.setAppName(this.props.extraData.appName||ga);g.setAccountID(this.props.extraData.accountID||'0');},render:function(){var ia=this.props.config.map(function(ja,ka){var la=ja.component,ma=this.getComponent(la,ja);if(ja.renderWrapper)ma=ja.renderWrapper(ma);return ca.createElement("div",{key:la+ka},ma);},this);return ca.createElement("div",null,ia);},getComponent:function(ia,ja){return this['_get'+ia](ja);},rowRenderer:function(ia,ja,ka,la){var ma=this.props.extraData.mixedStateComponents||{},na=ia.component;if(ma[na])la.props.children=this._renderMixedState(ia);return ja;},_renderMixedState:function(ia){return (ca.createElement("div",null,ca.createElement("span",{className:"_4zk9"},"Mixed State"),ca.createElement(da,{size:"large",onClick:this._resetMixedState.bind(this,ia),label:"Reset",use:"confirm"})));},_resetMixedState:function(ia){this.props.extraData.controller.clearMixedStateForComponent(ia);},_getAudienceEditor:function(ia){return (ca.createElement(k,{targetingID:this.props.targetingID,config:ia,rowRenderer:this.rowRenderer.bind(this,ia),extraData:this.props.extraData}));},_getDemographicsEditor:function(ia){return (ca.createElement(o,{targetingID:this.props.targetingID,config:ia,rowRenderer:this.rowRenderer.bind(this,ia),extraData:this.props.extraData}));},_getAgeEditor:function(ia){return (ca.createElement(i,{targetingID:this.props.targetingID,config:ia,rowRenderer:this.rowRenderer.bind(this,ia),extraData:this.props.extraData}));},_getGenderEditor:function(ia){return (ca.createElement(r,{targetingID:this.props.targetingID,config:ia,rowRenderer:this.rowRenderer.bind(this,ia),extraData:this.props.extraData}));},_getInterestsEditor:function(ia){return (ca.createElement(s,{targetingID:this.props.targetingID,config:ia,rowRenderer:this.rowRenderer.bind(this,ia),extraData:this.props.extraData}));},_getLanguagesEditor:function(ia){return (ca.createElement(t,{targetingID:this.props.targetingID,config:ia,rowRenderer:this.rowRenderer.bind(this,ia),extraData:this.props.extraData}));},_getLocationEditor:function(ia){return (ca.createElement(u,{targetingID:this.props.targetingID,config:ia,rowRenderer:this.rowRenderer.bind(this,ia),extraData:this.props.extraData}));},_getMapLocationEditor:function(ia){return (ca.createElement(w,{targetingID:this.props.targetingID,config:ia,rowRenderer:this.rowRenderer.bind(this,ia),extraData:this.props.extraData}));},_getBehaviorsEditor:function(ia){return (ca.createElement(l,{targetingID:this.props.targetingID,config:ia,rowRenderer:this.rowRenderer.bind(this,ia),extraData:this.props.extraData}));},_getCategoriesEditor:function(ia){return (ca.createElement(m,{targetingID:this.props.targetingID,config:ia,rowRenderer:this.rowRenderer.bind(this,ia),extraData:this.props.extraData}));},_getConnectionsEditor:function(ia){return (ca.createElement(n,{targetingID:this.props.targetingID,config:ia,rowRenderer:this.rowRenderer.bind(this,ia),extraData:this.props.extraData}));},_getAppTargetEditor:function(ia){return (ca.createElement(j,{targetingID:this.props.targetingID,config:ia,extraData:this.props.extraData}));},_getAdvancedDemographicsDropdownEditor:function(ia){return (ca.createElement(h,{targetingID:this.props.targetingID,config:ia,rowRenderer:this.rowRenderer.bind(this,ia),extraData:this.props.extraData}));},_getMobilePlatformEditor:function(ia){return (ca.createElement(x,{targetingID:this.props.targetingID,config:ia,rowRenderer:this.rowRenderer.bind(this,ia),extraData:this.props.extraData}));},_getSaveSpecComponent:function(ia){return (ca.createElement(y,{targetingID:this.props.targetingID,config:ia,rowRenderer:this.rowRenderer.bind(this,ia),extraData:this.props.extraData}));},_getLoadSpecComponent:function(ia){return (ca.createElement(z,{targetingID:this.props.targetingID,config:ia,rowRenderer:this.rowRenderer.bind(this,ia),extraData:this.props.extraData}));},_getTargetingSentences:function(ia){return (ca.createElement(aa,{targetingID:this.props.targetingID,config:ia,extraData:this.props.extraData}));},_getEstimatedReach:function(ia){return (ca.createElement(p,{targetingID:this.props.targetingID,config:ia,extraData:this.props.extraData}));},_getLocationEditorV2:function(ia){return (ca.createElement(v,{targetingID:this.props.targetingID,config:ia,extraData:this.props.extraData}));},_getMsiteExample:function(ia){return (ca.createElement(ba,{targetingID:this.props.targetingID,config:ia,extraData:this.props.extraData}));},_getSectionDivider:function(ia){return ca.createElement("hr",null);},_getInvisibleSectionDivider:function(ia){return ca.createElement("div",{style:{height:5}});},_getFlexibleEditor:function(ia){return (ca.createElement(q,{targetingID:this.props.targetingID,config:ia,rowRenderer:this.rowRenderer.bind(this,ia),extraData:this.props.extraData}));}});e.exports=ha;},null);
__d("AdsCommonTargetingViewController.react",["AdsCommonTargetingActions","AdsCommonTargetingApiTransformer","AdsCommonTargetingBulkApiSpecStoreInstance","AdsCommonTargetingStore","AdsCommonTargetingUtils","AdsCommonTargetingViewConfig","AdsCommonTargetingViewConfigValidator","AdsCommonTargetingViewRenderer","AdsTargetingConnectConfig","AdsUniformValue","Arbiter","React","SubscriptionsHandler","WebApiApplication","AdsCreationConfig","AdsCreationExperiments","AdsCurrencyConfig","AdsDaoConfig","BonsaiConfig","CustomAudienceHashIdSchemaTypesJS","CustomAudienceSessionTypesJS","CustomAudienceSimpleIdSchemaTypesJS","DateFormatConfig","InsightsCountryNames","InsightsCurrencyNames","InsightsLocaleNames","NumberFormatConfig","adsGKCheck","AdsDaoGraph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u='____common_targeting_api_spec_change',v='____common_targeting_validation_complete',w='____targeting_controller_change';b('AdsCreationConfig');b('AdsCreationExperiments');b('AdsCurrencyConfig');b('AdsDaoConfig');b('BonsaiConfig');b('CustomAudienceHashIdSchemaTypesJS');b('CustomAudienceSessionTypesJS');b('CustomAudienceSimpleIdSchemaTypesJS');b('DateFormatConfig');b('InsightsCountryNames');b('InsightsCurrencyNames');b('InsightsLocaleNames');b('NumberFormatConfig');b('adsGKCheck');function x(z,aa){"use strict";this.$AdsCommonTargetingViewController0=null;this.$AdsCommonTargetingViewController1={};this.$AdsCommonTargetingViewController2=new s();this.$AdsCommonTargetingViewController3=z||j.canonicalID;j.clearState(this.$AdsCommonTargetingViewController3);i.clearState(this.$AdsCommonTargetingViewController3);g.initTargetingForID(this.$AdsCommonTargetingViewController3);if(!t.getAccessToken())t.init(o.access_token,o.client_id);this.$AdsCommonTargetingViewController4={dao:aa||b('AdsDaoGraph'),controller:this};this.$AdsCommonTargetingViewController2.addSubscriptions(j.subscribe('change',function(ba,ca){if(ca.targetingID===this.$AdsCommonTargetingViewController3){q.inform(u,{targetingID:this.$AdsCommonTargetingViewController3});this.validate();}}.bind(this)));}x.prototype.destroy=function(){"use strict";this.$AdsCommonTargetingViewController2.release();};x.prototype.clearAllState=function(){"use strict";j.clearAllState();i.clearAllState();};x.prototype.setApiSpec=function(z){"use strict";var aa=h.fromApi(z,this.$AdsCommonTargetingViewController4.apiTranformerBehaviors);j.clearState(this.$AdsCommonTargetingViewController3);i.clearState(this.$AdsCommonTargetingViewController3);g.updateStoreFromExternal(aa,this.$AdsCommonTargetingViewController3);};x.prototype.setBulkApiSpec=function(z){"use strict";var aa=k.getMixedStateComponents(z,this.$AdsCommonTargetingViewController0),ba=aa.newSpec,ca=aa.mixedStateComponents,da=aa.remainingBulkSpec;this.setExtraData({mixedStateComponents:ca});var ea=h.fromApi(ba,this.$AdsCommonTargetingViewController4.apiTranformerBehaviors);j.clearState(this.$AdsCommonTargetingViewController3);i.clearState(this.$AdsCommonTargetingViewController3);g.updateStoreFromExternal(ea,this.$AdsCommonTargetingViewController3);g.updateBulkSpec(da,this.$AdsCommonTargetingViewController3);};x.prototype.getApiSpec=function(){"use strict";return h.toApi(this.$AdsCommonTargetingViewController3,this.$AdsCommonTargetingViewController4.apiTranformerBehaviors);};x.prototype.getBulkApiSpec=function(){"use strict";var z=h.toApi(this.$AdsCommonTargetingViewController3,this.$AdsCommonTargetingViewController4.apiTranformerBehaviors),aa={},ba=i.getState(this.$AdsCommonTargetingViewController3);Object.keys(z).forEach(function(ca){aa[ca]=new p(z[ca]);});Object.assign(aa,ba);return aa;};x.prototype.clearMixedStateForComponent=function(z){"use strict";var aa=z.component,ba=this.$AdsCommonTargetingViewController4.mixedStateComponents||{};delete ba[aa];var ca=l.getFieldsForComponent(aa),da=this.getBulkApiSpec();ca.forEach(function(ea){var fa=da[ea];if(fa)da[ea]=new p(fa.getValueForIndex(0));});this.setBulkApiSpec(da);};x.prototype.addValidators=function(z){"use strict";z.forEach(function(aa){this.$AdsCommonTargetingViewController1[aa.getValidationKey()]=aa;}.bind(this));};x.prototype.subscribeValidationComplete=function(z,aa){"use strict";var ba=q.subscribe(v,function(ca,da){if(da.targetingID===this.$AdsCommonTargetingViewController3&&z==da.validationKey)aa(da.pass,da.error);}.bind(this));this.$AdsCommonTargetingViewController2.addSubscriptions(ba);return ba;};x.prototype.validate=function(){"use strict";var z=this.getApiSpec();Object.keys(this.$AdsCommonTargetingViewController1).forEach(function(aa){var ba=this.$AdsCommonTargetingViewController1[aa];ba.validate(z,function(ca,da){return q.inform(v,{validationKey:ba.getValidationKey(),pass:ca,error:da,targetingID:this.$AdsCommonTargetingViewController3});}.bind(this));}.bind(this));};x.prototype.subscribeApiChange=function(z){"use strict";var aa=q.subscribe(u,function(ba,ca){if(ca.targetingID===this.$AdsCommonTargetingViewController3)z(this.getApiSpec());}.bind(this));this.$AdsCommonTargetingViewController2.addSubscriptions(aa);return aa;};x.prototype.subscribeBulkApiChange=function(z){"use strict";var aa=q.subscribe(u,function(ba,ca){if(ca.targetingID===this.$AdsCommonTargetingViewController3)z(this.getBulkApiSpec());}.bind(this));this.$AdsCommonTargetingViewController2.addSubscriptions(aa);return aa;};x.prototype.setConfiguration=function(z){"use strict";m.validate(z);this.$AdsCommonTargetingViewController0=z;q.inform(w,{targetingID:this.$AdsCommonTargetingViewController3});};x.prototype.getConfiguration=function(){"use strict";return this.$AdsCommonTargetingViewController0;};x.prototype.setExtraData=function(z){"use strict";Object.assign(this.$AdsCommonTargetingViewController4,z);if(z.ageMinLimit)g.updateStoreFromExternal({ageMinLimit:z.ageMinLimit},this.$AdsCommonTargetingViewController3);q.inform(w,{targetingID:this.$AdsCommonTargetingViewController3});};x.prototype.getExtraData=function(){"use strict";return this.$AdsCommonTargetingViewController4;};x.prototype.getTargetingID=function(){"use strict";return this.$AdsCommonTargetingViewController3;};x.prototype.render=function(){"use strict";return r.createElement(y,{controller:this});};var y=r.createClass({displayName:"AdsCommonTargetingControllerWrapper",propTypes:{controller:r.PropTypes.instanceOf(x).isRequired},componentWillMount:function(){this._subscriptions=new s();this._subscriptions.addSubscriptions(q.subscribe(w,function(z,aa){if(aa.targetingID===this.props.controller.getTargetingID())this.forceUpdate();}.bind(this)));},componentWillUnmount:function(){this._subscriptions.release();},render:function(){return (r.createElement(n,{config:this.props.controller.getConfiguration(),extraData:this.props.controller.getExtraData(),targetingID:this.props.controller.getTargetingID()}));}});e.exports=x;},null);
__d("AdsImagePanelItem.react",["AdsCreativeImageTextOverlayDialog.react","AdsImageLegacy","AdsImageValidationStore","AdsPlacementID","AdsValidateUtils","AdsValidationIcon.react","AdsValidationIconType","AdsXoutBox.react","AdsXUIProgressBar.react","BackgroundImage.react","CenteredContainer.react","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","GradientBox.react","Link.react","React","cx","emptyFunction","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){'use strict';var ba=w.PropTypes,ca=84,da=180,ea=120,fa=290,ga=100,ha=w.createClass({displayName:"AdsImagePanelItem",propTypes:{fileInputNodeID:ba.string,image:ba.instanceOf(h),isImageTextValidationToolEnabled:w.PropTypes.bool,onRemove:ba.func,onUploadImageClick:ba.func,progressValue:ba.number,size:ba.oneOf(['medium','large'])},getDefaultProps:function(){return {size:'medium',onUploadImageClick:y};},getInitialState:function(){return {imageTextOverlayDialogShown:false,size:this._resolveSize(this.props.size)};},_receiveStockImageDetails:function(ia){if(this.isMounted()&&this.props.image&&this.props.image.equals(ia))this.forceUpdate();},_maybeFetchStockImageDetails:function(ia){if(ia&&ia.isStockImage())ia.fetchStockImageDetails(this._receiveStockImageDetails);},componentWillReceiveProps:function(ia){this._maybeFetchStockImageDetails(ia.image);this.setState({size:this._resolveSize(ia.size)});},componentWillMount:function(){this._maybeFetchStockImageDetails(this.props.image);},render:function(){var ia=this.props.image,ja=ia?ia.getUrl():null,ka;if(ia){if(ia.isStockImage()){if(ia.getFullSizeUrl()){ka=this._renderImage(ia.getFullSizeUrl());}else ka=this._renderProgressBox("Waiting",100);}else ka=ja?this._renderImage(ja):null;}else if(this.props.progressValue){ka=this._renderProgressBox("Uploading",this.props.progressValue);}else if(this.props.fileInputNodeID)ka=this._renderUploaderIcon();return (w.createElement("div",{className:"_2npo",style:this.state.size},ka,this._renderImageTextOverlayDialog()));},_renderImageTextOverlayDialog:function(){var ia=this.props.image;if(!ia||!this._shouldShowTextOverlayWarning())return null;var ja=i.getFeedback(ia.getUniqueIdentifier()),ka=k.getImageOverlayBoxes(ja);return (w.createElement(g,{dialogShown:this.state.imageTextOverlayDialogShown,onHide:this._hideImageTextOverlayDialog,images:[ia],preselectedBoxes:[ka],readOnly:true}));},_showImageTextOverlayDialog:function(){this.setState({imageTextOverlayDialogShown:true});},_hideImageTextOverlayDialog:function(){this.setState({imageTextOverlayDialogShown:false});},_renderImage:function(ia){var ja=(w.createElement(s,null,w.createElement(r,null,w.createElement(p,{backgroundSize:"containinside",height:this.state.size.height,loadingIndicatorStyle:"large",src:ia,width:this.state.size.width})),w.createElement(t,{vertical:"bottom"},w.createElement(u,{className:"_2npp",color:"black",direction:"up"})),w.createElement(t,{vertical:"bottom"},this._renderImageInfo())));if(this.props.onRemove)return (w.createElement(n,{onXoutClick:this._onRemoveClick},ja));return ja;},_renderImageInfo:function(){var ia=this.props.image,ja,ka;if(ia.isStockImage()){if(ia.hasFullSizeDimensions()){ja=ia.getFullSizeWidth();ka=ia.getFullSizeHeight();}else if(ia.getFullSizeUrl())ia.fetchFullSizeDimensions(this._receiveStockImageDetails.bind(this,ia));}else{ja=ia.getWidth();ka=ia.getHeight();}var la=this._renderValidationIcon();return (w.createElement("div",{className:"_2npq"},w.createElement("div",{className:((!ja||!ka?"hidden_elem":''))},la.sizeIcon,z._("{width} \u00d7 {height}",[z.param("width",ja),z.param("height",ka)]),la.infoIcon)));},_renderValidationIcon:function(){var ia=this.props.image;if(!ia.isValidated())return {};var ja=ia.getValidation(j.DESKTOP_NEWS_FEED),ka=ia.getValidation(j.MOBILE_NEWS_FEED),la=ia.getValidation(j.RHC),ma=ia.getValidation(j.ICON),na=ja.errorMessage||ka.errorMessage||la.errorMessage||ma.errorMessage,oa=ja.warningMessage||ka.warningMessage||la.warningMessage||ma.warningMessage,pa=ja.successMessage||ka.successMessage||la.successMessage||ma.successMessage,qa=na,ra=[];qa&&ra.push(qa);var sa=oa||pa,ta=[];!(qa)&&sa&&ta.push(sa);var ua;if(na){ua=m.SMALL_IMAGE;}else if(oa){ua=m.MID_IMAGE;}else ua=m.LARGE_IMAGE;var va=null;if(qa){va=this._getValidationIcon('info',m.ERROR_IMAGE,ra);}else if(this._shouldShowTextOverlayWarning())va=this._getValidationIcon('info',m.WARNING_BIG,this._getTextOverlayWarningMessages());return {sizeIcon:this._getValidationIcon('size',ua,ta),infoIcon:va};},_getValidationIcon:function(ia,ja,ka){return (w.createElement(l,{className:((ia==='size'?"_2npr":'')+(ia==='info'?' '+"_2nps":'')),messages:ka,type:ja}));},_renderProgressBox:function(ia,ja){return (w.createElement(q,{className:"_2npt",horizontal:false,vertical:true},w.createElement(o,{className:aa("_3-92","_3-9c"),striped:this.props.progressValue===ga,value:ja}),w.createElement("div",{className:"_2npu"},ia)));},_renderUploaderIcon:function(){return (w.createElement("label",{className:"_2npv",htmlFor:this.props.fileInputNodeID,onClick:this.props.onUploadImageClick,role:"button"},w.createElement(q,{className:"_2npw",vertical:true},w.createElement("div",{className:"_2npx"}))));},_onRemoveClick:function(){this.props.onRemove(this.props.image);},_resolveSize:function(ia){var ja=ia==='large',ka=ja?fa:da,la=ja?ea:ca;return {width:ka,height:la};},_shouldShowTextOverlayWarning:function(){if(!k.doesImageContainText(i.getFeedback(this.props.image.getUniqueIdentifier())))return false;return this.props.isImageTextValidationToolEnabled;},_getTextOverlayWarningMessages:function(){return [z._("Ad images with text that takes up more than 20\u0025 of the image may not be approved. Use another image or {=learn more} about using text in ads.",[z.param("=learn more",w.createElement(v,{onClick:this._showImageTextOverlayDialog},"learn more"))])];}});e.exports=ha;},null);
__d("AdsGeoLocationMetaInfoDataSource",["AdsDaoGraph","CurrentLocale","Promise","getAdsTargetingLocationsCount"],function(a,b,c,d,e,f,g,h,i,j){'use strict';var k;function l(){this.dao=g;}l.prototype.getMetaInfo=function(m,n,o){m=m||{};n=n||{};var p=(m.countries||[]).concat(n.countries||[]),q=this.getKeys(m.regions).concat(this.getKeys(n.regions)),r=this.getKeys(m.cities).concat(this.getKeys(n.cities)),s=this.getKeys(m.zips).concat(this.getKeys(n.zips)),t=this.getKeys(m.geo_markets).concat(this.getKeys(n.geo_markets)),u=[].concat(this.getKeys(m.custom_locations,'address_string'),this.getKeys(n.custom_locations,'address_string')),v={},w=[],x=j(m)+j(n);if(x>0)w.push(new i(function(y,z){this.dao.fetch.adGeoLocationMetaInfo.one(function(aa){if(aa.geo_markets)Object.keys(aa.geo_markets).forEach(function(ba){var ca=aa.geo_markets[ba];if(ca.name.indexOf(', DMA\xAE')===-1)ca.name+=', DMA\xAE';});v=aa;y(true);},{locale:h.get(),countries:p,regions:q,cities:r,zips:s,geo_markets:t,custom_locations:u,handleError:function(aa,ba){z(ba&&ba.error||'unknown error');}});}.bind(this)));i.all(w).done(function(){o(v);},function(y){});};l.prototype.getKeys=function(m,n){n=n||'key';return (m||[]).map(function(o){return o[n];});};l.getInstance=function(){if(!k)k=new l();return k;};e.exports=l;},null);
__d("AdsInterestsBrowseDataSource",["AdsSearchBrowseUtils","CurrentLocale","SearchableEntry"],function(a,b,c,d,e,f,g,h,i){var j=[],k,l;function m(q){k=n(q);l=g.generateTreeData(k);while(j.length){var r=j.pop();r();}j=[];}function n(q){var r,s,t,u={},v,w;for(var x=0;x<q.length;x++){r=q[x];s=r.parent_category;t=r.name;if(r.path&&r.path.length){v=r.path.slice();v.pop();}else v=null;if(v&&v.length>0){w=v.join(' > ')+' > '+t;}else{v=null;w=t;}u[w]={id:r.id,key:w,uniqueID:r.id,name:r.name,parentName:s,reach:r.audience_size,description:r.description,path:v,keywords:r.keywords,topic:r.topic};}return u;}var o;function p(q,r){"use strict";if(o)return o;if(q){this.dao=q;this.options=r||{};}}p.prototype.resetTreeData=function(){"use strict";l=null;};p.prototype.getTreeData=function(q){"use strict";if(l){this.$AdsInterestsBrowseDataSource0(q);}else{j.push(this.$AdsInterestsBrowseDataSource0.bind(this,q));this.$AdsInterestsBrowseDataSource1();}};p.prototype.getSearchDataElem=function(q){"use strict";if(k)return k[q];};p.prototype.dataToEntry=function(q){"use strict";var r=new i({uniqueID:q.uniqueID,title:q.name});r.id=q.id;r.key=q.key;r.numLeafCategories=q.numLeafCategories;r.path=q.path;r.reach=q.reach;r.name=q.name;r.description=q.description;r.source=q.source;r.topic=q.topic;r.isInHierarchy=true;return r;};p.prototype.getDao=function(){"use strict";return this.dao;};p.prototype.$AdsInterestsBrowseDataSource1=function(){"use strict";if(j.length!==1||!this.dao)return;this.dao.fetch.adInterestCategory.one(function(q){m(q);},{locale:h.get(),fetch_interest_groups:this.options.fetchInterestGroups});};p.prototype.$AdsInterestsBrowseDataSource0=function(q){"use strict";q(l);};p.prototype.$AdsInterestsBrowseDataSource2=function(q){"use strict";q(k);};p.getInstance=function(q,r){if(!o)o=new p(q,r);return o;};e.exports=p;},null);
__d("AdsInterestsSuggestionsDataSource",["AdInterfacesUiLogger","CurrentLocale","SearchableEntry"],function(a,b,c,d,e,f,g,h,i){var j,k=20;function l(m){"use strict";if(m)this.dao=m;}l.prototype.getSuggestions=function(m,n){"use strict";if(!this.dao)return;this.dao.fetch.adInterestSuggestion.one(this.getSuggestionsCB.bind(this,n),{interest_list:m,offset:0,limit:k,locale:h.get()});};l.prototype.getSuggestionsCB=function(m,n){"use strict";var o=n||[];if(!(o instanceof Array))return;var p=o.map(function(s){return {fbid:s.id,name:s.name};});g.log('unified_interest_sugggestions_returned',{results:p});var q,r=o.map(function(s){q=new i({uniqueID:s.id,title:s.name});q.name=s.name;q.reach=s.audience_size;q.path=s.path;if(s.path&&s.path.length){q.path=s.path.slice();q.path.pop();q.isInHierarchy=true;}q.description=s.description;return q;});m(r);};l.getInstance=function(m){if(!j)j=new l(m);return j;};e.exports=l;},null);
__d("AdsInterestsValidationDataSource",["SearchableEntry","CurrentLocale"],function(a,b,c,d,e,f,g,h){var i;function j(k){"use strict";if(k)this.dao=k;}j.prototype.getMetadata=function(k,l,m){"use strict";if(!this.dao)return;this.dao.fetch.adInterestValid.one(this.getInterestsCB.bind(this,l),{interest_list:k,ignore_case:!m,locale:h.get()});};j.prototype.getMetadataFromFBID=function(k,l){"use strict";if(!this.dao)return;this.dao.fetch.adInterestValid.one(this.getInterestsCB.bind(this,l),{interest_fbid_list:k,locale:h.get()});};j.prototype.getInterestsCB=function(k,l){"use strict";var m=l||[];if(!(m instanceof Array))return;var n,o=[];m.forEach(function(p){if(!p.valid)return;n=new g({uniqueID:p.id,title:p.name});n.name=p.name;n.reach=p.audience_size;n.path=p.path;if(p.path&&p.path.length){n.path=p.path.slice();n.path.pop();n.isInHierarchy=true;}n.description=p.description;n.topic=p.topic;o.push(n);});k(o);};j.getInstance=function(k){if(!i)i=new j(k);return i;};e.exports=j;},null);
__d("AdsLocationValidationHelpers",["adsGKCheck","LocationConstants","createObjectFrom"],function(a,b,c,d,e,f,g,h,i){'use strict';var j=i([h.COUNTRY,h.CUSTOM_LOCATION,h.GEO_MARKET,h.ZIP]),k=/^\d+\s+\S+/i;function l(p){return k.test(p);}function m(p){var q=p.getAuxiliaryData(),r=q&&q.type;if(r===h.GEO_MARKET&&!g('geo_v2_ui_gk'))return false;if(r in j)return true;return r===h.CITY&&q.supports_city||r===h.REGION&&q.supports_region;}function n(p,q){return p.map(function(r){var s=r.getType(),t=r.getTitle(),u=r.getAuxiliaryData(),v={};switch(s){case h.COUNTRY:v={zipcode:'',city:'',region:'',country:t,country_code:u.key};break;case h.REGION:v={zipcode:'',city:'',region:t,region_id:u.key,country:q[u.country_code]};break;case h.CITY:var w=t.split(',');v={zipcode:'',city:w[0],region:u.region||'',region_id:u.region_id,country:q[u.country_code]};break;case h.CUSTOM_LOCATION:v={zipcode:'',city:'',region:'',country:q[u.country_code]};break;case h.GEO_MARKET:v={zipcode:'',city:'',region:'',country:q[u.country_code]};break;case h.ZIP:var x=u.key.split(':');v={zipcode:x[x.length-1],city:u.primary_city||'',region:u.region||'',region_id:u.region_id,country:q[u.country_code]};break;}v.country_code=v.country_code||u.country_code;v.category=s;v.entry=r;return v;});}function o(p,q){var r=n(p,q),s={},t={};r.map(function(ba){var ca=ba.category,da=ba.entry;switch(ca){case h.COUNTRY:s[ba.country_code]=da;break;case h.REGION:t[ba.region_id]=da;}});var u,v=[];for(var w=0;w<r.length;w++){var x=r[w],y=x.entry,z=s[x.country_code],aa=t[x.region_id];if(z&&z!==y){u=u?u:z;v.push(y);}else if(aa&&aa!==y){u=u?u:aa;v.push(y);}}return {invalidEntry:u,subsetEntries:v};}f.isValidEntry=m;f.looksLikeAddress=l;f.normalizeEntriesAsLocationInfo=n;f.determineInvalidEntry=o;},null);
__d("AdsLocationTypeTranslationHelper",["LocationConstants","fbt"],function(a,b,c,d,e,f,g,h){function i(j){switch(j){case g.CUSTOM_LOCATION:return "Address";case g.CITY:return "City";case g.REGION:return "State";case g.GEO_MARKET:return "Market";case g.COUNTRY:return "Country";case g.ZIP:return "Zip Code";}}f.translatedLocationType=i;},null);
__d("AdsLocationTypeaheadEntriesView.react",["AdsCFLoggerInternal","AdsLocationValidationHelpers","AdsLocationTypeTranslationHelper","Grid.react","React","ScrollableArea.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=j.GridItem,p=10,q=250,r=425,s=k.createClass({displayName:"AdsLocationTypeaheadEntriesView",propTypes:{highlightedEntry:k.PropTypes.object,entries:k.PropTypes.array.isRequired,onSelect:k.PropTypes.func.isRequired,onHighlight:k.PropTypes.func,width:k.PropTypes.number},getDefaultProps:function(){return {width:r};},render:function(){var v=this.props.entries,w=[],x=[];v.forEach(function(aa){if(h.isValidEntry(aa)){w.push(aa);}else x.push(aa);},this);if(v&&v.length){var y=w.map(this._renderRow,this),z=v.length>p?q:null;return (k.createElement("ul",{className:"_5gs5",style:{width:this.props.width}},k.createElement(l,{height:z},y,k.createElement(t,{validEntries:w,invalidEntries:x,countries:this.props.countries}))));}return k.createElement("ul",{className:"_5d5w"});},_renderRow:function(v){if(v.getUniqueID()==='-1')return (k.createElement("li",{className:"_5d5x",key:"no_match_found"},k.createElement("div",{className:"fwb"},"No Matches Found"),k.createElement("div",{className:"_5lp8"},"Check your spelling, formatting or enter another location")));return (k.createElement(u,{key:v.getUniqueID(),countries:this.props.countries,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,highlighted:v===this.props.highlightedEntry&&v.getAuxiliaryData()!==null,entry:v}));}}),t=k.createClass({displayName:"InvalidEntriesView",render:function(){var v=this.props.invalidEntries.map(this._renderRow,this);if(v.length){var w=this.props.invalidEntries.map(function(x){return x.getTitle();});g.log(g.CATEGORIES.NO_DB_OP,'geo_location_unsupported',{unsupported_locations:w});if(v.length===1){return (k.createElement("div",{className:"_59fy"},k.createElement("div",{className:"_5i39"},k.createElement("div",{className:"_5i3a"},"Cannot Target The Following Location"),"This location isn't available to target. Try choosing another location."),v));}else return (k.createElement("div",{className:"_59fy"},k.createElement("div",{className:"_5i39"},k.createElement("div",{className:"_5i3a"},"Cannot Target The Following Locations"),"These locations aren't available to target. Try choosing another location."),v));}return k.createElement("div",null);},_renderRow:function(v){return (k.createElement(u,{key:v.getUniqueID(),countries:this.props.countries,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,highlighted:v===this.props.highlightedEntry&&v.getAuxiliaryData()!==null,entry:v}));}}),u=k.createClass({displayName:"EntryRowView",render:function(){var v=(("_5d5x")+(this.props.highlighted?' '+"_2avc":''));return (k.createElement("li",{key:this.props.entry.getUniqueID(),onMouseDown:this._onMouseDown,onMouseEnter:this._onMouseEnter,className:v},this._getTypeaheadText(this.props.entry)));},_getTypeaheadText:function(v){var w=this._getText(v),x=((!h.isValidEntry(v)?"_5ibt":'')),y=0,z=0,aa=w.toLowerCase().indexOf(v.matchedText.toLowerCase());if(aa>=0){y=aa;z=aa+v.matchedText.length;}var ba=w.substring(0,y),ca=w.substring(y,z),da=w.substring(z);return (k.createElement(j,{cols:2,fixed:true,className:x},k.createElement(o,{className:"_4ou2"},ba,k.createElement("span",{className:"_5d5z"},ca),da),k.createElement(o,{className:"_5wup"},i.translatedLocationType(v.getType()))));},_getText:function(v){var w=v.getTitle(),x=v.getAuxiliaryData(),y=this.props.countries;switch(v.getType()){case 'region':w+=', '+y[x.country_code];return w;case 'city':w+=x.region?', '+x.region:'';w+=', '+y[x.country_code];return w;case 'zip':var z=x.primary_city||x.region;return w+' '+z+', '+y[x.country_code];default:return w;}},_onMouseDown:function(v){if(this.props.entry.getUniqueID()!=='-1')this.props.onSelect&&this.props.onSelect(this.props.entry,v);},_onMouseEnter:function(){if(this.props.entry.getUniqueID()!=='-1')this.props.onHighlight&&this.props.onHighlight(this.props.entry);}});e.exports=s;},null);
__d("AdsLocationTypeaheadPresenter",["AdsLocationTypeaheadEntriesView.react"],function(a,b,c,d,e,f,g){var h=50,i={ViewRenderer:g,useLayer:true,maxEntries:h};e.exports=i;},null);
__d("AdsLocationSearchSource",["AbstractSearchSource","AdsCreationConfig","AdsDaoGraph","AdsCFLoggerInternal","AdsLocationValidationHelpers","CurrentLocale","LocationConstants","Promise","SearchableEntry","debounce","fbt","uki-fb-view-typeahead-util"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=b('uki-fb-view-typeahead-util').Util,s=2621,t=200,u=h.geoLocationTypeaheadMinLength,v=50,w=50,x,y=[],z=[];function aa(ka,la){var ma=[];while(ka.length>0)ma.push(ka.splice(0,la));return ma;}var ba=p(function(ka,la){var ma=i.primedForLocale(l.get());if((ka.allowedCountryList&&ka.allowedCountryList.length)||(ka.disallowedCountryList&&ka.disallowedCountryList.length))ka.limit=100;ma.fetch.geolocation.one(la,ka);},t),ca=function(ka,la){ka=r.tokenize(ka).join(' ');for(var ma=0;ma<la.length;ma++)if(r.tokenize(la[ma].text||la[ma].name).join(' ')==ka)return la[ma];return la[0];},da=function(ka,la,ma,na){var oa=i.primedForLocale(l.get()),pa=null;switch(la){case m.COUNTRY:pa=oa.fetch.adCountryValidation;break;case m.REGION:pa=oa.fetch.adRegionValidation;break;case m.CITY:pa=oa.fetch.adCityValidation;break;case m.ZIP:pa=oa.fetch.adZipValidation;break;}pa.one(function(qa){if(qa&&qa.length){var ra=ca(ka,qa);ra.type=la;y.push(ra);ma();}else{z.push(ka);na();}},{q:ka});},ea=function(){var ka=[];y.forEach(function(la){var ma=new o({uniqueID:la.key,title:la.name.split(', ')[0],type:la.type,auxiliaryData:la});switch(la.type){case m.CITY:if(la.supports_city)ka.push(ma);break;case m.REGION:if(la.supports_region)ka.push(ma);break;default:ka.push(ma);}});return ka;},fa=function(){return z;},ga=[];for(var ha in g)if(g.hasOwnProperty(ha))ja[ha]=g[ha];var ia=g===null?null:g.prototype;ja.prototype=Object.create(ia);ja.prototype.constructor=ja;ja.__superConstructor__=g;function ja(ka,la){"use strict";if(x)return x;}ja.prototype.onValidateProgress=function(ka){"use strict";this.$AdsLocationSearchSource0=ka;};ja.prototype.reportProgress=function(ka){"use strict";this.$AdsLocationSearchSource0&&this.$AdsLocationSearchSource0(ka);};ja.prototype.searchImpl=function(ka,la,ma){"use strict";var na=ma||{};na.q=ka;na.limit=v;if(ka.length<=u)la([],ka);ba(na,this.$AdsLocationSearchSource1.bind(this,ka,la,ma));};ja.prototype.validateAddress=function(ka,la){"use strict";i.fetch.geocoder.clearCache();i.fetch.geocoder.one(function(ma){la(null,true,ma[0]);},{locale:l.get(),address:ka,handleError:function(ma,na){var oa=(na&&na.error)?na.error:null;if(oa){if(oa.code===s){la(null,false);}else la(oa,null);}else{oa=new Error('unknown error');oa.response=na;la(oa,null);}}});};ja.prototype.validate=function(ka,la,ma){"use strict";y=[];z=[];var na=aa(ka,w),oa=na.length,pa=0,qa=function(){this.reportProgress(pa/oa);var ra=na.shift();if(ra){this.validateChunk(ra,la,qa);pa++;}else ma(ea(),fa());}.bind(this);qa();};ja.prototype.validateChunk=function(ka,la,ma){"use strict";var na=ka.map(function(oa){return new n(function(pa,qa){da(oa,la,pa,qa);});});n.all(na).done(ma,ma);};ja.prototype.validatePostalCodes=function(ka,la){"use strict";var ma=i,na=(ka||[]).map(function(oa){return oa.indexOf(':')===-1?'US:'+oa:oa;});ma.fetch.adGeoLocationMetaInfo.one(function(oa){var pa=oa.zips||[],qa=[],ra=[];Object.keys(pa).forEach(function(sa){var ta=pa[sa];if(!ta.country_code){ra.push(ta.name);}else{var ua=new o({uniqueID:ta.key,title:ta.name.split(', ')[0],type:ta.type,auxiliaryData:ta});qa.push(ua);}});la(qa,ra);},{zips:na,locale:l.get(),handleError:function(oa,pa){la([],ka);}});};ja.prototype.validateCustomLocations=function(ka,la){"use strict";var ma=[],na=[],oa=ka.map(function(pa){return new n(function(qa,ra){this.validateAddress(pa,function(sa,ta,ua){if(sa)ra(sa);if(ta){var va={type:m.CUSTOM_LOCATION,latitude:ua.latitude,longitude:ua.longitude,country_code:ua.country};if(ua.city){va.primary_city_id=ua.city.key;va.primary_city=ua.city.name;}if(ua.region){va.region_id=ua.region.key;va.region=ua.region.name;}var wa=new o({uniqueID:ua.normalized_address,title:ua.normalized_address,type:m.CUSTOM_LOCATION,auxiliaryData:va});ma.push(wa);}else na.push(pa);qa();});}.bind(this));}.bind(this));n.all(oa)["finally"](function(){return la(ma,na);});};ja.prototype.$AdsLocationSearchSource1=function(ka,la,ma,na){"use strict";ma=ma||{};if(ma.allowedCountryList&&ma.allowedCountryList.length>0)na=na.filter(function(ta){var ua=ta.country_code||ta.key;return ma.allowedCountryList.indexOf(ua)!==-1;});if(ma.disallowedCountryList&&ma.disallowedCountryList.length>0)na=na.filter(function(ta){var ua=ta.country_code||ta.key;return ma.disallowedCountryList.indexOf(ua)===-1;});var oa=[];if(!ma.disallowAddress&&k.looksLikeAddress(ka)){var pa=new o({uniqueID:ka,title:ka,type:m.CUSTOM_LOCATION,auxiliaryData:{type:m.CUSTOM_LOCATION,country_code:'US'}});pa.matchedText=ka;oa.push(pa);la(oa,ka);return;}if(!na.length&&ka.length>u){var qa="No Matches",ra=new o({uniqueID:-1,title:qa});ra.matchedText=qa;oa.push(ra);la(oa,ka);j.log(j.CATEGORIES.NO_DB_OP,'geo_location_no_match',{query:ka});return;}var sa={};na.map(function(ta,ua){if(!sa[ta.key]){sa[ta.key]=true;var va=ta.name;if(ta.type===m.GEO_MARKET){va+=', DMA\xAE';}else va=va.split(', ')[0];var wa=new o({uniqueID:ta.key,title:va,type:ta.type,auxiliaryData:ta});wa.matchedText=ka;wa.position=ua;oa.push(wa);}});ga=na;la(oa,ka);};ja.prototype.getCurrentRawResult=function(){"use strict";return ga;};ja.getInstance=function(){if(!x)x=new ja();return x;};e.exports=ja;},null);
__d("AdsLocationExclusionTokenizer.react",["AbstractTokenizer.react","AdsLocationTypeaheadPresenter","AdsLocationValidationHelpers","React","cx","AdsLocationSearchSource","fbt","joinClasses","AdsCFLoggerInternal"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=j.PropTypes;function q(s,t){return t.getUniqueID()===s;}var r=j.createClass({displayName:"AdsLocationExclusionTokenizer",propTypes:{countries:p.object.isRequired,entries:p.array,getExcludedEntries:p.func,searchSourceOptions:p.object,inputClassName:p.string,onEnter:p.func},getInitialState:function(){return {entries:this.props.entries?this.props.entries.slice():[]};},render:function(){var s="Enter locations to exclude",t=l.getInstance();return (j.createElement(g,j.__spread({},this.props,{ref:"tokenizer",placeholder:s,searchSource:t,inputClassName:this.props.inputClassName,searchSourceOptions:this.props.searchSourceOptions,className:n(this.props.className,"_5dj7"),presenter:h,onAddEntryAttempt:this._onAddEntryAttempt,onRemoveEntryAttempt:this._onRemoveEntryAttempt,entries:this.state.entries,excludedEntries:this.props.getExcludedEntries(),clearOnEnter:true})));},_onAddEntryAttempt:function(s){var t=s.getUniqueID(),u=this.state.entries.slice();if(!u.some(q.bind(null,t))){var v=l.getInstance(),w=v.getCurrentRawResult();o.log(o.CATEGORIES.NO_DB_OP,'select_exclude_geo_location',{position:s.position,search_result:w,query:this.refs.tokenizer.state.queryString});u.push(s);var x=i.determineInvalidEntry(u,this.props.countries),y=x.invalidEntry,z=[],aa={};if(y)if(y===s){z=x.subsetEntries;}else z=[y];z.forEach(function(ca){aa[ca.getUniqueID()]=true;});var ba=[];u.forEach(function(ca){if(!(ca.getUniqueID() in aa))ba.push(ca);});this._onEntriesChange(ba);this.refs.tokenizer.clearActiveEntries();}else this.props.onEnter&&this.props.onEnter();},_onRemoveEntryAttempt:function(s){var t=s.getUniqueID(),u=this.state.entries;if(u.some(q.bind(null,t))){u.splice(u.indexOf(s),1);this._onEntriesChange(u);}},_onEntriesChange:function(s){this.setState({entries:s});},getEntries:function(){return this.state.entries.slice();},setEntries:function(s){this.setState({entries:s?s.slice():[]});}});e.exports=r;},null);
__d("AdsLocationExclusionDialog.react",["React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIDialogButton.react","LayerAutoFocus","LayerFadeOnHide","LayerHideOnEscape","AdsLocationExclusionTokenizer.react","fbt","cx","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=g.PropTypes,v=g.createClass({displayName:"AdsLocationExclusionDialog",propTypes:{entry:u.object.isRequired,exclusionEntries:u.object.isRequired,onExclusionChange:u.func,locationName:u.string,getExcludedEntries:u.func,searchSourceOptions:u.object},mixins:[h],getInitialState:function(){return {dialogShown:false};},show:function(event){this.setState({dialogShown:true});},_onToggle:function(w){setTimeout(this.setState.bind(this,{dialogShown:w},null),0);},componentDidUpdate:function(){this._resetEntries();},renderLayers:function(){var w=t(this.props.searchSourceOptions);switch(this.props.entry.getType()){case 'country':w.country_code=this.props.entry.getUniqueID();break;case 'region':w.country_code=this.props.entry.getAuxiliaryData().country_code;w.region_id=this.props.entry.getUniqueID();break;case 'city':w.country_code=this.props.entry.getAuxiliaryData().country_code;w.region_id=this.props.entry.getAuxiliaryData().region_id;}var x=g.createElement(q,g.__spread({},this.props,{ref:"tokenizer",inputClassName:"autofocus",entries:this.props.exclusionEntries[this.props.entry.getUniqueID()],searchSourceOptions:w,onEnter:this._onConfirmClick}));return {dialog:g.createElement(i,{shown:this.state.dialogShown,behaviors:{LayerFadeOnHide:o,LayerAutoFocus:n,LayerHideOnEscape:p},onToggle:this._onToggle,width:445},g.createElement(l,null,r._("Exclude Locations from {name}",[r.param("name",this.props.locationName)])),g.createElement(j,null,g.createElement("div",null,r._("Enter locations you want to exclude from {name}",[r.param("name",g.createElement("span",{className:"_5dj8"},this.props.locationName))]),x)),g.createElement(k,null,g.createElement(m,{label:"Cancel",use:"default",action:"cancel",onClick:this._onCancelClick}),g.createElement(m,{label:"Exclude",use:"confirm",action:"cancel",onClick:this._onConfirmClick})))};},render:function(){return (g.createElement("div",null));},_onConfirmClick:function(){var w=this.refs.tokenizer.getEntries();this.props.onExclusionChange&&this.props.onExclusionChange(this.props.entry,w);this.setState({dialogShown:false});},_onCancelClick:function(){this._resetEntries();},_resetEntries:function(){this.refs.tokenizer.setEntries(this.props.exclusionEntries[this.props.entry.getUniqueID()]);}});e.exports=v;},null);
__d("AdsLocationListCloseButton.react",["React","XUICloseButton.react","AdsCFLoggerInternal"],function(a,b,c,d,e,f,g,h,i){var j=g.PropTypes,k=g.createClass({displayName:"AdsLocationListCloseButton",propTypes:{className:j.string,entries:j.array.isRequired,onRemove:j.func},render:function(){var l=null;if(this.props.onRemove)l=g.createElement(h,{className:this.props.className,size:"small",onClick:this._onClick});return l;},_onClick:function(l){l.preventDefault();var m=this.props.entries.map(function(n){return n.getTitle();});i.log(i.CATEGORIES.NO_DB_OP,'geo_location_click_xout',{removed_locations:m});this.props.entries.forEach(function(n){this.props.onRemove(n);},this);}});e.exports=k;},null);
__d("AdsLocationPopoverMenu.react",["React","PopoverMenu.react","XUIMenuSeparator.react","XUIMenuStaticItem.react","cx","fbt","AdsCFLoggerInternal","LocationConstants","ReactXUIMenu"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=b('LocationConstants').RadiusInfo,o=b('ReactXUIMenu').SelectableMenu,p=b('ReactXUIMenu').Item,q=b('ReactXUIMenu').SelectableItem,r=g.PropTypes,s=g.createClass({displayName:"AdsLocationPopoverMenu",propTypes:{entry:r.object.isRequired,onButtonClick:r.func,onHide:r.func,showExclusionDialog:r.func,entriesRadius:r.object,onRadiusChange:r.func,locationName:r.string,supportsRadius:r.bool},render:function(){var t=[],u=this.props.entry,v=u.getType(),w=this.props.supportsRadius&&v==='city'||v==='zip';if(w){t=n.getSupportedRadii().map(this._getRadiusMenuItem);t.unshift(g.createElement(j,{key:"includenearby"},"INCLUDE NEARBY"));if(v!=='zip')t.push(g.createElement(i,{key:"separator"}));}if(v!=='zip'){t.push(g.createElement(j,{key:"exclusiontargeting"},"EXCLUSION TARGETING"));var x="exclude";t.push(g.createElement(p,{"data-type":"exclusion",title:x,key:"excludelocations"},"Exclude Locations"));}if(!t.length)return g.createElement("span",null);var y=g.createElement(o,{onItemClick:this._onItemClick},t);return (g.createElement(h,{className:"_1vy3",alignh:"right",menu:y,ref:"popoverMenu",onShow:this._onShow,onHide:this._onHide},g.createElement("i",{className:"_1vy4"})));},showMenu:function(){this.refs&&this.refs.popoverMenu&&this.refs.popoverMenu.showPopover();},_getRadiusMenuItem:function(t){var u=this.props.entry,v=this.props.locationName,w=this.props.entriesRadius[u.getUniqueID()]||0,x="radius";if(t>0)if(n.getLocalizedUnit()=='mile'){v=l._("{distance} miles",[l.param("distance",v+' + '+t)]);}else v=l._("{distance} kilometers",[l.param("distance",v+' + '+t)]);return (g.createElement(q,{"data-radius":t,selected:w==t,title:x,key:'rad'+t},v));},_onShow:function(){this.props.onShow&&this.props.onShow();},_onHide:function(){this.props.onHide&&this.props.onHide();},_onItemClick:function(t,event){if(event.item.getRoot().getAttribute('data-type')==='exclusion'){this.props.showExclusionDialog&&this.props.showExclusionDialog();m.log(m.CATEGORIES.NO_DB_OP,'geo_location_click_exclude',{title:this.props.entry.getTitle(),key:this.props.entry.getUniqueID()});}else if(event.item.getRoot().getAttribute('data-radius')>=0){this.props.onRadiusChange&&this.props.onRadiusChange(this.props.entry,event.item.getRoot().getAttribute('data-radius'));m.log(m.CATEGORIES.NO_DB_OP,'geo_location_change_radius',{radius:event.item.getRoot().getAttribute('data-radius'),unit:n.getLocalizedUnit(),title:this.props.entry.getTitle(),key:this.props.entry.getUniqueID()});}}});e.exports=s;},null);
__d("AdsLocationListItem.react",["Animation","CSS","List.react","React","Style","Tooltip","AdsLocationListCloseButton.react","AdsLocationPopoverMenu.react","AdsLocationExclusionDialog.react","fbt","cx","LocationConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=b('LocationConstants').RadiusInfo,s=j.PropTypes,t=306,u={country:4,region:3,city:2,zip:1},v=j.createClass({displayName:"AdsLocationListItem",propTypes:{countries:s.object.isRequired,countryEntry:s.object,entriesRadius:s.object.isRequired,exclusionEntries:s.object.isRequired,getExcludedEntries:s.func,items:s.array.isRequired,newestEntry:s.object,onRadiusChange:s.func,onExclusionChange:s.func,onRemove:s.func,title:s.string.isRequired,smallestEntry:s.string},getInitialState:function(){return {highlight:false};},render:function(x){var y=this.props.items||[];if(!y.length&&this.props.countryEntry!==null)y.push({title:p._("All {country_name}",[p.param("country_name",this.props.title)]),category:'country',entry:this.props.countryEntry});var z=y.map(this._getListEntry,this),aa=(("_4rp3")+(this.state.highlight?' '+"_4ro-":''));return (j.createElement("div",{className:aa},j.createElement(i,{border:"none",spacing:"none"},j.createElement("li",null,j.createElement(i,{className:"_4rp4",spacing:"none",border:"none",direction:"horizontal",onMouseEnter:this._highlightGroup,onMouseLeave:this._removeHighlightGroup},j.createElement("li",null,this.props.title),j.createElement("li",null,j.createElement(m,{className:"_4ro_",entries:this.props.items.map(function(ba){return ba.entry;}),onRemove:this.props.onRemove})))),j.createElement("li",null,j.createElement(i,{className:"_4rp5",border:"none",spacing:"none"},z)))));},_highlightGroup:function(){this.setState({highlight:true});},_removeHighlightGroup:function(){this.setState({highlight:false});},_getListEntry:function(x){return (j.createElement(w,j.__spread({},this.props,{key:x.entry.getUniqueID(),newestEntry:this.props.newestEntry,listItemData:x})));}}),w=j.createClass({displayName:"AdsLocationListSubItem",propTypes:{listItemData:s.object.isRequired,onRemove:s.func,entriesRadius:s.object,exclusionEntries:s.object,onRadiusChange:s.func,onExclusionChange:s.func,getExcludedEntries:s.func,getEntries:s.func,setEntries:s.func},_previousEntry:null,getInitialState:function(){return {notVisible:0,minScale:u[this.props.smallestEntry]||u.zip};},render:function(){var x=this.props.listItemData,y=(("_4roz")+(this.state.active?' '+"_4rp1":'')),z,aa=this.props.entriesRadius[x.entry.getUniqueID()];if(aa>0)if(r.getLocalizedUnit()=='mile'){z=j.createElement("span",{ref:"radius",className:"_3pzx"},p._("{radius} mi",[p.param("radius",' + '+aa)]));}else z=j.createElement("span",{ref:"radius",className:"_3pzx"},p._("{radius} km",[p.param("radius",' + '+aa)]));var ba;if(u[x.entry.getType()]>this.state.minScale)ba=j.createElement("li",{className:"_4rp0"},j.createElement(n,j.__spread({},this.props,{onHide:this._onPopoverHide,onShow:this._onPopoverShow,onRadiusChange:this._onRadiusChange,ref:"popoverMenu",showExclusionDialog:this._showExclusionDialog,entry:x.entry,locationName:x.title})),j.createElement(o,j.__spread({},this.props,{countries:this.props.countries,ref:"dialog",entry:x.entry,locationName:x.title,onExclusionChange:this._onExclusionChange})));var ca,da=this.props.exclusionEntries[x.entry.getUniqueID()];if(da&&da.length>0){var ea={region:0,city:1,zip:2};da.sort(function(ja,ka){return ea[ja.getType()]-ea[ka.getType()];});var fa=[];da.forEach(function(ja){fa.push(ja.getTitle().split(',')[0]);});if(this.state.notVisible>0){fa=fa.slice(0,fa.length-this.state.notVisible);var ga='';if(this.state.notVisible>=da.length){ga=j.createElement("span",{ref:"compress",className:"_3p-3"},j.createElement("span",null,' '),j.createElement("span",{ref:"hidden",onClick:this._showExclusionDialog,className:"_1ew5"},p._("{overflow count} locations",[p.param("overflow count",this.state.notVisible)])));}else ga=j.createElement("span",{ref:"compress",className:"_3p-3"},j.createElement("span",null,' ',"and",' '),j.createElement("span",{ref:"hidden",onClick:this._showExclusionDialog,className:"_1ew5"},p._("{overflow count} more",[p.param("overflow count",this.state.notVisible)])));}ca=j.createElement("span",{ref:"exclude",className:"_3p-1"},' ',p._("excluding {exclusion}",[p.param("exclusion",fa.join(', '))]));}var ha=300;if(z&&ca){ha=180;}else if(z){ha=250;}else if(ca)ha=200;var ia={maxWidth:ha};return (j.createElement("li",{className:y},j.createElement(m,{className:"_4ro_",entries:[x.entry],onRemove:this.props.onRemove}),j.createElement(i,{spacing:"none",border:"none",onClick:this._onListClick,direction:"horizontal"},j.createElement("li",{className:"_4rp2"},j.createElement("span",{ref:"title",style:ia,className:"_4roy"},x.title),z,ca,ga),ba)));},componentDidMount:function(){this._highlightItem();this._compressExclusionEntries();},componentWillUpdate:function(){this._previousEntry=this.props.listItemData.entry;},componentDidUpdate:function(){this._highlightItem();this._compressExclusionEntries();},_highlightItem:function(){var x=false;if(!this._previousEntry){x=this.props.highlightNewItems&&this.props.newestEntry&&this.props.newestEntry.getUniqueID()===this.props.listItemData.entry.getUniqueID();}else x=this.props.highlightNewItems&&(this.props.listItemData.entry.getUniqueID()!==this._previousEntry.getUniqueID())&&this.props.newestEntry&&(this.props.newestEntry.getUniqueID()===this.props.listItemData.entry.getUniqueID());if(x){var y=this.getDOMNode();k.set(y,'background','#fff9d7');h.addClass(y,"_1ew4");new g(y).to('background','#fff').duration(1000).ondone((function(){k.set(y,'background','');h.removeClass(y,"_1ew4");}).bind(this)).go();}},_onListClick:function(event){if(this.refs&&this.refs.popoverMenu)this.refs.popoverMenu.showMenu();},_compressExclusionEntries:function(){var x=this.refs.radius,y=this.refs.exclude,z=this.refs.compress;if(!y)return;var aa=this.refs.title.getDOMNode().offsetWidth,ba=x?x.getDOMNode().offsetWidth:0,ca=y?y.getDOMNode().offsetWidth:0,da=z?z.getDOMNode().offsetWidth:0;if(z){var ea=this.props.listItemData,fa=this.props.exclusionEntries[ea.entry.getUniqueID()],ga=fa.map(function(ha){return ha.getTitle().split(',')[0];});ga=ga.slice(ga.length-this.state.notVisible);l.set(this.refs.hidden.getDOMNode(),ga.join('\n'),'above','right');}if(ca+aa+ba+da>t)this.setState({notVisible:this.state.notVisible+1});},_onPopoverHide:function(){this.setState({active:false});},_onPopoverShow:function(){this.setState({active:true});},_showExclusionDialog:function(){this.refs.dialog.show();},_onRadiusChange:function(x,y){this.setState({notVisible:0});this.props.onRadiusChange(x,y);},_onExclusionChange:function(x,y){this.setState({notVisible:0});this.props.onExclusionChange(x,y);},_triggerRender:function(){if(this.props.getEntries&&this.props.setEntries)this.props.setEntries(this.props.getEntries());}});e.exports=v;},null);
__d("AdsLocationListItemGroup.react",["AdsLocationListItem.react","List.react","LocationConstants","React"],function(a,b,c,d,e,f,g,h,i,j){var k=j.PropTypes,l=j.createClass({displayName:"AdsLocationListItemGroup",propTypes:{countries:k.object.isRequired,category:k.array.isRequired,entriesRadius:k.object.isRequired,exclusionEntries:k.object.isRequired,onRadiusChange:k.func,onExclusionChange:k.func,onRemoveEntry:k.func,newestEntry:k.object,getExcludedEntries:k.func},render:function(){var n=m(this.props.category),o=n.map(function(p){return (j.createElement("li",{key:p.title},j.createElement(g,j.__spread({},this.props,{title:p.title,items:p.items,newestEntry:this.props.newestEntry,countryEntry:p.entry,onRemove:this.props.onRemoveEntry}))));}.bind(this),this);return (j.createElement(h,{border:"none",spacing:"none"},o));}});function m(n){if(!n.length)return [];var o={};n.forEach(function(p){var q=p.country;if(p.category!==i.REGION&&p.region)q+=', '+p.region;var r=o[q];if(!r){r={title:q,items:[]};o[q]=r;}switch(p.category){case i.COUNTRY:r.entry=p.entry;break;case i.CUSTOM_LOCATION:case i.GEO_MARKET:r.items.push({title:p.entry.getTitle(),category:p.category,entry:p.entry});break;case i.REGION:r.items.push({title:p.region,category:p.category,entry:p.entry});break;case i.CITY:r.items.push({title:p.city,category:p.category,entry:p.entry});break;case i.ZIP:r.items.push({title:p.city?p.city+', '+p.zipcode:p.zipcode,category:p.category,entry:p.entry});break;}});return Object.keys(o).map(function(p){return o[p];});}e.exports=l;},null);
__d("AdsLocationValidationDialog.react",["React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogButton.react","LayerAutoFocus","LayerFadeOnHide","LayerHideOnEscape","fbt","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=g.PropTypes;function s(u){return u.split(',')[0];}var t=g.createClass({displayName:"AdsLocationValidationDialog",propTypes:{entriesRadius:r.object.isRequired,exclusionEntries:r.object.isRequired,updateRadius:r.func.isRequired,updateExclusion:r.func.isRequired,addEntry:r.func.isRequired,removeEntry:r.func.isRequired,currentEntries:r.array},mixins:[h],getInitialState:function(){return {dialogShown:false,invalidEntries:[]};},show:function(event){this.setState({dialogShown:true});},_onToggle:function(u){if(u!==this.state.dialogShown)setTimeout(this.setState.bind(this,{dialogShown:u},null),0);},renderLayers:function(){var u=this.state.newEntry,v=this.state.invalidEntries,w;if(v.length===1){var x=v[0];if(x.exclusionEntries&&x.exclusionEntries.length>0){var y=v[0].exclusionEntries.map(function(da){return s(da.getTitle());});w=g.createElement("span",{className:"_5dj8"},p._("{location} Excluding {excluded locations}",[p.param("location",s(x.getTitle())),p.param("excluded locations",y.join(', '))]));}else w=g.createElement("span",{className:"_5dj8"},s(x.getTitle()));}else if(v.length>1){var z=v.map(function(da){return s(da.getTitle());});w=g.createElement("span",{className:"_5dj8"},z.join(', '));}else return {};var aa=this.state.errorDescription?g.createElement("span",null," ",this.state.errorDescription," "):'',ba=u?s(u.getTitle()):'',ca=p._("Your audience location is currently set to {old location}. Do you want to change it to {new location}?",[p.param("old location",w),p.param("new location",g.createElement("span",{className:"_5dj8"},ba))]);return {dialog:g.createElement(i,{shown:this.state.dialogShown,behaviors:{LayerAutoFocus:m,LayerFadeOnHide:n,LayerHideOnEscape:o},onToggle:this._onToggle,width:445},g.createElement(j,null,g.createElement("div",null,aa,ca)),g.createElement(k,null,g.createElement(l,{label:"Cancel",use:"default",action:"cancel"}),g.createElement(l,{label:"Okay",use:"confirm",action:"cancel",ref:"confirmButton",className:"autofocus",onClick:this._onConfirmClick})))};},render:function(){return (g.createElement("div",null));},componentDidUpdate:function(){h.componentDidUpdate.call(this);this.refs&&this.refs.confirmButton&&this.refs.confirmButton.getDOMNode().focus();},_onConfirmClick:function(){var u=this.props.currentEntries?this.props.currentEntries.slice():[],v={},w=this.props.entriesRadius,x=this.props.exclusionEntries;u.push(this.state.newEntry);w[this.state.newEntry.getUniqueID()]=0;x[this.state.newEntry.getUniqueID()]=[];this.state.invalidEntries.map(function(y){v[y.getUniqueID()]=true;});u.forEach(function(y){if(v[y.getUniqueID()])this.props.removeEntry(y);},this);this.props.updateRadius(w);this.props.updateExclusion(x);this.props.addEntry(this.state.newEntry);},setInfo:function(u,v,w){this.setState({newEntry:u,invalidEntries:v,errorDescription:w});}});e.exports=t;},null);
__d("AdsPlacementSpecShape",["AdsBulkValueUtils","AdsPlacementSchema"],function(a,b,c,d,e,f,g,h){'use strict';var i=g.schemaToShape(h);e.exports=i;},null);
__d("AdsInterestsDeleteDialog.react",["AsyncRequest","LayerAutoFocus","LayerFadeOnHide","LayerHideOnEscape","React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIDialogButton.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=k.PropTypes,s=400,t='/intern/ajax/ads/interest_taxonomy/delete',u=k.createClass({displayName:"AdsInterestsEditDialog",propTypes:{data:r.object.isRequired,refreshBrowseData:r.func},mixins:[l],getInitialState:function(){return {dialogShown:false};},show:function(event){this.setState({dialogShown:true});},_onToggle:function(v){setTimeout(this.setState.bind(this,{dialogShown:v},null),0);},renderLayers:function(){return {dialog:k.createElement(m,{shown:this.state.dialogShown,behaviors:{LayerFadeOnHide:i,LayerAutoFocus:h,LayerHideOnEscape:j},onToggle:this._onToggle,width:s},k.createElement(p,null,k.createElement("div",null,"Delete Interest")),k.createElement(n,null,"Are you sure you want to delete",' ',k.createElement("strong",null,this.props.data.name)," ?"),k.createElement(o,null,k.createElement(q,{label:"Cancel",action:"cancel"}),k.createElement(q,{label:"Delete",use:"confirm",action:"button",disabled:this.state.confirmDisabled,onClick:this._onConfirmClick})))};},render:function(){return (k.createElement("div",null));},_onConfirmClick:function(){this.setState({confirmDisabled:true});new g().setURI(t).setData({fbid:this.props.data.id}).setHandler((function(v){this.setState({dialogShown:false});this.props.refreshBrowseData();}).bind(this)).send();}});e.exports=u;},null);
__d("AdsInterestsEditDialog.react",["AsyncRequest","LayerAutoFocus","LayerFadeOnHide","LayerHideOnEscape","React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIDialogButton.react","XUITextInput.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=k.PropTypes,u=400,v='/intern/ajax/ads/interest_taxonomy/add',w='/intern/ajax/ads/interest_taxonomy/edit',x=k.createClass({displayName:"AdsInterestsEditDialog",propTypes:{allowAdvancedEditing:t.bool,data:t.object.isRequired,locale:t.string,type:t.string},mixins:[l],getInitialState:function(){return {dialogShown:false};},show:function(event){this.setState({dialogShown:true});},_onToggle:function(y){setTimeout(this.setState.bind(this,{dialogShown:y},null),0);},renderLayers:function(){var y=this.props.data,z,aa,ba,ca,da,ea;if(this.props.type==='Add'){z=k.createElement("span",null,"Add New Interest");aa=y.name;}else if(this.props.type==='Edit'){var fa=y.path||[];z=k.createElement("span",null,"Edit \"",y.name,"\"");aa=fa.slice().pop();ba=y.id;ca=y.name;da=y.description;ea=JSON.stringify(y.keywords);}var ga=((!this.props.allowAdvancedEditing?"hidden_elem":''));return {dialog:k.createElement(m,{shown:this.state.dialogShown,behaviors:{LayerFadeOnHide:i,LayerAutoFocus:h,LayerHideOnEscape:j},onToggle:this._onToggle,width:u},k.createElement(p,null,z),k.createElement(n,null,k.createElement("table",{className:"_5qrl"},k.createElement("tr",{className:ga},k.createElement("td",null,k.createElement("label",null,"Parent Name")),k.createElement("td",null,k.createElement(r,{ref:"parentName",defaultValue:aa}))),k.createElement("tr",{className:ga},k.createElement("td",null,k.createElement("label",null,"Internal FBID")),k.createElement("td",null,k.createElement(r,{ref:"internalID",defaultValue:ba}))),k.createElement("tr",null,k.createElement("td",null,k.createElement("label",null,"Display Name")),k.createElement("td",null,k.createElement(r,{ref:"displayName",defaultValue:ca}))),k.createElement("tr",null,k.createElement("td",null,k.createElement("label",null,"Description")),k.createElement("td",null,k.createElement(r,{ref:"description",defaultValue:da}))),k.createElement("tr",{className:ga},k.createElement("td",null,k.createElement("label",null,"Internal Keywords")),k.createElement("td",null,k.createElement(r,{ref:"internalKeywords",defaultValue:ea}))))),k.createElement(o,null,k.createElement(q,{label:"Cancel",action:"cancel"}),k.createElement(q,{label:"Submit",use:"confirm",action:"button",disabled:this.props.confirmDisabled,onClick:this._onConfirmClick})))};},render:function(){return (k.createElement("div",null));},_onConfirmClick:function(){this.setState({confirmDisabled:true});var y={fbid:this.props.data.id,parentName:this.refs.parentName.getDOMNode().childNodes[0].value,internalID:this.refs.internalID.getDOMNode().childNodes[0].value,displayName:this.refs.displayName.getDOMNode().childNodes[0].value,description:this.refs.description.getDOMNode().childNodes[0].value,internalKeywords:this.refs.internalKeywords.getDOMNode().childNodes[0].value,locale:this.props.locale},z;if(this.props.type==='Add'){z=v;}else if(this.props.type==='Edit')z=w;new g().setURI(z).setData(y).setHandler((function(aa){this.setState({dialogShown:false});this.props.refreshBrowseData();}).bind(this)).send();}});e.exports=x;},null);
__d("AdsInterestsEditButtons.react",["AdsInterestsDeleteDialog.react","AdsInterestsEditDialog.react","React","XUIDialogButton.react","adsGKCheck"],function(a,b,c,d,e,f,g,h,i,j,k){var l=i.PropTypes,m=k('ads_interests_taxonomy_tool_advanced'),n=i.createClass({displayName:"AdsInterestsEditButtons",propTypes:{data:l.object.isRequired,dataSource:l.object,refreshBrowseData:l.func},render:function(){var o=null,p=null;if(m){o=i.createElement(j,{label:"Add",onClick:this._onAddClick});if(!this.props.data.children)p=i.createElement(j,{label:"Delete",onClick:this._onDeleteClick});}return (i.createElement("div",null,o,i.createElement(j,{label:"Edit",onClick:this._onEditClick}),p,i.createElement("div",{ref:"dialogPlaceholder"})));},_onAddClick:function(){this._renderDialog('Add');},_onEditClick:function(){this._renderDialog('Edit');},_onDeleteClick:function(){this._renderDialog('Delete');},_renderDialog:function(o){i.unmountComponentAtNode(this.refs.dialogPlaceholder.getDOMNode());var p=this.props.dataSource.getDao(),q;if(p&&p.getRequestData&&p.getRequestData())q=p.getRequestData().locale;var r;if(o==='Delete'){r=new g({data:this.props.data,refreshBrowseData:this.props.refreshBrowseData,type:o});}else r=new h({allowAdvancedEditing:m,data:this.props.data,locale:q,refreshBrowseData:this.props.refreshBrowseData,type:o});r=i.render(r,this.refs.dialogPlaceholder.getDOMNode());r.show();}});e.exports=n;},null);
__d("AdsSBTokenizerExpandableListOld.react",["AdsSBAreaClicked","AdsSBTokenizerConstants","AdsInterestsEditButtons.react","AdsSBTokenizerPlusIcon.react","AdsSBTokenizerWhiteBox.react","ContextualLayer.react","ScrollableArea.react","React","ReactLayeredComponentMixin","AdsCFLoggerInternal","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=n.PropTypes,t=23,u=15,v=32,w=h.TYPEAHEAD.HEIGHT,x=h.WHITE_BOX.WIDTH,y,z,aa=n.createClass({displayName:"AdsSBTokenizerExpandableListOld",mixins:[o],propTypes:{allowEdit:s.bool,data:s.array,dataSource:s.object.isRequired,className:s.string,onAddEntryAttempt:s.func,onRemoveEntryAttempt:s.func,openToPath:s.func,hidden:s.bool,selectedEntryIDs:s.object,uniqueID:s.string.isRequired,width:s.number.isRequired,showWhiteBox:s.bool,rowHeight:s.number,reportedInterests:s.object,addReportedInterest:s.func,deleteReportedInterest:s.func},getDefaultProps:function(){return {rowHeight:v,showWhiteBox:true};},getInitialState:function(){return {data:this.props.data||[]};},dataRetrieved:function(ca){if(!this.isMounted())return;this.setState({data:(ca||[])});},componentDidMount:function(){this._retrieveData();},componentWillReceiveProps:function(ca){if(ca.data&&ca.data!==this.state.data)this.setState({data:ca.data});},componentDidUpdate:function(){if(y&&y>=this.props.rowHeight){y=y-this.props.rowHeight;this.refs&&this.refs.scrollArea&&this.refs.scrollArea.getArea().setScrollTop(y);z=this.props.openPath;y=0;}},_retrieveData:function(){this.props.dataSource.resetTreeData&&this.props.dataSource.resetTreeData();this.props.dataSource.getTreeData(this.dataRetrieved);},render:function(){return n.createElement("div",{ref:"root"});},renderLayers:function(){if(this.props.hidden)return {};if(this.props.openPath&&this.props.openPath!=z){y=0;this._openToPath(this.props.openPath,this.state.data);}var ca={level:0},da=this.state.data.map(this._renderRow.bind(this,ca),this),ea=r((("_6oz")+(' '+"clearfix")),this.props.className),fa={width:this.props.width},ga={width:this.props.width,maxHeight:w},ha;if(this._shouldShowWhiteBox(this.state.highlightedRow)){ha=n.createElement("div",{className:"_6o-"},n.createElement(k,n.__spread({},this.props,{info:this.state.highlightedRow,type:h.ACTIVE_STATES.BROWSE})));ga.width=this.props.width+x;}var ia=n.createElement("div",{className:ea,onMouseDown:this._onMouseDown,onMouseLeave:this._onUnhighlight,style:ga},n.createElement("div",{className:"_6p4",style:fa,"data-testid":this.props.uniqueID+'_browse_list'},n.createElement(m,{ref:"scrollArea",width:this.props.width},n.createElement("ul",{className:"_6p5",style:{width:this.props.width-1}},da)),ha));return {content:n.createElement(l,{alignment:"left",contextRef:"root",position:"below",shown:!this.props.hidden},ia)};},_openToPath:function(ca,da,ea){ea=ea?ea:0;var fa=ea<ca.length?ca[ea]:null;for(var ga=0;ga<da.length;ga++){var ha=da[ga];if(fa==ha.name){ha.listOpened=true;y+=(this.props.rowHeight+1)*(ga+1);if(ha.children)this._openToPath(ca,ha.children,ea+1);}else ha.listOpened=false;}},_renderRow:function(ca,da,ea){if(!da||da.length===0)return;if(da instanceof Array&&da.length)da=da[0];if(da.invalid)return;var fa,ga=ca.level,ha=ca.rowColor?ca.rowColor:ga===0&&ea%2===0,ia=da.children,ja=this.props.selectedEntryIDs||{},ka={level:ga+1,rowColor:ha,markAllAsSelected:da.uniqueID in ja||ca.markAllAsSelected};if(ia&&da.listOpened)fa=ia.map(this._renderRow.bind(this,ka),this);var la=da.uniqueID in ja||da.id in ja||ca.markAllAsSelected,ma=n.createElement(ba,{allowEdit:this.props.allowEdit,data:da,level:ca.level,toggleExpand:this._toggleExpand,index:ea,onHighlight:this._onHighlight,onUnhighlight:this._onUnhighlight,rowColor:ha,highlighted:this.state.highlightedRow===da,noBorder:ga===0&&!da.listOpened,rowDisabled:la,addEntry:this._addEntry,removeEntry:this._removeEntry,openToPath:this.props.openToPath,refreshBrowseData:this._retrieveData,dataSource:this.props.dataSource,showWhiteBox:this._shouldShowWhiteBox(da),rowHeight:this.props.rowHeight,uniqueID:this.props.uniqueID}),na=n.createElement("ul",{className:"_6p6"},fa);return [ma,na];},resetList:function(){if(this.state.data&&this.state.data.length)this.state.data.forEach(this._closeChildren);},_closeChildren:function(ca){if(!ca)return;ca.listOpened=false;if(ca.children)ca.children.forEach(function(da){this._closeChildren(da);},this);},_toggleExpand:function(ca){if(!ca)return;if(ca.children)if(ca.listOpened){ca.listOpened=false;this.props.openToPath&&this.props.openToPath();}else{var da=ca.path?ca.path.slice():[];da.push(ca.name);this.props.openToPath&&this.props.openToPath(da);}},_addEntry:function(ca){if(!ca)return;var da=this.props.dataSource.dataToEntry(ca);p.log(p.CATEGORIES.NO_DB_OP,this.props.uniqueID+'_select_from_browse',{fbid:da.getUniqueID(),name:da.getTitle()});this.props.onAddEntryAttempt&&this.props.onAddEntryAttempt(da);},_removeEntry:function(ca){if(!ca)return;var da=this.props.dataSource.dataToEntry(ca);this.props.onRemoveEntryAttempt&&this.props.onRemoveEntryAttempt(da);},_onHighlight:function(ca){this.setState({highlightedRow:ca});},_onUnhighlight:function(){this.setState({highlightedRow:null});},_shouldShowWhiteBox:function(ca){return !!(this.props.showWhiteBox&&ca&&(ca.description||ca.source||ca.reach));}}),ba=n.createClass({displayName:"ExpandableRowView",propTypes:{allowEdit:s.bool,data:s.object.isRequired,rowColor:s.bool,noBorder:s.bool,onUnhighlight:s.func,addEntry:s.func,refreshBrowseData:s.func,removeEntry:s.func,openToPath:s.func,dataSource:s.object,showWhiteBox:s.bool,rowHeight:s.number,uniqueID:s.string},componentDidMount:function(){if(this.props.dataSource.treedata&&this.props.dataSource.treedata.length==1&&this.props.toggleExpand)this.props.toggleExpand(this.props.data);},getInitialState:function(){return {plusIconHovered:this.props.highlighted&&!this._hasChildren()};},render:function(){var ca=this._hasChildren(),da=(("_6p8")+(' '+"clearfix")+(this.props.highlighted?' '+"_6p9":'')+(this.props.rowDisabled?' '+"_6pa":'')+(ca?' '+"_6pb":'')),ea={height:this.props.rowHeight,lineHeight:(this.props.rowHeight-1)+'px'},fa={height:this.props.rowHeight-1},ga=(("_6pc")+(ca?' '+"_6pd":'')),ha={width:t+this.props.level*u,height:this.props.rowHeight},ia;if(ca)ia=(("_6pe")+(this.props.data.listOpened?' '+"_6pf":'')+(!this.props.data.listOpened?' '+"_6pg":'')+(' '+"_6pq"));var ja;if(this.props.data.numLeafCategories)ja=n.createElement("span",{className:"_6pr"},this.props.data.numLeafCategories);var ka;if(this.props.allowEdit&&this.props.highlighted)ka=n.createElement("div",{className:"_5m4n"},n.createElement(i,{data:this.props.data,dataSource:this.props.dataSource,refreshBrowseData:this.props.refreshBrowseData}));var la=this.props.data;return (n.createElement("li",{className:da},n.createElement("div",{className:ga,onMouseDown:this._onArrowMouseDown,onMouseEnter:this._onListMouseLeave,style:ha,"data-testid":this.props.uniqueID+'_browse_arrow'},n.createElement("div",{className:ia})),n.createElement("div",{style:ea,className:"_6ps","data-testid":this.props.uniqueID+'_browse_row'},n.createElement("div",{className:"_6pt",onMouseDown:this._onListMouseDown,onMouseEnter:this._onListMouseEnter,style:fa},n.createElement("div",{className:"_6p_"},this.props.data.name),ja,ka,this.prop),la.unselectable?n.createElement("span",null):n.createElement(j,{hidden:this.props.rowDisabled,hovered:this.state.plusIconHovered||(this.props.highlighted&&!ca),onMouseEnter:this._onPlusIconMouseEnter,onMouseLeave:this._onPlusIconMouseLeave,onMouseDown:this._onPlusIconMouseDown})),n.createElement("div",{className:"_6q1",style:{height:this.props.rowHeight}}),n.createElement("div",{className:((this.props.showWhiteBox?"_5oe8":''))})));},_hasChildren:function(){var ca=this.props.data.children||[];return ca.length>0;},_onArrowMouseDown:function(){this._onMouseDown();this.props.toggleExpand&&this.props.toggleExpand(this.props.data);},_onListMouseDown:function(){this._onMouseDown();if(this.props.data.unselectable||this._hasChildren()){this.props.toggleExpand&&this.props.toggleExpand(this.props.data);}else if(this.props.rowDisabled){this.props.removeEntry&&this.props.removeEntry(this.props.data);}else this.props.addEntry&&this.props.addEntry(this.props.data);},_onListMouseEnter:function(){this.props.onHighlight&&this.props.onHighlight(this.props.data);},_onListMouseLeave:function(){this.props.onUnhighlight&&this.props.onUnhighlight();},_onPlusIconMouseDown:function(){if(this.props.rowDisabled){this.props.removeEntry&&this.props.removeEntry(this.props.data);}else this.props.addEntry&&this.props.addEntry(this.props.data);},_onPlusIconMouseEnter:function(){this._hasChildren()&&this.setState({plusIconHovered:true});},_onPlusIconMouseLeave:function(){this._hasChildren()&&this.setState({plusIconHovered:false});},_onMouseDown:function(){g.setAreaClicked(this.props.uniqueID,true);}});e.exports=aa;},null);
__d("AdsSBTokenizerModeButtons.react",["React","cx","fbt"],function(a,b,c,d,e,f,g,h,i){var j=g.PropTypes,k=g.createClass({displayName:"AdsSBTokenizerModeButtons",propTypes:{onSuggestionsButtonMouseDown:j.func,onBrowseButtonMouseDown:j.func,suggestionButtonEnabled:j.bool,uniqueID:j.string.isRequired},render:function(){var l=(("_4-97")+(' '+"_xke")+(!this.props.suggestionButtonEnabled?' '+"_xkf":'')),m=[];if(this.props.onSuggestionsButtonMouseDown)m.push(g.createElement("div",{onMouseDown:this._onSuggestionButtonMouseDown,key:"suggestions",className:l,"data-testid":this.props.uniqueID+'_suggestions_button'},"Suggestions",g.createElement("div",{className:"_ekn _xkm"})));if(this.props.onBrowseButtonMouseDown)m.push(g.createElement("div",{onMouseDown:this.props.onBrowseButtonMouseDown,key:"browse",className:"_4-97 _xkk","data-testid":this.props.uniqueID+'_browse_button'},"Browse",g.createElement("div",{className:"_ekn _xkl"})));return (g.createElement("div",{className:"_xkd"},m));},_onSuggestionButtonMouseDown:function(){if(!this.props.suggestionButtonEnabled)return;this.props.onSuggestionsButtonMouseDown();}});e.exports=k;},null);
__d("AdsInterestsSearchSource",["AbstractSearchSource","AdsCreateFlowQueryLimits","AdsSearchBrowseUtils","AdInterfacesUiLogger","CurrentLocale","SearchableEntry"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m;for(var n in g)if(g.hasOwnProperty(n))p[n]=g[n];var o=g===null?null:g.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=g;function p(q,r){"use strict";if(m){return m;}else{this.dao=q;this.options=r||{};return this;}}p.prototype.searchImpl=function(q,r,s){"use strict";if(!q){r([],q);return;}j.log('unified_interest_typeahead_characters_entered',{characters_entered:q});this.dao.fetch.adInterest.one((function(t){var u=[],v=t.data||t,w=q.toLowerCase(),x=v.map(function(da){return {fbid:da.id,name:da.name};});j.log('unified_interest_typeahead_unicorn_results_returned',{characters_entered:q,results:x});for(var y=0;y<v.length;y++){var z=v[y],aa=z.id,ba=z.name,ca=new l({uniqueID:aa,title:ba});ca.name=z.name;ca.reach=z.audience_size;ca.matchArray=i.getMatchedIndexArray(w,ba.toLowerCase());ca.path=z.path;if(z.path&&z.path.length){ca.path=z.path.slice();ca.path.pop();ca.isInHierarchy=true;}ca.description=z.description;ca.topic=z.topic;u.push(ca);if(u.length>h.TYPEAHEAD_LIMIT)break;}r(u,q);}).bind(this),{q:q,locale:k.get(),whitelisted_only:this.options.whitelistedInterestsOnly});};p.getInstance=function(q,r){if(!m)m=new p(q,r);return m;};e.exports=p;},null);
__d("AdsSBTokenizerSuggestions.react",["AdsSBAreaClicked","AdsSBTokenizerConstants","AdsSBTokenizerPlusIcon.react","AdsSBTokenizerWhiteBox.react","Animation","ContextualLayer.react","ScrollableArea.react","React","ReactLayeredComponentMixin","Style","AdsCFLoggerInternal","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=n.PropTypes,v=100,w=30,x=h.TYPEAHEAD.HEIGHT,y=h.WHITE_BOX.WIDTH,z=n.createClass({displayName:"AdsSBTokenizerSuggestions",mixins:[o],propTypes:{dao:u.object.isRequired,hidden:u.bool,entries:u.array,onAddEntryAttempt:u.func,selectedEntryIDs:u.object,width:u.number.isRequired,openToPath:u.func,suggestionsDataSource:u.object,uniqueID:u.string.isRequired,reportedInterests:u.object,addReportedInterests:u.func,deleteReportedInterests:u.func},getInitialState:function(){return {suggestions:[],highlightedEntry:null};},refreshSuggestions:function(ba,ca){ca=ca||[];var da=ca.map(function(ea){return ea.getTitle();});if(this.props.suggestionsDataSource){this.props.suggestionsDataSource.getSuggestions(da,this.onDataFetched.bind(this,ba));this.setState({loading:true});}},onDataFetched:function(ba,ca){var da=ca||[];if(ba){da=this.state.suggestions.slice(0);var ea={};da.forEach(function(fa){ea[fa.getUniqueID()]=true;});ca.forEach(function(fa){if(!(fa.getUniqueID() in ea)){da.push(fa);ea[fa.getUniqueID()]=true;}});}if(da.length>w)da=da.slice(0,w);this.setState({suggestions:da,loading:false});},render:function(){return n.createElement("div",{ref:"root"});},renderLayers:function(){var ba=this.state.suggestions.map(this._getSuggestionRow),ca=(("_50me")+(this.props.hidden?' '+"hidden_elem":'')),da=this.state.highlightedEntry?this.props.width+y:this.props.width,ea;if(this.state.highlightedEntry)ea=n.createElement("div",{className:"_50mf"},n.createElement(j,{info:this.state.highlightedEntry,openToPath:this.props.openToPath?this.props.openToPath:s,type:h.ACTIVE_STATES.SUGGESTIONS,uniqueID:this.props.uniqueID,reportedInterests:this.props.reportedInterests,addReportedInterest:this.props.addReportedInterest,deleteReportedInterest:this.props.deleteReportedInterest}));if(ba.length===0&&!this.state.loading)ba=n.createElement("li",{className:"_50m9"},"No suggestions available. Please enter more interests to get suggestions.");var fa=n.createElement("div",{onMouseLeave:this._onMouseLeave,onMouseDown:this._onMouseDown,className:ca,style:{width:da}},n.createElement("div",{className:"_50ma",style:{width:this.props.width},"data-testid":this.props.uniqueID+'_suggestions_list'},n.createElement(m,{width:"auto",height:x},n.createElement("ul",{style:{minHeight:x},className:"_50mb"},ba)),ea));return {content:n.createElement(l,{alignment:"left",contextRef:"root",position:"below",shown:!this.props.hidden},fa)};},_getSuggestionRow:function(ba){var ca=this.props.selectedEntryIDs||{};return (n.createElement(aa,{entry:ba,onMouseEnter:this._onMouseEnterRow,onMouseLeave:this._onMouseLeave,highlighted:this.state.highlightedEntry===ba,onSelect:this._onEntrySelect,hidden:ba.getUniqueID() in ca}));},_onMouseEnterRow:function(ba){this.setState({highlightedEntry:ba});},_onEntrySelect:function(ba){q.log(q.CATEGORIES.NO_DB_OP,this.props.uniqueID+'_select_from_suggestions',{fbid:ba.getUniqueID(),interest_name:ba.getTitle()});this.props.onAddEntryAttempt&&this.props.onAddEntryAttempt(ba);},_onMouseLeave:function(){this.setState({highlightedEntry:null});},_onMouseDown:function(){g.setAreaClicked(this.props.uniqueID,true);}}),aa=n.createClass({displayName:"AdsSBTokenizerSuggestionsRow",propTypes:{entry:u.object,onMouseEnter:u.func,highlighted:u.bool,onSelect:u.func,hidden:u.bool,onMouseLeave:u.func},componentDidUpdate:function(){p.set(this.getDOMNode(),'opacity','');p.set(this.getDOMNode(),'height','');},render:function(){var ba=this.props.entry,ca=(("_50mc")+(this.props.highlighted?' '+"_50md":'')+(this.props.hidden?' '+"hidden_elem":'')+(' '+"clearfix"));return (n.createElement("li",{onMouseEnter:this._onMouseEnter,onClick:this._onClick,className:ca,"data-testid":this.props.uniqueID+'_suggestions_row'},n.createElement("div",{className:"_50m8"},ba.getTitle()),n.createElement(i,{hovered:this.props.highlighted}),n.createElement("div",{className:"_5oe8"})));},_onMouseEnter:function(){this.props.onMouseEnter&&this.props.onMouseEnter(this.props.entry);},_onClick:function(){new k(this.getDOMNode()).to('opacity',0).to('height',0).blind().duration(v).ondone((function(ba){this.props.onSelect&&this.props.onSelect(this.props.entry,ba);}).bind(this)).go();}});e.exports=z;},null);
__d("AdsSBTokenizerValidationDialog.react",["AdsSBAreaClicked","LayerAutoFocus","LayerFadeOnHide","LayerHideOnEscape","React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogButton.react","cx","fbt","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=k.PropTypes,u=k.createClass({displayName:"AdsSBTokenizerValidationDialog",propTypes:{setEntries:t.func,uniqueID:t.string.isRequired},mixins:[l],getInitialState:function(){return {dialogShown:false,invalidEntries:[],newEntries:[],currentEntries:[]};},componentWillMount:function(){this._onToggleThrottled=s(function(v){if(this.isMounted())this.setState({dialogShown:v});}.bind(this),500);},show:function(event){this._onToggle(true);},_onToggle:function(v){this._onToggleThrottled&&this._onToggleThrottled(v);},renderLayers:function(){var v=this.state.newEntries,w=this.state.invalidEntries,x=v.map(function(ba){return ba.getTitle();}).join(', '),y=w.map(function(ba){return ba.getTitle();}).join(', '),z=this._getAudienceBroadened(v,w),aa=this._getDialogText(x,y,z);return {dialog:k.createElement(m,{shown:this.state.dialogShown,behaviors:{LayerAutoFocus:h,LayerFadeOnHide:i,LayerHideOnEscape:j},onToggle:this._onToggle,width:445},k.createElement(n,null,k.createElement("div",null,aa)),k.createElement(o,null,k.createElement(p,{label:"Cancel",action:"cancel",onMouseDown:this._onActionMouseDown}),k.createElement(p,{label:"Okay",use:"confirm",action:"cancel",ref:"confirmButton",className:"autofocus",onMouseDown:this._onActionMouseDown,onClick:this._onConfirm})))};},render:function(){return (k.createElement("div",null));},componentDidUpdate:function(){l.componentDidUpdate.call(this);this.refs&&this.refs.confirmButton.getDOMNode().focus();},_onConfirm:function(){this._onActionMouseDown();this.setValidatedEntries({newEntries:this.state.newEntries,currentEntries:this.state.currentEntries,invalidEntries:this.state.invalidEntries});},setValidatedEntries:function(v){var w={},x=[];v.currentEntries.forEach(function(z){w[z.getUniqueID()]=z;});v.newEntries.forEach(function(z){w[z.getUniqueID()]=z;});v.invalidEntries.forEach(function(z){w[z.getUniqueID()]=null;});for(var y in w)if(w[y])x.push(w[y]);this.props.setEntries&&this.props.setEntries(x);},_onActionMouseDown:function(){g.setAreaClicked(this.props.uniqueID,true);this._onToggle(false);},_getDialogText:function(v,w,x){var y;if(x){y=r._("Your ad is currently targeted to {invalid entry}. Do you want to broaden your audience to {new entry}?",[r.param("invalid entry",k.createElement("span",{className:"_3bhc"},w)),r.param("new entry",k.createElement("span",{className:"_3bhc"},v))]);}else y=r._("Your ad is currently targeted to {invalid entry}. Do you want to narrow your audience to {new entry}?",[r.param("invalid entry",k.createElement("span",{className:"_3bhc"},w)),r.param("new entry",k.createElement("span",{className:"_3bhc"},v))]);return y;},_getAudienceBroadened:function(v,w){var x=0;v.forEach(function(z){x+=z.reach||0;});var y=0;w.forEach(function(z){y+=z.reach||0;});return x>y;},setInfo:function(v){this.setState({newEntries:v.newEntries,invalidEntries:v.invalidEntries,currentEntries:v.currentEntries});}});e.exports=u;},null);
__d("AdsPreferencesConstants",[],function(a,b,c,d,e,f){var g={CATEGORY_FILTERS:{NONE:"none",PAGE_LIKES:"page_likes",APP_INSTALLS:"app_installs",AD_CLICKS:"add_clicks",USER_ADDED:"user_added",BEHAVIORS:"behaviors",DEMOGRAPHICS:"demographics"}};e.exports=g;},null);
__d("AdsSearchBrowseTokenizerList.react",["AdsSBAreaClicked","AdsSBTokenizerConstants","AdsSBTokenizerWhiteBoxLayer.react","AdsSearchBrowseUtils","Animation","CSS","React","Style","XUICloseButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=m.PropTypes,s="Additional Interests",t=1000,u=-37,v=m.createClass({displayName:"AdsSearchBrowseTokenizerList",propTypes:{entries:r.array,newEntriesSet:r.object,isFlat:r.bool,uniqueID:r.string,defaultPath:r.string,reportedInterests:r.object,addReportedInterest:r.func,deleteReportedInterest:r.func},getDefaultProps:function(){return {uniqueID:j.makeID(),defaultPath:s};},render:function(){var y=this._dedupEntries(this.props.entries);if(y.length===0)return m.createElement("div",null);var z=this.props.isFlat?this._getFlatList(y):this._getListGroups(y);return (m.createElement("div",{className:"_5w21"},z));},_dedupEntries:function(y){if(!y)return [];var z={},aa=[];y.forEach(function(ba){var ca=ba.getUniqueID();if(!(ca in z)){z[ca]=true;aa.push(ba);}});return aa;},_getFlatList:function(y){var z=y.map(function(aa){return (m.createElement(x,m.__spread({},this.props,{key:aa.getUniqueID(),entry:aa})));},this);return (m.createElement("ul",{className:"_5w2a"},z));},_getListGroups:function(y){var z=this._getGroupedEntries(y),aa=[],ba=Object.keys(z).sort(function(ca,da){return ca.localeCompare(da);});ba.forEach(function(ca){aa.push(m.createElement(w,m.__spread({},this.props,{key:ca,title:ca,entryGroup:z[ca]})));}.bind(this));return aa;},_getGroupedEntries:function(y){var z={};y.forEach(function(aa){var ba=aa.path,ca;if(!ba||ba.length===0){if(aa.isInHierarchy){ca=aa.getTitle();}else ca=this.props.defaultPath;}else ca=ba.join(', ');if(ca in z){z[ca].push(aa);}else z[ca]=[aa];},this);return z;}}),w=m.createClass({displayName:"AdsSearchBrowseTokenizerListGroup",propTypes:{title:r.string,entryGroup:r.array,onMultiRemoveEntries:r.func,newEntriesSet:r.object,renderDefaultPath:r.bool},getDefaultProps:function(){return {renderDefaultPath:true};},getInitialState:function(){return {active:false};},render:function(){var y=this.props.entryGroup.sort(function(da,ea){return da.getTitle().localeCompare(ea.getTitle());}),z=y.map(this._getListIitem),aa=(("_5w23")+(this.state.active?' '+"_5w27":'')),ba=this._getTitle();if(ba!==this.props.defaultPath||this.props.renderDefaultPath)var ca=m.createElement("li",{onMouseEnter:this._onHighlightTitle,onMouseLeave:this._onUnhighlightTitle,className:"_5w22"},ba,m.createElement(o,{size:"small",className:"_5w28",onClick:this._onRemoveGroup}));return (m.createElement("ul",{className:aa},ca,m.createElement("li",null,m.createElement("ul",null,z))));},_getTitle:function(){var y=this.props.title,z=this.props.entryGroup[0].path;if(z&&z.length)y=this._getPathBreadcrumbs(z);return y;},_getListIitem:function(y){var z=this.props.newEntriesSet||{},aa=this.props.showAnimation&&z[y.getUniqueID()]!==(void 0);return (m.createElement(x,m.__spread({},this.props,{key:y.getUniqueID(),entry:y,groupTitle:this.props.title,showAnimation:aa})));},_getPathBreadcrumbs:function(y){if(!y||y.length===0)return;var z=[];for(var aa=0;aa<y.length;aa++){if(aa!==0)z.push(m.createElement("span",{key:'breadcrumb_spacer_'+aa,className:"_2nop"},' ',">",' '));z.push(m.createElement("span",{key:'breadcrumb_'+aa,className:"_2noq",onMouseDown:this._breadcrumbSelected.bind(this,y.slice(0,aa+1))},y[aa]));}return z;},_breadcrumbSelected:function(y){g.setAreaClicked(this.props.uniqueID,true);this.setState({popoverDisabled:true});this.props.openToPath&&this.props.openToPath(y);},_onHighlightTitle:function(){this.setState({active:true});},_onUnhighlightTitle:function(){this.setState({active:false});},_onRemoveGroup:function(){this.props.onMultiRemoveEntries&&this.props.onMultiRemoveEntries(this.props.entryGroup);}}),x=m.createClass({displayName:"AdsSearchBrowseTokenizerListItem",propTypes:{entry:r.object.isRequired,onRemoveEntry:r.func,groupTitle:r.string,showAnimation:r.bool,showWhiteBox:r.bool},getInitialState:function(){return {highlighted:false};},componentWillUpdate:function(){if(this.props.showAnimation)this._previousEntry=this.props.entry;},componentDidUpdate:function(){this._showAnimation();},componentDidMount:function(){this._showAnimation();},render:function(){var y=(("_5w24")),z=this.props.entry.getTitle();if(z===this.props.groupTitle){z=m.createElement("div",{className:"_5w25"},q._("All {interest}",[q.param("interest",this.props.entry.getTitle())]));}else z=m.createElement("div",{className:"_5w25"},z);return (m.createElement(i,{info:this.props.entry,openToPath:this.props.openToPath,type:h.ACTIVE_STATES.BROWSE,shown:this.props.showWhiteBox&&this.state.highlighted,onMouseEnterBox:this._onMouseEnterBox,onMouseLeaveBox:this._onMouseLeaveBox,yOffset:u,uniqueID:this.props.uniqueID,reportedInterests:this.props.reportedInterests,addReportedInterest:this.props.addReportedInterest,deleteReportedInterest:this.props.deleteReportedInterest},m.createElement("li",{className:y,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},z,m.createElement(o,{size:"small",className:"_5w28",onClick:this._onRemoveEntry}))));},_showAnimation:function(){var y=this.props.showAnimation;if(this._previousEntry)y=y&&this.props.entry.getUniqueID()!==this._previousEntry.getUniqueID();if(y){var z=this.getDOMNode();n.set(z,'background','#fff9d7');l.addClass(z,"_5w29");new k(z).to('background','#fff').duration(t).ondone((function(){n.set(z,'background','');l.removeClass(z,"_5w29");}).bind(this)).go();}},_onRemoveEntry:function(){this.props.onRemoveEntry&&this.props.onRemoveEntry(this.props.entry);},_onMouseEnter:function(){this.setState({highlighted:true});},_onMouseLeave:function(){this.setState({highlighted:false});},_onMouseEnterBox:function(){this.setState({highlighted:true});},_onMouseLeaveBox:function(){this.setState({highlighted:false});}});e.exports=v;},null);
__d("XAdPreferencesReportControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/ads\/preferences\/report\/",{fbid:{type:"Int"},action:{type:"String",required:true},name:{type:"String"}});},null);
__d("AdsSearchBrowseInterests.react",["AdsInterestsBrowseDataSource","AdsSBTokenizerConstants","AdsSBTokenizerExpandableListOld.react","AdsSBTokenizerModeButtons.react","AdsInterestsSearchSource","AdsSBTokenizerSuggestions.react","AdsInterestsSuggestionsDataSource","AdsSBTypeahead.react","AdsSBTokenizerValidationDialog.react","AdsInterestsValidationDataSource","AdsPreferencesConstants","AdsSBAreaClicked","AdsSearchBrowseTokenizerList.react","AsyncRequest","React","AdsCFLoggerInternal","AdsSB2TypeaheadEntriesView.react","XAdPreferencesReportControllerURIBuilder","cx","fbt","getElementPosition","getUnboundedScrollPosition","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){var da=u.PropTypes,ea={ViewRenderer:w,useLayer:true};function fa(ka,la){return la.getUniqueID()===ka;}var ga=h.ACTIVE_STATES,ha=430,ia=h.TOKENIZER_TYPES.INTERESTS,ja=u.createClass({displayName:"AdsSearchBrowseInterests",propTypes:{className:da.string,dao:da.object,entries:da.array,hideArrow:da.bool,hideBrowseButton:da.bool,hideSuggestions:da.bool,hideTokenizerList:da.bool,hideValidationDialog:da.bool,listWidth:da.number,onChange:da.func,onUpdateInterests:da.func,onUpdateInterestsAdsPrefs:da.func,placeholder:da.string,showAnimation:da.bool,showWhiteBox:da.bool,interests:da.array,whitelistedInterestsOnly:da.bool},getDefaultProps:function(){return {showAnimation:true,showWhiteBox:true};},getInitialState:function(){return {entries:[],activeState:this._getDefaultActiveState(),newEntriesSet:{},reportedInterests:{}};},componentDidMount:function(){r.init();r.subscribe(ia,this._onClickOutsideComponent);this._updateFromInterests({},this.props);this._fetchReportedInterests();},componentDidUpdate:function(){if(!this._shouldShowSuggestions()&&this.state.activeState===ga.SUGGESTIONS)this._setActiveState(ga.BROWSE);if(this.state.activeState!==ga.BROWSE)this.refs.expandableList.resetList();},componentWillReceiveProps:function(ka){if(ka.entries){this.setState({entries:ka.entries});}else if(ka.interests)this._updateFromInterests(this.props,ka);},_updateFromInterests:function(ka,la){if(!la.interests)return;var ma=la.interests,na=ka.interests||[],oa=this._getInterestFBIDs(ma),pa=this._getInterestFBIDs(na),qa=oa.sort().slice().join(',');if(pa.sort().slice().join(',')===qa)return;this.setEntriesFromInterestsWithFBIDs(ma);},_fetchReportedInterests:function(){var ka=new x().setString('action','get').getURI();new t(ka).setHandler(function(la){var ma=la.payload.interests||{};this.setState({reportedInterests:ma});}.bind(this)).send();},_addReportedInterest:function(ka,la){var ma=new x().setString('name',la).setString('action','add').setInt('fbid',ka).getURI();new t(ma).send();var na=this.state.reportedInterests;na[ka]=ka;this.setState({reportedInterests:na});},_deleteReportedInterest:function(ka){var la=new x().setString('action','del').setInt('fbid',ka).getURI();new t(la).send();var ma=this.state.reportedInterests;delete ma[ka];this.setState({reportedInterests:ma});},_getSelectedEntryIDs:function(){var ka=this.state.entries||[],la={};ka.forEach(function(ma){la[ma.getUniqueID()]=true;});return la;},render:function(){var ka=k.getInstance(this.props.dao,{whitelistedInterestsOnly:this.props.whitelistedInterestsOnly}),la=g.getInstance(this.props.dao,{fetchInterestGroups:this.props.whitelistedInterestsOnly}),ma=p.getInstance(this.props.dao),na=m.getInstance(this.props.dao),oa=this.state.activeState!==ga.NONE;if(this.isMounted()&&!this._width)this._width=this.getDOMNode().offsetWidth;var pa=this._width||ha;ea.extraRendererProps={openToPath:this._openToPath,width:pa,uniqueID:ia,showWhiteBox:this.props.showWhiteBox,reportedInterests:this.state.reportedInterests,addReportedInterest:this._addReportedInterest,deleteReportedInterest:this._deleteReportedInterest};var qa=(("_19yt")+(oa?' '+"_5u07":'')+(' '+"uiContextualLayerParent")+(this.state.activeState===ga.BROWSE?' '+"_eko":'')+(this.state.activeState===ga.SUGGESTIONS?' '+"_ekm":'')+(this.state.activeState===ga.SEARCH?' '+"_ekp":''));qa=ca(qa,this.props.className);var ra=this.props.hideBrowseButton?null:u.createElement(j,{onSuggestionsButtonMouseDown:this._shouldHideSuggestions()?null:this._onSuggestionsButtonMouseDown,onBrowseButtonMouseDown:this._onBrowseButtonMouseDown,suggestionButtonEnabled:this._shouldShowSuggestions(),uniqueID:ia});return (u.createElement("div",null,u.createElement(o,{ref:"validationDialog",setEntries:this._onEntriesChange,uniqueID:ia}),u.createElement("div",{className:qa},this.props.hideTokenizerList?u.createElement("div",null):u.createElement(s,{entries:this.state.entries,onRemoveEntry:this._onRemoveEntryAttempt,openToPath:this._openToPath,onMultiRemoveEntries:this._onMultiRemoveEntries,newEntriesSet:this.state.newEntriesSet,reportedInterests:this.state.reportedInterests,addReportedInterest:this._addReportedInterest,deleteReportedInterest:this._deleteReportedInterest,showAnimation:this.props.showAnimation,showWhiteBox:this.props.showWhiteBox,uniqueID:ia}),u.createElement("div",{onMouseDown:this._onClickInsideComponent},u.createElement("div",{className:"_5g-g"},u.createElement(n,{excludedEntries:this._getSelectedEntryIDs(),onSelectAttempt:this._onSearchAddEntryAttempt,searchSource:ka,validationSource:ma,presenter:ea,onInputChange:this._onInputChange,onTypeaheadVisibilityChanged:this._onTypeaheadVisibilityChanged,onMultiAddEntries:this._onMultiAddEntries,onClick:this._showListComponent,ref:"typeahead",placeholder:this.props.placeholder?this.props.placeholder:"Search interests",size:this.props.size}),!this.props.hideArrow?u.createElement("div",{className:"_ekn _ekl"}):null,ra),u.createElement(i,{dataSource:la,onAddEntryAttempt:this._onAddEntryAttempt,onRemoveEntryAttempt:this._onRemoveEntryAttempt,openToPath:this._openToPath,hidden:this.state.activeState!==ga.BROWSE,hideWhiteBoxOnBlur:false,openPath:this.state.openPath,selectedEntryIDs:this._getSelectedEntryIDs(),reportedInterests:this.state.reportedInterests,addReportedInterest:this._addReportedInterest,deleteReportedInterest:this._deleteReportedInterest,width:pa,uniqueID:ia,showWhiteBox:this.props.showWhiteBox,ref:"expandableList"}),u.createElement(l,{dao:this.props.dao,entries:this.state.entries,onAddEntryAttempt:this._onAddEntryAttempt,openToPath:this._openToPath,hidden:this.state.activeState!==ga.SUGGESTIONS,selectedEntryIDs:this._getSelectedEntryIDs(),ref:"suggestionsComponent",width:pa,uniqueID:ia,reportedInterests:this.state.reportedInterests,addReportedInterest:this._addReportedInterest,deleteReportedInterest:this._deleteReportedInterest,suggestionsDataSource:na})))));},setEntriesFromInterests:function(ka){if(!ka||!ka.length)this._onEntriesChangeNoAPIUpdate([]);var la=p.getInstance(this.props.dao);la.getMetadata(ka,this._setEntriesFromInterestsCB,true);},_getInterestFBIDs:function(ka){return (ka||[]).filter(function(la){return la.type!==q.CATEGORY_FILTERS.DEMOGRAPHICS;}).map(function(la){return la.id;});},setEntriesFromInterestsWithFBIDsCallUpdate:function(ka){if(!ka||!ka.length)this._onEntriesChange([]);var la=this._getInterestFBIDs(ka),ma=p.getInstance(this.props.dao);ma.getMetadataFromFBID(la,this._setEntriesFromInterestsCBCallUpdate);},setEntriesFromInterestsWithFBIDs:function(ka){if(!ka||!ka.length)this._onEntriesChangeNoAPIUpdate([]);var la=this._getInterestFBIDs(ka),ma=p.getInstance(this.props.dao);ma.getMetadataFromFBID(la,this._setEntriesFromInterestsCB);},_setEntriesFromInterestsCB:function(ka){if(!this.isMounted())return;this._onEntriesChangeNoAPIUpdate(ka);this.refs.suggestionsComponent.refreshSuggestions(false,ka);},_setEntriesFromInterestsCBCallUpdate:function(ka){if(!this.isMounted())return;this._onEntriesChange(ka);this.refs.suggestionsComponent.refreshSuggestions(false,ka);},_setInterestsFromEntries:function(ka){var la=ka.map(function(ma){return {id:ma.getUniqueID(),name:ma.getTitle()};});this._setInterests(la);this.props.onUpdateInterests&&this.props.onUpdateInterests(la);if(this.props.onUpdateInterestsAdsPrefs)this.props.onUpdateInterestsAdsPrefs(ka.map(function(ma){return {id:ma.getUniqueID(),name:ma.getTitle(),topic:ma.topic};}));this.props.onChange&&this.props.onChange(ka);},_onSearchAddEntryAttempt:function(ka){v.log(v.CATEGORIES.NO_DB_OP,ia+'_select_from_typeahead',{fbid:ka.getUniqueID(),name:ka.getTitle()});this._onAddEntryAttempt(ka);if(!ka.numLeafCategories)this._setActiveState(this._getDefaultActiveState());},_onAddEntryAttempt:function(ka){this._validateAndAddEntries([ka]);},_onRemoveEntryAttempt:function(ka){var la=ka.getUniqueID(),ma=this.state.entries.slice();ma.some(function(na,oa){if(fa(la,na)){ma.splice(oa,1);this._onEntriesChange(ma);return true;}return false;}.bind(this));},_onMultiAddEntries:function(ka){this._validateAndAddEntries(ka);},_onMultiRemoveEntries:function(ka){var la=this.state.entries.slice(0);ka.forEach(function(ma){if(la.some(fa.bind(null,ma.getUniqueID())))la.splice(la.indexOf(ma),1);});this._onEntriesChange(la);},_validateAndAddEntries:function(ka){var la=this._getSelectedEntryIDs();ka=ka.filter(function(na){return !(na.getUniqueID() in la);});var ma=this._validateEntries(ka);if(ma.length){if(this.props.hideValidationDialog){this.refs.validationDialog.setValidatedEntries({newEntries:ka,currentEntries:this.state.entries,invalidEntries:ma});}else{this.refs.validationDialog.setInfo({newEntries:ka,currentEntries:this.state.entries,invalidEntries:ma});this.refs.validationDialog.show();}}else this._onEntriesChange(this.state.entries.concat(ka));},_validateEntries:function(ka){var la=this.state.entries.slice(),ma=la.concat(ka),na={},oa={};ma.forEach(function(ra){if(!ra.isInHierarchy)return;na[ra.getTitle()]=ra;});ma.forEach(function(ra){if(!ra.isInHierarchy)return;var sa=ra.path||[];for(var ta=0;ta<sa.length;ta++){var ua=na[sa[ta]];if(sa[ta] in na&&ua!==ra){oa[ra.getUniqueID()]=ra;oa[ua.getUniqueID()]=ua;}}});ka.forEach(function(ra){oa[ra.getUniqueID()]=null;});var pa=[];for(var qa in oa)if(oa[qa])pa.push(oa[qa]);return pa;},_openToPath:function(ka){this._logActiveStateChange(this.state.activeState,ga.BROWSE);this.setState({openPath:ka,activeState:ga.BROWSE});},_onEntriesChange:function(ka){var la={};this._setInterestsFromEntries(ka);this.refs.suggestionsComponent.refreshSuggestions(this.state.activeState===ga.SUGGESTIONS,ka);la.entries=ka;la.newEntriesSet=this._getNewEntries(this.state.entries,ka);this._logActiveStateChange(this.state.activeState,la.activeState);this.setState(la);},_onEntriesChangeNoAPIUpdate:function(ka){var la={};this.refs.suggestionsComponent.refreshSuggestions(this.state.activeState===ga.SUGGESTIONS,ka);la.entries=ka;la.newEntriesSet=this._getNewEntries(this.state.entries,ka);this._logActiveStateChange(this.state.activeState,la.activeState);this.setState(la);},_getNewEntries:function(ka,la){var ma={};la.forEach(function(na){ma[na.getUniqueID()]=na;});ka.forEach(function(na){ma[na.getUniqueID()]=(void 0);});return ma;},_onClickOutsideComponent:function(){this.refs.typeahead.clearTypeahead();this._setActiveState(this._getDefaultActiveState());},_onBrowseButtonMouseDown:function(){var ka=this.state.activeState===ga.BROWSE?this._getDefaultActiveState():ga.BROWSE;this.refs.typeahead.clearTypeahead();this._setActiveState(ka);},_onSuggestionsButtonMouseDown:function(){var ka=this.state.activeState===ga.SUGGESTIONS?this._getDefaultActiveState():ga.SUGGESTIONS;this.refs.typeahead.clearTypeahead();this._setActiveState(ka);},_onTypeaheadVisibilityChanged:function(ka){if(ka)this._setActiveState(ga.SEARCH);},_onClickInsideComponent:function(){r.setAreaClicked(ia,true);setTimeout((function(){this.refs.typeahead.focusTypeahead();}).bind(this),100);},_showListComponent:function(){if(this._shouldShowSuggestions()){this._setActiveState(ga.SUGGESTIONS);}else this._setActiveState(ga.BROWSE);},_shouldShowSuggestions:function(){return !this._shouldHideSuggestions()&&this.state.entries.length>0;},_shouldHideSuggestions:function(){return this.props.hideSuggestions;},_centerComponentOnPage:function(){var ka=this.refs.typeahead.getDOMNode(),la=aa(ka),ma=ba(window),na=document.documentElement.clientHeight,oa=la.y-(na/2)+ma.y;window.scrollTo(0,oa);},_setInterests:function(ka){this._interests=ka;},_setActiveState:function(ka){this._logActiveStateChange(this.state.activeState,ka);this.setState({activeState:ka});},_logActiveStateChange:function(ka,la){if(la===null||la===(void 0)||ka===la)return;v.log(v.CATEGORIES.NO_DB_OP,ia+'_active_state_change',{active_state:la});},_getDefaultActiveState:function(){return ga.NONE;},getInterests:function(){return this._interests;}});e.exports=ja;},null);
__d("AdsDestinationSearchSource",["AbstractSearchSource","AdsAPIObjectives","AdsApplicationUtils","ads-app-platforms","AdsDestinationTypes","AdsObjectivesConfig","SearchableEntry","TokenizeUtil","fbt","formatDate","invariant","ix","AdsCreationConfig","ads-objectives"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=t.isURLCachingEligibileObjective,v=t.KPIObjectivesByDestinationType,w=20,x,y=[],z,aa,ba,ca,da,ea=[],fa,ga=false;function ha(pa,qa){var ra=pa.score,sa=qa.score;if(ra===sa){if(!i.isCampaignManager()&&pa.type===k.EVENT&&qa.type===k.EVENT){var ta=pa.event_start_timestamp,ua=qa.event_start_timestamp;if(ta===ua)return pa.getTitle()>qa.getTitle()?1:-1;return ta>ua?1:-1;}return pa.getTitle()>qa.getTitle()?1:-1;}return ra<sa?1:-1;}function ia(pa){fa=pa.data;while(ea.length){var qa=ea.pop();qa();}if(ga){var ra=s.advertisedURLs,sa=ra.map(function(ta){return {id:ta,isCachedURL:true,name:ta,type:k.EXTERNAL_WEBPAGE};});fa=fa.concat(sa);}ea=[];}function ja(){return fa.filter(function(pa){return ka(pa)&&la(pa);});}function ka(pa){var qa=v[pa.type];return qa&&(qa.indexOf(ca)>-1);}function la(pa){if(aa||ba)return true;var qa=pa.supported_platforms;switch(da){case h.MOBILE_APP_INSTALLS:case h.MOBILE_APP_ENGAGEMENT:return j.supportsNativeMobile(qa);case h.CANVAS_APP_INSTALLS:case h.CANVAS_APP_ENGAGEMENT:return j.supportsDesktop(qa);default:return true;}}for(var ma in g)if(g.hasOwnProperty(ma))oa[ma]=g[ma];var na=g===null?null:g.prototype;oa.prototype=Object.create(na);oa.prototype.constructor=oa;oa.__superConstructor__=g;function oa(pa,qa,ra,sa,ta){"use strict";if(z&&ca===qa&&da===ra)return z;x=pa;ca=qa;ga=!!u(ca)?true:false;da=ra;aa=sa;ba=ta;}oa.prototype.bootstrapImpl=function(pa){"use strict";this.search('*',pa);};oa.prototype.searchImpl=function(pa,qa,ra){"use strict";if(fa){this.$AdsDestinationSearchSource0(pa,qa,ra);}else{ea.push(this.$AdsDestinationSearchSource0.bind(this,pa,qa,ra));this.$AdsDestinationSearchSource1();}};oa.prototype.$AdsDestinationSearchSource1=function(){"use strict";var pa={handleError:function(qa){ia({data:[]});this.$AdsDestinationSearchSource2();}.bind(this)};if(ea.length!==1)return;this.$AdsDestinationSearchSource2();x.fetch.connectionObjectsForAccount.one(function(qa){ia(qa);this.$AdsDestinationSearchSource2();}.bind(this),pa);};oa.prototype.$AdsDestinationSearchSource0=function(pa,qa,ra){"use strict";var sa=[],ta=pa.toLowerCase(),ua;if(ca){ua=ja();}else ua=fa;for(var va=0,wa=ua.length;va<wa;va++){var xa=ua[va];if(!xa)continue;var ya=xa.name,za=0,ab=ya.toLowerCase().indexOf(ta);if(ab<0)continue;if(n.isExactMatch(pa,ya)&&ab===0){za=5;}else if(n.isExactMatch(pa,ya)){za=4;}else if(ab===0){za=3;}else if(n.isQueryMatch(pa,ya)){za=2;}else if(ab>0)za=1;za+=(xa.engagement_score||0);var bb=xa.category;if(!i.isCampaignManager()&&xa.type===k.EVENT){var cb=new Date(xa.event_start_timestamp*1000);bb=p(cb,'F j, Y');if(xa.event_parent_page_name)bb=o._("{start date} \u2022 {event owner}",[o.param("start date",p(cb,'F j, Y')),o.param("event owner",xa.event_parent_page_name)]);}var db=new m({uniqueID:xa.id,title:ya,photo:xa.picture,subtitle:bb});db.score=za;db.matchStartIndex=ab;db.matchEndIndex=ab+pa.length;Object.assign(db,xa);sa.push(db);if(sa.length>w)break;}if(sa.length){if(ga){var eb=sa.some(function(fb){return fb.getTitle()===pa;});if(pa&&!eb)sa.unshift(this.$AdsDestinationSearchSource3(pa));}else sa.sort(ha);}else if(pa)sa.push(this.$AdsDestinationSearchSource3(pa));qa(sa,pa);};oa.prototype.$AdsDestinationSearchSource3=function(pa){"use strict";return new m({uniqueID:pa,title:pa,photo:r('/images/ads/createflow/web_url.png').uri,auxiliaryData:{type:k.ENTER_URL},subtitle:l.getTypeaheadSubtitle(ca)});};oa.prototype.isFetching=function(){"use strict";return !!(ea.length);};oa.prototype.addFetchListener=function(pa){"use strict";y.push(pa);if(this.isFetching())pa(true);};oa.prototype.$AdsDestinationSearchSource2=function(){"use strict";var pa=this.isFetching();y.forEach(function(qa){qa(pa);});};oa.prototype.clearCache=function(){"use strict";fa=null;x.fetch.connectionObjectsForAccount.clearCache();};oa.getInstance=function(pa,qa,ra,sa,ta){q(pa&&qa);if(!z||ca!==qa||da!==ra){if(z)y=[];z=new oa(pa,qa,ra,sa,ta);}return z;};e.exports=oa;},null);
__d("AdsLocationTypeaheadPasteDialog.react",["DialogPosition","LocationConstants","React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIDialogButton.react","XUIMenuStaticItem.react","XUISelector.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=q.Option,u=180,v=i.createClass({displayName:"AdsLocationTypeaheadPasteDialog",mixins:[j],propTypes:{onLocationTypeSelect:i.PropTypes.func.isRequired,onDialogHide:i.PropTypes.func},getInitialState:function(){return {showDialog:false,locationType:null};},render:function(){return null;},renderLayers:function(){if(!this.state.showDialog)return null;return {dialog:i.createElement(k,{layerHideOnBlur:false,shown:this.state.showDialog,width:400,onToggle:this._onToggle},i.createElement(n,null,"Select Location Type"),i.createElement(l,null,i.createElement("div",{className:"_2q35"},i.createElement("div",{className:"mbm"},"Only one type of location can be pasted at a time. Locations that can't be matched will be discarded."),this._renderSelector(),this._renderExamples())),i.createElement(m,null,i.createElement(o,{label:"Cancel",action:"cancel"}),i.createElement(o,{onClick:this._onConfirmButtonClick,label:"Add Locations",use:"confirm",disabled:!this.state.locationType})))};},_renderSelector:function(){var w=[i.createElement(p,{key:"static_item",className:"_24e9 _24ea"},"Choose one..."),i.createElement(t,{key:h.COUNTRY,value:h.COUNTRY,className:"_24ea"},"Country"),i.createElement(t,{key:h.REGION,value:h.REGION,className:"_24ea"},"State\/Region"),i.createElement(t,{key:h.CITY,value:h.CITY,className:"_24ea"},"City"),i.createElement(t,{key:h.ZIP,value:h.ZIP,className:"_24ea"},"ZIP\/Postal code")];if(this.props.allowAddress)w.push(i.createElement(t,{key:h.CUSTOM_LOCATION,value:h.CUSTOM_LOCATION,className:"_24ea"},"Address"));return (i.createElement(q,{onChange:this._onLocationTypeChange,className:"_24eb"},w));},_renderExamples:function(){if(this.state.locationType){var w=null;switch(this.state.locationType){case h.COUNTRY:w=s._("United States {comma} Canada {comma} Mexico",[s.param("comma",","),s.param("comma",",")]);break;case h.REGION:w=s._("Texas {comma} California {comma} New York",[s.param("comma",","),s.param("comma",",")]);break;case h.CITY:w=s._("Menlo Park {comma} California {semicolon} Austin {comma} Texas",[s.param("comma",","),s.param("semicolon",";"),s.param("comma",",")]);break;case h.ZIP:w=s._("US:94025 {comma} GB:NW13FG",[s.param("comma",",")]);break;case h.CUSTOM_LOCATION:w=s._("1 Hacker Way, Menlo Park, California {semicolon} 1600 Pennsylvania Ave NW, Washington, DC, 20500, USA",[s.param("semicolon",";")]);break;default:break;}return (i.createElement("div",{className:"mtm"},i.createElement("div",null,"Formatting examples:"),i.createElement("div",null,w)));}},show:function(){g.setFixedTopMargin(u);this.setState({showDialog:true,locationType:null});},_onToggle:function(w){g.setFixedTopMargin(0);this.setState({showDialog:w,locationType:null});if(w===false)this.props.onDialogHide&&this.props.onDialogHide();},_onLocationTypeChange:function(w){var x=w.value;this.setState({locationType:x});},_onConfirmButtonClick:function(){this.props.onLocationTypeSelect&&this.props.onLocationTypeSelect(this.state.locationType);this.setState({showDialog:false});}});e.exports=v;},null);
__d("AdsLocationTypeahead.react",["AbstractTypeahead.react","AdsLocationSearchSource","AdsLocationTypeaheadPasteDialog.react","AdsLocationTypeaheadPresenter","AdsLocationValidationHelpers","DOMQuery","LocationConstants","Keys","React","ReactInputSelection","SearchableEntry","XUISpinner.react","AsyncRequest","AdsCFLoggerInternal","cx","emptyFunction","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y='',z=o.createClass({displayName:"AdsLocationTypeahead",propTypes:{excludedEntries:o.PropTypes.object.isRequired,enableLogging:o.PropTypes.bool,onSelectAttempt:o.PropTypes.func,onMultiAddEntries:o.PropTypes.func,onUpdatePasteInfo:o.PropTypes.func,placeholder:o.PropTypes.string,width:o.PropTypes.number},getInitialState:function(){return {queryString:'',hasFocus:false,pasting:false,locationType:null,isValidating:false,invalidAddress:false};},render:function(){return (o.createElement("div",null,this._renderTypeahead(),o.createElement(i,{ref:"pasteDialog",onLocationTypeSelect:this._onLocationTypeSelect})));},_renderTypeahead:function(){if(this.state.isValidating)return (o.createElement("div",{width:this.props.width,className:"_2z2s"},o.createElement(r,{background:"light",size:"small"}),o.createElement("span",{className:"mls"},"Validating Address")));if(this.state.pasting)return (o.createElement("div",{width:this.props.width},o.createElement("div",{className:"_35b6"},o.createElement(r,{background:"light",size:"small"}),o.createElement("span",{className:"_35b7 mls"},"Adding locations"))));var aa=this.props.placeholder||"Add a country, state\/province, city or ZIP",ba=h.getInstance(),ca=j;ca.extraRendererProps={countries:this.props.countries,width:this.props.width};var da=this.props,ea=da.className,fa=da.size,ga=(function(ia,ja){var ka={},la=Object.prototype.hasOwnProperty;if(ia==null)throw new TypeError();for(var ma in ia)if(la.call(ia,ma)&&!la.call(ja,ma))ka[ma]=ia[ma];return ka;})(da,{className:1,size:1}),ha=(("_5d5u")+(fa==='large'?' '+"_30nb":'')+(fa==='xlarge'?' '+"_30nd":'')+(this.state.hasFocus?' '+"_2brt":'')+(this.state.invalidAddress?' '+"_2z2t":''));return (o.createElement(g,o.__spread({},ga,{ref:"typeahead",selectedEntry:null,placeholder:aa,presenter:ca,className:x(ha,ea),searchSource:ba,queryString:this.state.queryString,excludedEntries:this.props.excludedEntries,onSelectAttempt:this._onSelectAttempt,onChange:this._onInputChange,onFocus:this._onFocus,onBlur:this._onBlur,onPaste:this._onPaste,onKeyDown:this._onKeyDown,autoHighlight:true})));},_onFocus:function(){this.setState({hasFocus:true});this.props.onFocus&&this.props.onFocus();},_onBlur:function(){this.setState({hasFocus:false});this.props.onBlur&&this.props.onBlur();if(this.props.enableLogging&&this.state.queryString!=='')this.sendLog({event:'abandoned_search',query:this.state.queryString});},_onKeyDown:function(aa){if(this.state.isValidating)return;this.setState({invalidAddress:false});var ba=aa.keyCode;if(ba===n.ESC){this.setState({queryString:''});this.refs.typeahead.clearActiveEntries();y='';}},_saveTypeaheadSelection:function(){var aa=this.refs.typeahead.getDOMNode(),ba=l.find(aa,'input');this._typeaheadSavedSelection=p.getSelection(ba);},_restoreTypeaheadSelection:function(){var aa=this.refs.typeahead.getDOMNode(),ba=l.find(aa,'input');ba.focus();if(this._typeaheadSavedSelection)p.setSelection(ba,this._typeaheadSavedSelection);},_onSelectAttempt:function(aa){if(!aa)return;if(aa.getType()===m.CUSTOM_LOCATION){this._validateAddressAndSelectEntry(aa);}else this._selectEntry(aa);},_validateAddressAndSelectEntry:function(aa){this._saveTypeaheadSelection();this.setState({isValidating:true});var ba=h.getInstance();ba.validateAddress(aa.matchedText,function(ca,da,ea){this.setState({isValidating:false});if(da){var fa={type:m.CUSTOM_LOCATION,latitude:ea.latitude,longitude:ea.longitude,country_code:ea.country};if(ea.city){fa.primary_city_id=ea.city.key;fa.primary_city=ea.city.name;}if(ea.region){fa.region_id=ea.region.key;fa.region=ea.region.name;}var ga=new q({uniqueID:ea.normalized_address,title:ea.normalized_address,type:m.CUSTOM_LOCATION,auxiliaryData:fa});this._selectEntry(ga);}else this.setState({invalidAddress:true},function(){this._restoreTypeaheadSelection();}.bind(this));}.bind(this));},_selectEntry:function(aa){if(k.isValidEntry(aa)){this.props.onSelectAttempt&&this.props.onSelectAttempt(aa);if(this.props.enableLogging){var ba=h.getInstance(),ca=ba.getCurrentRawResult();t.log(t.CATEGORIES.NO_DB_OP,'select_geo_location',{position:aa.position,search_result:ca,query:this.state.queryString});this.sendLog({event:'select_geo_location',query:this.state.queryString,select_position:aa.position,select_entry_json:JSON.stringify(ca[aa.position])});}this.setState({queryString:''});this.refs.typeahead.clearActiveEntries();y='';}},_onInputChange:function(event){if(this.state.isValidating)return;var aa=(y===''&&event.target.value!=='');this.setState({queryString:event.target.value});y=event.target.value;if(aa)t.log(t.CATEGORIES.NO_DB_OP,'geo_location_start_typing');},_onPaste:function(event){if(this.state.isValidating)return;if(event&&event.clipboardData&&event.clipboardData.getData){var aa=event.clipboardData.getData('text/plain'),ba=(aa.split(/,|;/)||[]).filter(function(ca){return !!ca.trim();});if(!ba)return;if(ba.length===1)return;this._pasteText=aa;this.refs.pasteDialog.show();}event.preventDefault();},_onLocationTypeSelect:function(aa){var ba=[];switch(aa){case m.COUNTRY:case m.REGION:case m.ZIP:ba=this._pasteText.split(",").map(function(ca){return ca.trim();});break;case m.CITY:ba=this._pasteText.split(";").map(function(ca){return ca.trim();});break;}ba=ba.filter(function(ca){return !!ca;});this.setState({pasting:true,locationType:aa},function(){if(aa===m.ZIP){h.getInstance().validatePostalCodes(ba,this._onValidationCallback);}else h.getInstance().validate(ba,aa,this._onValidationCallback);}.bind(this));},_onValidationCallback:function(aa,ba){this.setState({pasting:false});this.props.onUpdatePasteInfo&&this.props.onUpdatePasteInfo(aa,ba,this.state.locationType);this.props.onMultiAddEntries&&this.props.onMultiAddEntries(aa);},focusInput:function(){this.refs.typeahead.focusInput();},sendLog:function(aa){new s('/ads/location/typeahead/logging/').setData(aa).setErrorHandler(v).setTransportErrorHandler(v).send();}});e.exports=z;},null);
__d("AdsGeoLocationTokenizer.react",["AdsGeoLocationMetaInfoDataSource","AdsLocationTypeahead.react","AdsLocationListItemGroup.react","AdsLocationValidationDialog.react","AdsLocationValidationHelpers","AdsTargetingLocationPasteResult","LocationConstants","List.react","React","SearchableEntry","areJSONRepresentationsEqual","cx","invariant","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=b('LocationConstants').RadiusInfo,v,w={},x={},y={},z=[],aa={},ba=false,ca=[],da=null,ea={};ea[m.REGIONS]=function(wa){return {name:wa.name,country:wa.country_code};};ea[m.CITIES]=function(wa){return {name:wa.name,region:wa.region,region_id:wa.region_id,country:wa.country_code};};ea[m.ZIPS]=function(wa){return {name:wa.name,city:wa.primary_city,region:wa.region,region_id:wa.region_id,country:wa.country_code};};ea[m.CUSTOM_LOCATIONS]=function(wa){return {name:wa.name,country:wa.country_code};};function fa(){"use strict";}function ga(){"use strict";}var ha=o.createClass({displayName:"AdsGeoLocationTokenizer",_previousStoredData:{},propTypes:{countries:o.PropTypes.object.isRequired,determineInvalidEntry:o.PropTypes.func,highlightNewItems:o.PropTypes.bool,onChange:o.PropTypes.func,placeholder:o.PropTypes.string,storedData:o.PropTypes.shape({geoLocations:o.PropTypes.object,excludedGeoLocations:o.PropTypes.object}).isRequired,supportsRadius:o.PropTypes.bool,searchSourceOptions:o.PropTypes.object,width:o.PropTypes.number},getDefaultProps:function(){return {determineInvalidEntry:k.determineInvalidEntry,highlightNewItems:true,supportsRadius:true};},getInitialState:function(){return {entries:[],geoLocationsMetaInfo:null,showPastedLocationsInfo:false,pastedLocationsSuccess:[],pastedLocationsFail:[],pastedLocationType:null};},componentWillMount:function(){y=ua(this.props.countries);var wa=this.props.storedData;this._updateViewFromApi(wa.geoLocations||{},wa.excludedGeoLocations||{});},shouldComponentUpdate:function(wa){return !q(wa.storedData,this._previousStoredData);},componentDidUpdate:function(wa){this._previousStoredData=Object.assign({},wa._previousStoredData);},componentWillReceiveProps:function(wa){if(wa.countries)y=ua(wa.countries);if(wa.storedData.geoLocations||wa.storedData.excludedGeoLocations){if(q(wa.storedData,this._previousStoredData))return;this._updateViewFromApi(wa.storedData.geoLocations||{},wa.storedData.excludedGeoLocations||{});}},render:function(){var wa=this._getDisplayData();if(!wa.geoLocations){z=[];aa={};}v=la(wa,this.props.countries);ia(v,this.props.countries);var xa=k.normalizeEntriesAsLocationInfo(v,this.props.countries),ya=ra(xa);ya=ya.map(sa);var za=ya.map(function(cb){var db=cb[0].country_code;return (o.createElement("li",{key:db},o.createElement(i,{countries:this.props.countries,category:cb,entriesRadius:w,exclusionEntries:x,newestEntry:da,onRadiusChange:this._onEntryRadiusChange,onRemoveEntry:this._onRemoveEntry,onExclusionChange:this._onEntryExclusionChange,getExcludedEntries:this._getExcludedEntries,smallestEntry:this.props.smallestEntry,setEntries:this._setEntries,getEntries:this._getEntries,highlightNewItems:this.props.highlightNewItems,supportsRadius:this.props.supportsRadius,searchSourceOptions:this.props.searchSourceOptions})));},this);if(za.length)var ab=(o.createElement(n,{className:"_116l",spacing:"none",border:"light"},za));var bb=t((("_116k")+(' '+"uiContextualLayerParent")),this.props.className);return (o.createElement("div",{className:bb},o.createElement(j,{ref:"validationDialog",entriesRadius:w,updateRadius:this._updateRadiusValues,exclusionEntries:x,updateExclusion:this._updateExclusionValues,addEntry:this._onAddEntry,removeEntry:this._onRemoveEntry,currentEntries:v}),ab,this._renderPasteResult(),o.createElement(h,{width:this.props.width,entries:v,ref:"locationTypeahead",countries:this.props.countries,enableLogging:true,excludedEntries:this._getExcludedEntries(),onSelectAttempt:this._onAddEntry,onMultiAddEntries:this._onMultiAddEntries,onUpdatePasteInfo:this._onUpdatePasteInfo,placeholder:this.props.placeholder,searchSourceOptions:this.props.searchSourceOptions,size:this.props.size})));},_renderPasteResult:function(){if(!this.state.showPastedLocationsInfo)return null;return (o.createElement(l,{successLocations:this.state.pastedLocationsSuccess,failedLocations:this.state.pastedLocationsFail,locationType:this.state.pastedLocationType}));},_updateViewFromApi:function(wa,xa){g.getInstance().getMetaInfo(wa,xa,this._updateViewFromApiCallback);},_updateViewFromApiCallback:function(wa){if(!this.isMounted())return;wa=Object.assign({custom_locations:[],geo_markets:[]},wa);this.setState({geoLocationsMetaInfo:wa});this.forceUpdate();},_getDisplayData:function(){if(!this.state.geoLocationsMetaInfo)return {};var wa=this._fillMetaInfoForLocations(this.props.storedData.geoLocations,this.state.geoLocationsMetaInfo),xa=this._fillMetaInfoForLocations(this.props.storedData.excludedGeoLocations,this.state.geoLocationsMetaInfo);return {geoLocations:wa,excludedGeoLocations:xa};},_fillMetaInfoForLocations:function(wa,xa){wa=wa||{};var ya={};ya.countries=wa.countries||[];Object.keys(ea).forEach(function(za){if(!wa[za])return;var ab=xa[za]||{};ya[za]=wa[za].map(function(bb){var cb=ab[bb.key];if(!cb)return bb;return Object.assign({},bb,ea[za](cb));});});return ya;},_onAddEntry:function(wa){this.setState({showPastedLocationsInfo:false});this._onMultiAddEntries([wa]);},_onUpdatePasteInfo:function(wa,xa,ya){this.setState({showPastedLocationsInfo:true,pastedLocationsSuccess:wa,pastedLocationsFail:xa,pastedLocationType:ya});},_onMultiAddEntries:function(wa){var xa=wa.length>1;wa.forEach(function(ya){if(ya.getUniqueID()==='-1'||!this._validateEntries(ya,xa))return;var za=y[va(ya,this.props.countries)];if(!aa[za]){aa[za]=1;z.push(za);}else aa[za]++;v.push(ya);da=ya;var ab=ya.getType(),bb=this.props.supportsRadius&&(ab===m.CITY||ab===m.CUSTOM_LOCATION),cb=bb?u.getCityDefaultRadius():0;w[ya.getUniqueID()]=cb;x[ya.getUniqueID()]=[];if(ca.length){ca.forEach(function(db){v.splice(v.indexOf(db),1);});ca=[];}},this);this._onEntriesChange(v);},_onRemoveEntry:function(wa){var xa=wa.getUniqueID(),ya=v;if(ya.some(ta.bind(null,xa))){var za=y[va(wa,this.props.countries)];aa[za]--;if(!aa[za])z.splice(z.indexOf(za),1);var ab=null;for(var bb=0;bb<ya.length;bb++)if(ya[bb].getUniqueID()===wa.getUniqueID()){ab=bb;break;}if(ab!==null)ya.splice(ab,1);delete w[xa];delete x[xa];this._onEntriesChange(ya);}},_onEntryRadiusChange:function(wa,xa){var ya=wa.getUniqueID(),za=v;if(za.some(ta.bind(null,ya))){w[ya]=xa;this._onEntriesChange(za);}},_updateRadiusValues:function(wa){w=wa;},_onEntryExclusionChange:function(wa,xa){var ya=wa.getUniqueID(),za=v;if(za.some(ta.bind(null,ya))){x[ya]=xa;this._onEntriesChange(za);}},_updateExclusionValues:function(wa){x=wa;},_onEntriesChange:function(wa){var xa=this.refs.locationTypeahead;setTimeout(function(){xa.focusInput();});var ya=ja(wa),za=this.props.storedData;this.props.onChange({geoLocations:Object.assign({},za.geoLocations,ya.geoLocations),excludedGeoLocations:Object.assign({},za.excludedGeoLocations,ya.excludedGeoLocations)});ba=true;},_getExcludedEntries:function(){var wa={},xa=v.concat(this._getLocationExclusionEntries());xa.forEach(function(ya){wa[ya.getUniqueID()]=true;});return wa;},_getLocationExclusionEntries:function(){var wa=[];v.forEach(function(xa){var ya=x[xa.getUniqueID()];if(ya&&ya.length>0)wa=wa.concat(ya);});return wa;},_validateEntries:function(wa,xa){var ya=wa.getType();if(ya===m.CUSTOM_LOCATION||ya===m.GEO_MARKET)return true;var za=v.slice(0);for(var ab=0;ab<za.length;ab++)if(za[ab].getUniqueID()===wa.getUniqueID())return false;za.push(wa);var bb=this.props.determineInvalidEntry(za,this.props.countries),cb=bb.invalidEntry;if(cb){var db=this.refs.validationDialog;if(cb===wa){db.setInfo(wa,bb.subsetEntries,bb.errorDescription);db.show();}else if((bb.subsetEntries.length===1&&cb.getType()===m.COUNTRY&&!ba)||xa||bb.suppressValidation){ca.push(cb);return true;}else{db.setInfo(wa,[cb]);db.show();}return false;}else return true;},_getEntries:function(){return v;},_setEntries:function(wa){this._onEntriesChange(wa);}});function ia(wa,xa){if(!wa)return;var ya=wa.map(function(za){return va(za,xa);});ya.sort();z=[];aa={};ya.forEach(function(za){var ab=y[za];if(!aa[ab]){aa[ab]=1;z.push(ab);}else aa[ab]++;});}function ja(wa){var xa=ka(wa,false),ya={countries:[],cities:[],regions:[],zips:[],custom_locations:[],geo_markets:[]};wa.forEach(function(ab){var bb=ab.getUniqueID(),cb=ka(x[bb],true);for(var db in ya)ya[db]=ya[db].concat(cb[db]);});var za={geoLocations:xa,excludedGeoLocations:ya};return za;}function ka(wa,xa){var ya={countries:[],cities:[],regions:[],zips:[],custom_locations:[],geo_markets:[]};wa=wa||[];wa.forEach(function(za){var ab=za.getUniqueID(),bb=za.getAuxiliaryData()||{},cb=xa?new ga():new fa();cb.key=ab;switch(za.getType()){case m.COUNTRY:ya.countries.push(ab);break;case m.REGION:cb.name=za.getTitle();cb.country=za.getAuxiliaryData().country_code;ya.regions.push(cb);break;case m.CITY:cb.name=za.getTitle().split(',')[0];cb.region_id=bb.region_id;cb.region=bb.region||'';cb.country=bb.country_code;cb.radius=w[ab];cb.distance_unit=u.getLocalizedUnit();ya.cities.push(cb);break;case m.CUSTOM_LOCATION:cb.name=za.getTitle();cb.address_string=za.getTitle();cb.latitude=bb.latitude;cb.longitude=bb.longitude;cb.radius=w[ab];cb.distance_unit=u.getLocalizedUnit();ya.custom_locations.push(cb);break;case m.GEO_MARKET:cb.name=za.getTitle();ya.geo_markets.push(cb);break;case m.ZIP:bb=za.getAuxiliaryData();cb.name=ab.split(':')[1];cb.city=bb.primary_city||'';cb.region_id=bb.region_id;cb.region=bb.region||'';cb.country=bb.country_code;ya.zips.push(cb);break;}});return ya;}function la(wa,xa){var ya=wa.geoLocations,za=wa.excludedGeoLocations;if(!ya)return [];ya=na(ya);w={};x={};var ab=[],bb;Object.keys(ya).forEach(function(cb){ya[cb].forEach(function(db){if(!bb&&db.distance_unit)bb=db.distance_unit;ab.push(oa(cb,db,xa));});});u.setLocalizedUnit(bb);Object.keys(za).forEach(function(cb){if(cb!==m.COUNTRIES)za[cb].forEach(function(db){if(db instanceof ga){var eb=db.key;x[eb]=x[eb]||[];x[eb].push(oa(cb,db,xa));}else ma(ya,db,cb,xa);});});return ab;}function ma(wa,xa,ya,za){var ab={countries:4,regions:3,cities:2,zips:1},bb=0,cb=null,db=Object.keys(wa);for(var eb=0;eb<db.length;eb++){var fb=db[eb];if(ab[fb]>ab[ya]){for(bb=0;bb<wa[fb].length;bb++){cb=wa[fb][bb];switch(fb){case m.CITIES:x[cb.key]=x[cb.key]||[];if(xa.region_id===cb.region_id&&xa.city===cb.name){x[cb.key].push(oa(ya,xa,za));return;}break;case m.REGIONS:x[cb.key]=x[cb.key]||[];if(xa.region_id==cb.key){x[cb.key].push(oa(ya,xa,za));return;}break;case m.COUNTRIES:x[cb]=x[cb]||[];if(xa.country===cb){x[cb].push(oa(ya,xa,za));return;}break;}}}else if(fb===m.CITIES&&fb===ya)for(bb=0;bb<wa[fb].length;bb++){cb=wa[fb][bb];if(xa.region_id===cb.region_id){x[cb.key].push(oa(ya,xa,za));return;}}}if(ya===m.ZIPS){for(bb=0;bb<wa[m.CITIES].length;bb++){cb=wa[m.CITIES][bb];if(xa.region_id===cb.region_id){x[cb.key].push(oa(ya,xa,za));return;}}for(bb=0;bb<wa[m.REGIONS].length;bb++){cb=wa[m.CITIES][bb];if(xa.region_id===cb.region_id){x[cb.key].push(oa(ya,xa,za));return;}}}}function na(wa){var xa={};for(var ya in wa){var za=wa[ya];if(ya===m.COUNTRIES){xa[ya]=za.filter(function(ab){return ab;});}else xa[ya]=za.filter(function(ab){return ab.key;});}return xa;}function oa(wa,xa,ya){s(pa.hasOwnProperty(wa));return pa[wa](xa,ya);}var pa={};pa[m.COUNTRIES]=function wa(xa,ya){x[xa]=[];return new p({uniqueID:xa,title:ya[xa],type:m.COUNTRY,auxiliaryData:{key:xa,name:ya[xa],country_code:xa,type:m.COUNTRY}});};pa[m.REGIONS]=function wa(xa){w[xa.key]=xa.radius;x[xa.key]=[];return new p({uniqueID:xa.key,title:xa.name,type:m.REGION,auxiliaryData:{key:xa.key,name:xa.name,country_code:xa.country,type:m.REGION}});};pa[m.CUSTOM_LOCATIONS]=function wa(xa){var ya=m.CUSTOM_LOCATION;if(xa.radius)w[xa.key]=xa.radius;x[xa.key]=[];return new p({uniqueID:xa.key,title:xa.name,type:ya,auxiliaryData:{type:ya,country_code:'US'}});};pa[m.GEO_MARKETS]=function wa(xa){var ya=m.GEO_MARKET;x[xa.key]=[];return new p({uniqueID:xa.key,title:xa.name,type:ya,auxiliaryData:{type:ya,country_code:'US'}});};pa[m.CITIES]=function wa(xa,ya){w[xa.key]=xa.radius;x[xa.key]=[];var za=null;if(xa.region===''||xa.region===xa.name){if(xa.country)za=ya[xa.country];}else za=xa.region;var ab=xa.name;if(za)ab+=', '+za;return new p({uniqueID:xa.key,title:ab,type:m.CITY,auxiliaryData:{key:xa.key,name:ab,region:xa.region,region_id:xa.region_id,type:m.CITY,country_code:xa.country}});};pa[m.ZIPS]=function wa(xa){w[xa.key]=xa.radius;x[xa.key]=[];return new p({uniqueID:xa.key,title:xa.name+' '+xa.city+', '+xa.region,type:m.ZIP,auxiliaryData:{key:xa.key,name:xa.key.split(':')[1],primary_city:xa.city,region_id:xa.region_id,region:xa.region,type:m.ZIP,country_code:xa.country}});};function qa(wa){wa.sort(function(xa,ya){if(xa.country===ya.country){if(xa.region===ya.region){if(xa.city===ya.city)return xa.zipcode<ya.zipcode?-1:1;return xa.city<ya.city?-1:1;}return xa.region<ya.region?-1:1;}return xa.country<ya.country?-1:1;});}function ra(wa){var xa={};qa(wa);wa.forEach(function(ya){xa[ya.country_code]=xa[ya.country_code]||[];xa[ya.country_code].push(ya);});return z.map(function(ya){return xa[ya];});}function sa(wa){var xa=[],ya={};wa.forEach(function(ab){var bb=ab.region_id||'no region';ya[bb]=ya[bb]||[];ya[bb].push(ab);});for(var za in ya)xa=xa.concat(ya[za]);return xa;}function ta(wa,xa){return xa.getUniqueID()===wa;}function ua(wa){var xa={};for(var ya in wa)xa[wa[ya]]=ya;return xa;}function va(wa,xa){if(wa.getType()===m.COUNTRY){return wa.getTitle();}else return xa[wa.getAuxiliaryData().country_code];}e.exports=ha;},null);
__d("AdsBidTypes",["AdsAPIBidType"],function(a,b,c,d,e,f,g){var h={BID_TYPE_CPC:1,BID_TYPE_CPM:2,BID_TYPE_FCPM:4,BID_TYPE_MULTI_PREMIUM:5,BID_TYPE_MULTI_RELATIVE:6,BID_TYPE_MULTI_ABSOLUTE:7,BID_TYPE_CPM_RTB:8,BID_TYPE_CPA:9},i={};i[h.BID_TYPE_CPC]=g.CPC;i[h.BID_TYPE_CPM]=g.CPM;i[h.BID_TYPE_FCPM]=g.FIXED_CPM;i[h.BID_TYPE_MULTI_PREMIUM]=g.MULTI_PREMIUM;i[h.BID_TYPE_MULTI_RELATIVE]=g.RELATIVE_OCPM;i[h.BID_TYPE_MULTI_ABSOLUTE]=g.ABSOLUTE_OCPM;i[h.BID_TYPE_CPM_RTB]=g.RTB;i[h.BID_TYPE_CPA]=g.CPA;var j={};for(var k in i)j[i[k]]=k;h.MIGRATION_MAP=i;h.REVERSE_MIGRATION_MAP=j;e.exports=h;},null);
__d("AdsWirelessCarrierLabels",["AdsWirelessCarriers","fbt"],function(a,b,c,d,e,f,g,h){'use strict';var i={};i[g.WIFI]="Wi-Fi";e.exports=i;},null);
__d("AdsBidUtils",["AdsAPIBidInfoFields","AdsAPIBidInfoFieldsLabels","AdsAPIBidType","AdsAPIObjectives","AdsBidOptions","AdsBidTypes","AdsCurrencyFormatter","AdsPEImportExportConstants","StrSet","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';var q=n.Bid,r=new o([i.FIXED_CPM,i.MULTI_PREMIUM]),s={};s[l.BID_TYPE_MULTI_PREMIUM]={apiValue:i.MULTI_PREMIUM,text:"Multi Premium",value:l.BID_TYPE_MULTI_PREMIUM,tabSeparated:[q.MULTI_PREMIUM,'multi premium','multi_premium'],bidOption:k.IMPRESSIONS};s[l.BID_TYPE_FCPM]={apiValue:i.FIXED_CPM,text:"FCPM",value:l.BID_TYPE_FCPM,tabSeparated:[q.FIXED_CPM,'cpm_fixed'],bidOption:k.IMPRESSIONS};s[l.BID_TYPE_CPC]={apiValue:i.CPC,text:"CPC",value:l.BID_TYPE_CPC,tabSeparated:[q.CPC],bidOption:k.CLICKS};s[l.BID_TYPE_CPM]={apiValue:i.CPM,text:"CPM",value:l.BID_TYPE_CPM,tabSeparated:[q.CPM],bidOption:k.IMPRESSIONS};s[l.BID_TYPE_MULTI_ABSOLUTE]={apiValue:i.ABSOLUTE_OCPM,text:"Optimized CPM",value:l.BID_TYPE_MULTI_ABSOLUTE,tabSeparated:[q.ABSOLUTE_OCPM,'multi_absolute'],bidOption:k.IMPRESSIONS};s[l.BID_TYPE_CPA]={apiValue:i.CPA,text:"CPA",value:l.BID_TYPE_CPA,tabSeparated:[q.CPA],bidOption:k.OCPM_ACTIONS};var t={};for(var u in s)if(s.hasOwnProperty(u)){var v=s[u];v.tabSeparated.forEach(function(x){t[x]=v;});}var w={getBidTypeString:function(x){switch(x){case i.ABSOLUTE_OCPM:return ("Optimized CPM");case i.CPA:return ("CPA");case i.CPC:return ("CPC");case i.CPM:return ("CPM");case i.FIXED_CPM:return ("FCPM");case i.FIXED_PRICING:return ("FCPC");case i.MULTI_PREMIUM:return ("Multi");case i.RELATIVE_OCPM:return ("Optimized CPM");case i.RTB:return ("CPM RTB");default:break;}},getBidInfoFieldLabel:function(x){return h[x]||x;},getBidTypeInfo:function(x){var y=w.bidTypeToLegacyValue(x);return s[y];},getBidValueString:function(x,y,z,aa){if(aa||x===i.MULTI_PREMIUM||x===i.RELATIVE_OCPM||x===i.MULTI_ABSOLUTE||x===i.ABSOLUTE_OCPM)return ("Auto");var ba=0;for(var ca in y)if(y[ca]>ba)ba=y[ca];return m.formatCurrencyWithNumberDelimiters(z,ba);},options:function(x){return w._filteredOptions(x);},bidTypeFromLegacyValue:function(x){return l.MIGRATION_MAP[x]||x;},bidTypeToLegacyValue:function(x){return (l.REVERSE_MIGRATION_MAP[x]||x)*1;},hasBidActions:function(x){return !!(x&&x.ACTIONS&&x.ACTIONS>0);},hasBidClicks:function(x){return !!(x&&x.CLICKS&&x.CLICKS>0);},allOptions:function(){return w._filteredOptions();},_filteredOptions:function(x){var y=[s[l.BID_TYPE_CPC],s[l.BID_TYPE_CPM],s[l.BID_TYPE_MULTI_ABSOLUTE],s[l.BID_TYPE_CPA]];if(x===(void 0)||x){y.push(s[l.BID_TYPE_FCPM]);y.push(s[l.BID_TYPE_MULTI_PREMIUM]);}return y;},fixedPriceOptions:function(){return [s[l.BID_TYPE_MULTI_PREMIUM]];},premiumSelfServeOptions:function(){return [s[l.BID_TYPE_MULTI_PREMIUM]];},reachBlockOptions:function(){return [s[l.BID_TYPE_MULTI_PREMIUM]];},deprecatedReachBlockOptions:function(){return [s[l.BID_TYPE_FCPM]];},reachFrequencyOptions:function(){return [s[l.BID_TYPE_MULTI_PREMIUM]];},instagramOptions:function(){return [s[l.BID_TYPE_FCPM]];},getName:function(x,y){for(var z=0,aa=w.options(y);z<aa.length;z++)if(aa[z].value==x)return aa[z].text;return '';},getTabSeparatedName:function(x){for(var y=0,z=w.allOptions();y<z.length;y++)if(z[y].value==x)return Array.isArray(z[y].tabSeparated)?z[y].tabSeparated[0]:z[y].tabSeparated;return '';},parseTabSeparated:function(x){if(x)x=x.toLowerCase();return t[x];},isTopLineBidType:function(x){return r.contains(x);},getBidRangeValues:function(x,y){if(!x||x.unsupported)return {};switch(y){case i.ABSOLUTE_OCPM:return {};case i.CPA:return {min:x.cpa_min,max:x.cpa_max,median:x.cpa_median};case i.CPC:return {min:x.cpc_min,max:x.cpc_max,median:x.cpc_median};case i.CPM:return {min:x.cpm_min,max:x.cpm_max,median:x.cpm_median};default:return {min:x.cpm_min,max:x.cpm_max,median:x.cpm_median};}}};e.exports=w;},null);
__d("AdsCFObjectiveActions",["AdsCFActionTypes","AdsDispatcher","AdsCFObjectiveStore"],function(a,b,c,d,e,f,g,h,i){var j={clearKPIObjective:function(){h.handleUpdateFromViewAction({actionType:g.KPI_OBJECTIVE_CONFIRM,confirmed:false});h.handleUpdateFromViewAction({actionType:g.KPI_OBJECTIVE_CHANGE,kpiObjective:null});},confirmKPIObjective:function(k){h.handleUpdateFromViewAction({actionType:g.KPI_OBJECTIVE_CONFIRM,confirmed:k});},setKPIObjective:function(k,l){h.handleUpdateFromViewAction({actionType:g.KPI_OBJECTIVE_CHANGE,kpiObjective:k,previousKpiObjective:i.getKPIObjective(),source:l});},setObjective:function(k,l){h.handleUpdateFromViewAction({actionType:g.OBJECTIVE_CHANGE,objectiveType:l});}};e.exports=j;},null);
__d("AdsCFCouponCode",["URI"],function(a,b,c,d,e,f,g){var h={isCouponError:function(){var i=g.getRequestURI().getQueryData();return i.coupon_error;},getCouponCode:function(){var i=g.getRequestURI().getQueryData();return i.coupon||i.coupon_code;}};e.exports=h;},null);
__d("AdsCFObjectiveSuggestionsStore",["AdsActionTypes","AdsBaseStore","AdsCFAccountStore","AdsCFActionTypes","AdsCFApplicationStore","AdsCFCreativeStore","AdsCFDestinationStore","AdsCFObjectiveStore","AdsCreationExperiments","AdsDestinationTypes","AdsDispatcher","PagePostTypes","invariant","ads-objectives"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';var t=b('ads-objectives').KPIObjectives,u=o.getExperiment('ads_cf_video_views_suggest'),v;function w(){v={isValid:true,suggestedKPIObjectives:[]};}w();function x(){var ta=n.getKPIObjective(),ua=m.getDestinationTypeIgnoringKPI();if(!(ta&&ua)){w();return v;}switch(ta){case t.APP_ENGAGEMENT:return y(ua);case t.APP_INSTALLS:return z(ua);case t.EVENT_RESPONSES:return aa(ua);case t.LOCAL_AWARENESS:return ba(ua);case t.OFFER_CLAIMS:return ca(ua);case t.PAGE_LIKES:return fa(ua);case t.POST_ENGAGEMENT:return ga(ua);case t.VIDEO_VIEWS:return ha(ua);case t.WEBSITE_CLICKS:return ia(ua);case t.WEBSITE_CONVERSIONS:return ja(ua);default:s(true);break;}}function y(ta){if(ta===p.APP)return {isValid:true,suggestedKPIObjectives:[]};return ka(ta);}function z(ta){if(ta===p.APP)return {isValid:true,suggestedKPIObjectives:[]};return ka(ta);}function aa(ta){var ua=[],va=true;switch(ta){case p.EVENT:if(m.isInputPersonalEvent())va=false;break;default:return ka(ta);}return {isValid:va,suggestedKPIObjectives:ua};}function ba(ta){var ua=[],va=true;switch(ta){case p.PAGE:case p.PLACE:if(m.hasPageAnalystRole())va=false;break;default:return ka(ta);}return {isValid:va,suggestedKPIObjectives:ua};}function ca(ta){var ua=[],va=true;switch(ta){case p.PAGE:case p.PLACE:var wa=m.getDestinationDetails(),xa=ma();if(!wa.offerEligible)va=false;if(!wa.hasEnoughFansForOffers){ua.push(t.PAGE_LIKES);}else if(xa&&!ea())ua.push(t.POST_ENGAGEMENT);break;default:return ka(ta);}return {isValid:va,suggestedKPIObjectives:ua};}function da(){var ta=m.getDestinationDetails().storyId,ua=m.getPagePostDetails(ta);return ua.type===r.VIDEO;}function ea(){var ta=m.getDestinationDetails().storyId,ua=m.getPagePostDetails(ta);return ua.type===r.OFFER;}function fa(ta){var ua=[],va=true;switch(ta){case p.PAGE:case p.PLACE:if(m.hasPageAnalystRole()){va=false;}else if(ma())if(da()&&!k.isCampaignManager()&&u.getParamBool('suggest')){ua.push(t.VIDEO_VIEWS);}else if(ea()){ua.push(t.OFFER_CLAIMS);}else ua.push(t.POST_ENGAGEMENT);break;default:return ka(ta);}return {isValid:va,suggestedKPIObjectives:ua};}function ga(ta){var ua=[],va=true;switch(ta){case p.PAGE:case p.PLACE:var wa=l.getState().storyId,xa=m.getPagePostDetails(wa);switch(xa.type){case r.VIDEO:if(!k.isCampaignManager()&&u.getParamBool('suggest'))ua.push(t.VIDEO_VIEWS);break;case r.OFFER:ua.push(t.OFFER_CLAIMS);break;}break;default:return ka(ta);}return {isValid:va,suggestedKPIObjectives:ua};}function ha(ta){var ua=[],va=true;switch(ta){case p.PAGE:case p.PLACE:if(m.hasPageAnalystRole())va=false;break;default:return ka(ta);}return {isValid:va,suggestedKPIObjectives:ua};}function ia(ta){var ua=[],va=true;switch(ta){case p.PAGE:case p.PLACE:ua=oa();break;case p.APP:ua.push(t.APP_INSTALLS,t.APP_ENGAGEMENT);break;case p.EVENT:ua.push(t.EVENT_RESPONSES);break;case p.EXTERNAL_WEBPAGE:break;default:na(ta);break;}return {isValid:va,suggestedKPIObjectives:ua};}function ja(ta){var ua=[],va=true;switch(ta){case p.EXTERNAL_WEBPAGE:break;default:return ka(ta);}return {isValid:va,suggestedKPIObjectives:ua};}function ka(ta){var ua=[];switch(ta){case p.APP:ua.push(t.APP_INSTALLS,t.APP_ENGAGEMENT);break;case p.EVENT:ua.push(t.EVENT_RESPONSES);break;case p.EXTERNAL_WEBPAGE:ua.push(t.WEBSITE_CLICKS);if(la())ua.push(t.WEBSITE_CONVERSIONS);break;case p.PAGE:case p.PLACE:ua=oa();break;default:na(ta);break;}return {isValid:false,suggestedKPIObjectives:ua};}function la(){return !!i.getState().pixels.length;}function ma(){return !!m.getDestinationDetails().storyId;}function na(ta){s(true);}function oa(){var ta=[],ua=m.getDestinationDetails().isAdmin;if(!ma()&&ua){ta.push(t.PAGE_LIKES,t.POST_ENGAGEMENT);}else if(!ma()&&!ua){ta.push(t.POST_ENGAGEMENT,t.PAGE_LIKES);}else if(ma()&&ea()){ta.push(t.OFFER_CLAIMS);}else ta.push(t.POST_ENGAGEMENT);return ta;}for(var pa in h)if(h.hasOwnProperty(pa))ra[pa]=h[pa];var qa=h===null?null:h.prototype;ra.prototype=Object.create(qa);ra.prototype.constructor=ra;ra.__superConstructor__=h;function ra(){if(h!==null)h.apply(this,arguments);}ra.prototype.getStoreName=function(){return 'AdsCFObjectiveSuggestionsStore';};ra.prototype.getCompatibilityStatus=function(){return v;};ra.prototype.onDispatchToken=function(ta){var ua=ta.action;switch(ua.actionType){case j.CREATIVE_CHANGE:case j.DESTINATION_CHANGE:case j.KPI_OBJECTIVE_CHANGE:case j.OBJECTIVE_CHANGE:case j.PAGE_POSTS_LOADED:q.waitFor([i.dispatchToken,l.dispatchToken,m.dispatchToken,n.dispatchToken]);v=x();sa.inform('change');break;case j.RESET_DESTINATION:w();sa.inform('change');break;case g.PAGE_TRANSITION:case j.RESET_CF_STORES:w();break;}};var sa=new ra();a.debug_AdsCFObjectiveSuggestionsStore=sa;e.exports=sa;},null);
__d("AdsCFPlaceOrderViewActions",["AdManagerFunding","AdsAccountCapabilities","AdsCFAccountStore","AdsCFActionTypes","AdsCFApplicationStore","AdsCFCampaignGroupActions","AdsCFCampaignGroupStore","AdsCFCampaignStore","AdsCFConstants","AdsCFCouponCode","AdsCFCreationSources","AdsCFCreativeStore","AdsCFDestinationStore","AdsCFObjectiveStore","AdsCFOutputAPIDataProcessor","AdsCFPendingObjectStore","AdsCFPricingStore","AdsCFTargetingStore","AdsCFTripIDGenerator","AdsCFValidateUtils","AdsCMCreationUtils","AdsCMNavigationBlocker","AdsCMPageValues","AdsCMStateActions","AdsCMStateConfig","AdsCreationConfig","AdsCreativeConverter","AdsDispatcher","AdsTargetingModelAdapter","AsyncRequest","BizSiteIdentifier.brands","Bootloader","BrazilTaxIDCollectionFlow","BusinessConf","CurrentLocale","Dialog","PendingObjectService","Promise","URI","XAdsCFCreateAdControllerURIBuilder","adsGKCheck","curry","fbt","getDOMImageSize"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa){var ya=o.CampaignGroupRunStatuses,za=ea.PAGE.values,ab=ga.toModernSpec,bb=120*1000,cb=1,db=123097351040126,eb=0;function fb(){var bc={};z.validateCampaignGroup(m.getSelectedState(),bc);z.validateCampaign(n.getSelectedCampaignState(),bc);z.validatePricing(n.getSelectedCampaignState(),w.getState(o.CanonicalID),i.getState(),bc);z.validateTargeting(ia.getApiSpec(),t.getAPIObjective(),bc);z.validateDestination(n.getSelectedCampaignState(),x.getState(o.CanonicalID),w.getState(o.CanonicalID),s.getDestinationID(),bc);z.validateCreative(r.getState(),bc);z.onValidationErrors(bc);return !Object.keys(bc).length;}function gb(){z.clearValidationErrors();var bc=fb();return !!bc;}function hb(bc){var cc={},dc=0;bc.forEach(function(ec){if(ec.error&&ec.error.code){cc[ec.error.code]=ec.error.message;}else cc[dc++]=ec;});z.onValidationErrors(cc);}function ib(bc){u.generateSpecForCreate(function(cc){var dc=v.getPendingObjectID();qa.updatePendingObjectFromApiData(dc,cc,bc);},function(cc,dc){hb(dc);});}function jb(){ha.dispatch({action:{actionType:j.CREATING_AD}});u.generateSpecForCreate(function(bc){var cc=bc.adApiSpec,dc=cc.creative,ec=dc.type;cc.creative=ab(dc);cc.secondary_adgroups.forEach(function(ic){ic.creative=ab(ic.creative);});if(k.isCampaignManager()){var fc=u.generateCampaignGroupApiSpec(),gc=u.generateCampaignApiSpec(),hc=aa.generateAdgroupApiSpecDraft(gc,cc,ec);la.loadModules(["AdsCMDraftStore"],function(ic){if(ic.isDraftEnabled()){aa.createAdForCM(fc,gc,hc);}else kb(bc);});}else kb(bc);},function(bc,cc){hb(cc);});}function kb(bc){var cc=new ja();cc.setHandler(mb).setTimeoutHandler(bb,va(lb,j.CREATE_AD_TIMEOUT)).setErrorHandler(va(lb,j.CREATE_AD_FAIL));var dc=(new ta()).setEnum('creation_source',k.isCampaignManager()?q.CM:q.CF).setInt('ncf',y.get()).setInt('account_id',i.getAccountID()).setInt(na.BIZ_ID_PARAM_NAME,ka.getBusinessID()).getURI();cc.setURI(dc);cc.setData({create_spec:JSON.stringify(bc),destination_id:s.getDestinationID(),destination_type:s.getDestinationTypeIgnoringKPI()});cc.send();}function lb(bc,cc){cc=cc||{};ha.dispatch({action:{actionType:bc,errors:cc.errors,errorCodes:cc.error_codes||[cc.error],adgroupApiSpec:u.generateAdgroupApiSpec(),campaignApiSpec:u.generateCampaignApiSpec(),campaignGroupApiSpec:u.generateCampaignGroupApiSpec()}});if(m.getSelectedState().isNew&&cc.campaign_group_id){var dc=u.generateCampaignGroupApiSpec();dc.id=cc.campaign_group_id;dc.objective=t.getKPIObjective();dc.campaign_group_status=ya.ACTIVE;l.load(dc);l.select(dc.id);}if(n.getSelectedCampaignState().isNewCampaign&&cc.campaign_id)ha.dispatch({action:{actionType:j.CREATE_AD_FAIL_WITH_CAMPAIGN_SUCCESS,campaignID:""+cc.campaign_id,campaignGroupID:""+cc.campaign_group_id}});var ec={};if(cc.error_map){ec=cc.error_map;}else if(cc.error&&cc.errorDescription)ec[cc.error]=cc.errorDescription;z.onValidationErrors(ec);}function mb(bc){var cc=bc.payload||{};if(cc.primary_adgroup_id>0){if(k.isCampaignManager()){nb(cc);}else ob(cc);}else lb(j.CREATE_AD_FAIL,cc);}function nb(bc){var cc,dc;if(m.getSelectedState().isNew){cc=[bc.campaign_group_id];dc=za.CAMPAIGN_GROUP_PAGE;}else if(n.getSelectedCampaignState().isNewCampaign){cc=[bc.campaign_id];dc=za.CAMPAIGN_PAGE;}else{cc=[bc.primary_adgroup_id];if(bc.secondary_adgroups)Array.prototype.push.apply(cc,bc.secondary_adgroups);dc=za.ADGROUP_PAGE;}ba.removeBlocker();aa.dispatchPostCreateAction();if(bc.first_ad){da.replaceWithPage(aa.generatePageState(za.HOME_PAGE),ca.CREATION_PAGE);da.navigateToPage(aa.generatePageState(dc,cc),ca.CREATION_PAGE);}else da.replaceWithPage(aa.generatePageState(dc,cc),ca.CREATION_PAGE);aa.resetCreation();}function ob(bc){var cc={action:{actionType:j.CREATE_AD_SUCCESS,data:bc}};ha.dispatch(cc);if(bc.first_ad&&bc.force_redirect){var dc=new sa(bc.redirect_url),ec=dc.getQueryData();ec.allowRedirect=true;dc.setQueryData(ec);var fc=false,gc=function(){if(fc)return;dc.go();fc=true;},hc=new sa('https://ad.atdmt.com/m/img;m=11002201303866;cache=');hc.addQueryData({account_id:i.getAccountID(),objective:t.getAPIObjective(),step:3});xa(hc,gc);setTimeout(gc,2000);}}function pb(bc){var cc={},dc=bc.rawData;if(dc&&dc.error){cc[dc.error.code||eb]=dc.error.message;}else cc[cb]="Unable to save ad. Please try again in a few minutes.";z.onValidationErrors(cc);}function qb(){return new ra(function(bc){u.generateSpecForSave(function(cc){cc.creative=ab(cc.creative);bc(i.getDao().add.updateAdgroup.promiseOne(Object.assign({adgroupId:k.getAdgroupID(),locale:oa.get()},cc)));});});}function rb(){var bc=i.getState();i.getDao().mutate.updateAccount.one(sb,{timezone_id:bc.timezoneID,currency:bc.currency,name:bc.name,handleError:function(cc,dc){z.onValidationErrors(dc);}});}function sb(){ib(function(bc){g.addCredential('create_flow',db,i.getAccountID(),p.getCouponCode(),tb,null,null,bc);});}function tb(bc){if(!bc)return;if(bc.credential_state){jb();ha.handleUpdateFromViewAction({actionType:j.PAYMENTS_FLOW_SUCCESS});}ha.handleUpdateFromViewAction({actionType:j.PAYMENTS_FLOW_CANCELLED});return;}function ub(){var bc=new sa('/ads/manage/adgroups.php');bc.setQueryData({campaign_id:n.getSelectedCampaignState().campaignID,act:i.getAccountID(),show_adgroup_id:k.getAdgroupID(),allowRedirect:true}).setFragment('adgroup_id.'+k.getAdgroupID());var cc={action:{actionType:j.SAVE_AD_SUCCESS,redirectURL:bc.toString()}};ha.dispatch(cc);}function vb(){g.addCredential('create_flow',db,i.getAccountID(),null,jb,null,null,null);}function wb(){new pa().setTitle("Add to Balance").setBody("Your account balance is low. Add money to your balance to make sure you can run your ad.").setButtons([pa.newButton('skip',"Skip",'',jb),pa.newButton('add_money',"Add Money",'',vb)]).setModal(true).show();}function xb(bc){var cc=ma.getURIForTaxIDStep(i.getAccountID(),'brazil_cf_pux',bc);new pa().setAsync(new ja(cc)).setCloseHandler(function(dc){if(bc||(dc&&dc.success)){jb();}else ha.handleUpdateFromViewAction({actionType:j.PAYMENTS_FLOW_CANCELLED});}.bind(this)).show();}function yb(){var bc=i.getState(),cc=ua('ads_payments_trigger_payments_flow_prepay'),dc=fa.lowBalanceWarningPercentage;if(!cc||!bc.isPrepayAccount||!bc.spendCap)return false;if(bc.spendCap*dc<=bc.amountSpent)return true;return false;}function zb(){ha.handleUpdateFromViewAction({actionType:j.PLACE_ORDER_CLICKED});if(!gb())return;var bc=i.getState();if(yb()){wb();}else if(bc.isTaxIDRequired){xb(bc.canCreateAdWithoutTaxID);}else jb();ha.handleUpdateFromViewAction({actionType:j.PLACE_ORDER_INITIATED});}var ac={initiatePaymentFlow:sb,initiatePlaceOrder_DEPRECATED:function(){ha.handleUpdateFromViewAction({actionType:j.PLACE_ORDER_CLICKED});if(!gb())return;var bc=i.getState(),cc=i.hasAccountCapability(h.HAS_AVAILABLE_PAYMENT_METHODS),dc=i.isCorporateAccount();if(bc.isAllowedToEditCurrency&&!cc&&!dc){rb();}else zb();ha.handleUpdateFromViewAction({actionType:j.PLACE_ORDER_INITIATED});},initiateCreateAdAsync:zb,initiateReviewAd:function(){ha.handleUpdateFromViewAction({actionType:j.REVIEW_AD_INITIATED});if(!gb())return;ha.handleUpdateFromViewAction({actionType:j.REVIEW_DIALOG_SHOW});},cancelReviewDialog:function(){ha.handleUpdateFromViewAction({actionType:j.REVIEW_DIALOG_CANCEL});},setAdName:function(bc){ha.handleUpdateFromViewAction({actionType:j.CHANGE_AD_NAME,name:bc});},initiateSaveAd:function(){if(!gb())return;qb().done(ub,pb);ha.handleUpdateFromViewAction({actionType:j.SAVE_AD_INITIATED});}};e.exports=ac;},null);
__d("AdsCFReviewAd.react",["AdsAPIBidType","AdsAPIObjectives","AdsBidOptions","AdsBidUtils","AdsCFAccountStore","AdsCFAdNameStore","AdsCFAudienceEstimateStore","AdsCFCampaignGroupStore","AdsCFCampaignStore","AdsCFConstants","AdsCFCreativeStore","AdsCFDestinationStore","AdsCFObjectiveStore","AdsCFPlaceOrderViewActions","AdsCFPricingStore","AdsCFSimplePricingStore","AdsCurrencyFormatter","InfoTable.react","InfoTableRow.react","InfoTableSection.react","React","SubscriptionsHandler","XUIDateTimePickerUtils","cx","fbt","formatDate","invariant","isL2TargetingSupported","AdsTimezone","AdsCFPricingAPIConverter"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){"use strict";var ia=b('AdsTimezone').names,ja=w.formatCurrency,ka=b('AdsCFPricingAPIConverter').toAPI,la=aa.createClass({displayName:"AdsCFReviewAd",propTypes:{},componentWillMount:function(){this.subscriptions=new ba();var ma=[l,m,n,o,q,r,s,u,v];ma.forEach(function(na){this.subscriptions.addSubscriptions(na.subscribe('change',this._handleChange));}.bind(this));},componentWillUnmount:function(){this.subscriptions.release();},_handleChange:function(){this.forceUpdate();},render:function(){var ma=u.getState(p.CanonicalID),na=ka(ma).bid_type,oa=m.getTargetingSentencesState(p.CanonicalID).sentences;if(!oa||!na)return aa.createElement("div",null);var pa=l.getPrimaryAdName(),qa=o.getSelectedCampaignState(),ra=k.getState().currency,sa=s.getAPIObjective(),ta="Ad Name",ua="Audience",va="Campaign",wa="Ad Set",xa=qa.budgetMode===p.CampaignBudgetModes.DAILY?"Daily Budget":"Lifetime Budget",ya="Duration";return (aa.createElement("div",{className:"_5eae"},aa.createElement(x,null,aa.createElement(z,null,aa.createElement(y,{type:"data",label:ta},aa.createElement("input",{type:"text",className:"_5eai",onChange:this._setAdName,value:pa})),aa.createElement(y,{label:ua},this._getTargetingSentences(oa)),aa.createElement(y,{label:va},this._getCampaignGroupString()),aa.createElement(y,{label:wa},this._getCampaignString()),this._renderBidTypeRow(na),this._renderBidRow(na,ma,ra,sa),aa.createElement(y,{label:xa},this._getBudgetString(qa,ra)),aa.createElement(y,{label:ya},this._getDurationString(qa))))));},_renderBidTypeRow:function(ma){if(ha()&&v.hideAdvancedOptions())return null;var na="Bid Type";return (aa.createElement(y,{label:na},j.getBidTypeString(ma)));},_renderBidRow:function(ma,na,oa,pa){if(ha()&&v.hideAdvancedOptions())return null;var qa="Bid";return (aa.createElement(y,{label:qa},this._getBidString(ma,na,oa,pa)));},_getTargetingSentences:function(ma){var na=ma.map(function(oa,pa){if(oa.content){return (aa.createElement("li",{key:pa},aa.createElement("div",null,oa.content),(oa.children||[]).map(function(qa,ra){return (aa.createElement("div",{key:ra},'- '+qa));})));}else return aa.createElement("li",{key:pa},oa);});return (aa.createElement("div",null,"Your audience includes people:",aa.createElement("ul",{className:"_5eaj",key:"targetingSentences"},na)));},_getCampaignGroupString:function(){var ma=n.getSelectedState();return ma.name;},_getCampaignString:function(){var ma=o.getSelectedCampaignState(),na=ma.name;if(ma.isNewCampaign)na=ea._("{ad set name} (New Ad Set)",[ea.param("ad set name",na)]);return na;},_getBidString:function(ma,na,oa,pa){var qa="Auto";switch(ma){case g.CPA:if(na.actionAutobidEnabled)return qa;return (ea._("{amount} per conversion",[ea.param("amount",ja(oa,na.cpaPrice))]));case g.CPC:case g.MULTI_PREMIUM:if(na.clickAutobidEnabled)return qa;return (ea._("{amount} per click",[ea.param("amount",ja(oa,na.cpcPrice||0))]));case g.ABSOLUTE_OCPM:if(na.bidOption===i.REACH){if(pa===h.LOCAL_AWARENESS)return qa;return (ea._("{amount} per thousand impressions (estimated max)",[ea.param("amount",ja(oa,na.ocpmReachPrice||0))]));}ga(na.bidOption===i.OCPM_ACTIONS);if(na.actionAutobidEnabled)return qa;return (ea._("{amount} per conversion (estimated max)",[ea.param("amount",ja(oa,na.ocpmActionPrice||0))]));case g.CPM:return (ea._("{amount} per thousand impressions",[ea.param("amount",ja(oa,na.cpmPrice||0))]));default:break;}},_getBudgetString:function(ma,na){var oa=ja(na,ma.budget);if(ma.budgetMode===p.CampaignBudgetModes.LIFETIME)return oa;return (ea._("{daily budget} per day",[ea.param("daily budget",oa)]));},_getDurationString:function(ma){if(ma.scheduleMode===p.CampaignScheduleModes.SCHEDULED){var na=k.getState().timezoneOffsetHours,oa=ca.getOffsetUIDate(ma.startDate,na),pa=ca.getOffsetUIDate(ma.endDate,na);return (ea._("{campaign start} to {campaign end} ({timezone name})",[ea.param("campaign start",fa(oa,'m/d/Y g:ia',{utc:true})),ea.param("campaign end",fa(pa,'m/d/Y g:ia',{utc:true})),ea.param("timezone name",ia[k.getState().timezoneID])]));}else return ("This ad campaign will run indefinitely");},_setAdName:function(ma){t.setAdName(ma.target.value);}});e.exports=la;},null);
__d("AdsCFUpsell.react",["Layout.react","React","cx"],function(a,b,c,d,e,f,g,h,i){var j=g.Column,k=g.FillColumn,l=h.PropTypes,m=h.createClass({displayName:"AdsCFUpsell",propTypes:{title:l.string.isRequired,description:l.string,oneColumn:l.bool},getDefaultProps:function(){return {oneColumn:false};},render:function(){var n=null;if(this.props.oneColumn){n=h.createElement("div",{className:"_5iqn mtl ptm"},h.createElement("div",{className:"fsl fwb mbm"},this.props.title),h.createElement("div",null,this.props.description),this.props.children);}else n=h.createElement(g,{className:"_5iqn mtl ptm"},h.createElement(k,null,h.createElement("div",{className:"fsl fwb mbm"},this.props.title),this.props.description),h.createElement(j,null,this.props.children));return n;}});e.exports=m;},null);
__d("AdsCFUpsellConversionPixel.react",["AdsCFAccountStore","AdsCFUpsell.react","AdsCFUpsellViewActions","Link.react","React","XAdsManagerConversionTrackingControllerURIBuilder","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=k.createClass({displayName:"AdsCFUpsellConversionPixel",render:function(){var o="Learn about conversion tracking",p=new l().setInt('act',g.getAccountID()).getURI().toString(),q=m._("Conversion tracking can help you better measure the performance of your Facebook ads by reporting the actions people take on your website after viewing your ads. {link}.",[m.param("link",k.createElement(j,{href:{url:p},target:"_blank",onClick:this._linkClicked},"Start Now"))]);return (k.createElement(h,{title:o,oneColumn:true},q));},_linkClicked:function(){i.clickConversionPixelLink();}});e.exports=n;},null);
__d("AdsCFLoggerStore",["AdsActionTypes","AdsAPIObjectives","AdsBaseStore","AdsCFAccountStore","AdsCFActionTypes","AdsCFAudienceEstimateStore","AdsCFApplicationStore","AdsCFBidUtils","AdsCFCampaignStore","AdsCFCampaignUtils","AdsCFConstants","AdsCFConversionPixelStore","AdsCFCreativeStore","AdsCFDestinationStore","AdsCFLogger","AdsCFPageLocationStore","AdsCFPricingAPIConverter","AdsCFPricingStore","AdsCFReachEstimateUtils","AdsCFObjectiveConfirmationStore","AdsCFObjectiveStore","AdsCFObjectiveSuggestionsStore","AdsCFTargetingStore","AdsCFTripIDGenerator","AdsCFOutputAPIDataProcessor","AdsCFUpsellStore","AdsCommonTargetingActionTypes","AdsConversionPixelSnippetViewMode","AdsDestinationTypes","AdsDispatcher","AdsImageValidationActionTypes","AdsMapActionTypes","AdsPayloadSource","BizSiteIdentifier.brands","BusinessAccountActivityLoggerDomain","BusinessAccountActivityLoggerEvent","GrayAccountActivityLogger.brands","URIInitDataUtil","adsGKCheck","copyProperties","hasAdblock","isL2TargetingSupported","merge","whitelistObjectKeys"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa){var ya=q.CampaignBudgetModes,za=q.CampaignScheduleModes,ab=q.DestinationSelectionSource,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb;function mb(){bb=null;cb=null;db=null;eb=null;fb=null;gb=null;hb=null;ib=null;jb=null;kb=null;lb=null;}mb();var nb={ageMin:'targeting_age_min_changed',ageMax:'targeting_age_max_changed',ageMinLimit:'targeting_age_min_limit_changed',sex:'targeting_sex_changed',userAdclusters:'targeting_user_adclusters_changed',friendsOfConnections:'targeting_connections_changed',interestedIn:'targeting_interested_in_changed',relationshipSingle:'targeting_relationship_changed',relationshipInA:'targeting_relationship_changed',relationshipMarried:'targeting_relationship_changed',relationshipEngaged:'targeting_relationship_changed',relationshipUnspecified:'targeting_relationship_changed',locales:'targeting_locales_changed',educationStatus:'targeting_education_status_changed',educationSchools:'targeting_education_schools_changed',educationMajors:'targeting_education_majors_changed',minGradYear:'targeting_min_grad_year_changed',maxGradYear:'targeting_max_grad_year_changed',targetAllGraduationYears:'targeting_target_all_graduation_years_changed',workEmployers:'targeting_work_employers_changed'};function ob(dc){if(dc.hasOwnProperty('advancedOptions')){return 'click_show_adv_pricing';}else if(dc.hasOwnProperty('bidOption')){return 'click_adv_bid_optimization_change';}else if(dc.hasOwnProperty('clickAutobidEnabled')){return 'click_adv_bid_manual_clicks';}else if(dc.hasOwnProperty('actionAutobidEnabled'))return 'action_adv_bid_manual_actions';}function pb(dc){if(dc.hasOwnProperty('cpcPrice')){return 'modify_cpc_bid_value';}else if(dc.hasOwnProperty('cpmPrice')){return 'modify_cpm_bid_value';}else if(dc.hasOwnProperty('ocpmActionPrice'))return 'modify_ocpm_action_bid_value';}function qb(){return {create_time_taken:(Date.now()-hb),place_order_time_take:(Date.now()-gb)};}function rb(dc){return {isValidDestination:dc.isValid,numberOfSuggestions:dc.suggestedKPIObjectives.length,objectivesSuggestions:dc.suggestedKPIObjectives};}function sb(event,dc){dc=dc||{};Object.assign(dc,{payloadSource:fb});u.log(event,dc);}function tb(event,dc){dc=dc||{};Object.assign(dc,{payloadSource:fb});u.logOnce(event,dc);}function ub(){ja.waitFor([j.dispatchToken]);return xa(j.getState(),['timezoneID','currency','country']);}function vb(){return Math.round(Date.now()/1000);}function wb(){return l.getBidEstimateState(q.CanonicalID);}function xb(){return p.getDailyBudget(o.getSelectedCampaignState(),j.getState().timezoneOffsetHours);}function yb(){return x.getState(q.CanonicalID);}for(var zb in i)if(i.hasOwnProperty(zb))bc[zb]=i[zb];var ac=i===null?null:i.prototype;bc.prototype=Object.create(ac);bc.prototype.constructor=bc;bc.__superConstructor__=i;function bc(){"use strict";if(i!==null)i.apply(this,arguments);}bc.prototype.getStoreName=function(){"use strict";return 'AdsCFLoggerStore';};bc.prototype.onDispatchToken=function(dc){"use strict";var ec,fc=dc.action,gc=fc.actionType;fb=dc.payloadsource;if(fb===ma.VIEW_ACTION&&(gc==k.BID_OPTION_CHANGE||gc==k.BID_PRICE_CHANGE||gc==k.CONVERSION_PIXEL_CHANGE))tb('pricing_changed');var hc,ic,jc,kc;switch(gc){case k.LOG:sb(fc.event,fc.data);break;case k.INIT_STARTED:db=Date.now();u.updateDefaultData({account_id:j.getAccountID(),js_push_phase:fc.js_push_phase,ncf:da.get(),isPrefill:m.isCreatingNew()&&ra.isPrefilledFromURI()});var lc=m.getAdgroupID();if(lc)u.updateDefaultData({adgroup_id:lc});sb('adscreator_init',{time_to_load_module:fc.time_to_load_module,client_side_referrer:document.referrer});break;case k.INIT_DATA_RECEIVED:sb('adscreator_data_ready',{response_time:(Date.now()-db)});break;case k.INIT_DATA_LOADED:sb('adscreator_render_views',{isUsingDaoBatching:false,response_time:(Date.now()-db)});switch(m.getCurrentMode()){case q.CreateMode.EDIT_EXISTING:hc='show_edit_existing';break;case q.CreateMode.EDIT_EXISTING_CAMPAIGN:hc='show_edit_existing_campaign';break;case q.CreateMode.CREATE_SIMILAR:hc='show_create_similar';break;default:if(m.getPendingObjectID()){hc='show_create_reenter';}else hc='show_create';break;}ic={adgroup_id:m.getAdgroupID(),response_time:(Date.now()-db),client_side_referrer:document.referrer};sb(hc,ic);break;case k.ACCOUNT_INIT:ja.waitFor([j.dispatchToken]);u.updateDefaultData({isL2TargetingSupported:va()});break;case k.CHANGE_ACTORS:var mc=fc.availableActors;if(mc&&mc.length>0){sb('has_url_eligible_pages',{published_pages:mc.length,all_pages:fc.allActors.length});}else sb('no_url_eligible_pages',{published_pages:0,all_pages:fc.allActors.length});break;case k.CHANGE_ACCOUNT_COUNTRY:sb('change_account_country',ub());break;case k.CHANGE_ACCOUNT_CURRENCY:sb('change_account_currency',ub());break;case k.CHANGE_ACCOUNT_TIMEZONE_ID:sb('change_account_timezone_id',ub());break;case k.CHANGE_CAMPAIGN_DAY_PARTING_SCHEDULE:sb('change_day_parting_schedule',{campaign_schedule:fc.campaignSchedule,pacing_type:fc.pacingType});break;case k.CHANGE_CAMPAIGN_PACING:sb('change_campaign_pacing',{pacing_type:fc.pacingType});break;case k.CHANGE_CAMPAIGN_CREATIVE_ROTATION:sb('change_campaign_creative_rotation',{creative_rotation_type:fc.creativeRotationType,creative_rotation_parameter:fc.creativeRotationParameter});break;case k.CREATIVE_CHANGE:ja.waitFor([ba.dispatchToken]);u.updateDefaultData(rb(ba.getCompatibilityStatus()));if('storyId' in fc){sb('click_post_selector');}else if('mobileStore' in fc){u.resetLogOnceForEvent('has_cpa_bid_option');}else if('actor' in fc){if(fc.actor){sb('success_fb_page_selector',{eventSource:fc.eventSource});}else sb('edit_fb_page_selector',{eventSource:fc.eventSource});}else{var nc={title:'change_title',body:'change_body',linkDescription:'change_linkDescription',callToActionType:'change_call_to_action'};Object.keys(nc).forEach(function(rd){if(rd in fc){sb('creative_changed');jc=s.getState();tb(nc[rd],{creative_type:jc.creativeType});}});}break;case k.CREATIVE_PLACEMENTS_CHANGE:sb('change_placements',{eventSource:dc.action.eventSource,placementList:dc.action.placementList,state:dc.action.enabled});break;case k.CLICK_CONTACT_ADMIN:sb('click_contact_admin',{objectID:dc.action.objectID});break;case k.TARGETING_CHANGE:if(fb!==ma.VIEW_ACTION)break;sb('targeting_changed');for(kc in nb)if(kc in fc){tb(nb[kc]);break;}break;case k.CODE_MAP_CHANGE:var oc=dc.action.errors,pc=[],qc;for(qc in oc)pc.push(oc[qc]);if(!pc.length)break;var rc=ea.generateAdgroupApiSpec();sb('informed_error',{errors:pc,codesToError:oc,ad_api_spec:rc,new_campaign_api_spec:ea.generateCampaignApiSpec()});Object.keys(oc).forEach(function(rd){var sd=oc[rd];sb('error_occurrence',{campaign_id:rc.campaign_id,error_code:rd,error_msg:sd});});break;case k.BID_OPTION_CHANGE:if(fb!==ma.VIEW_ACTION)break;hc=ob(fc);hc&&tb(hc);break;case k.BID_PRICE_CHANGE:if(fb!==ma.VIEW_ACTION)break;hc=pb(fc);hc&&tb(hc);break;case k.RESTORE_PRICING_DEFAULTS:sb('restore_pricing_defaults');break;case k.CONVERSION_PIXEL_CHANGE:if(fb!==ma.VIEW_ACTION)break;hc=fc.conversionPixelID?'conversion-pixel-selected':'conversion-pixel-removed';tb(hc);break;case k.CPA_BID_AVAILABLE:ec={};if(fc.mobileStore)ec.mobile_store=fc.mobileStore;u.updateDefaultData(ec);tb('has_cpa_bid_option');break;case k.RESET_DESTINATION:sb('click_xout_destination');break;case k.KPI_DESTINATION_SELECT:case k.DESTINATION_SELECT:jb=Date.now();cb=Date.now();bb=fc.destinationEntry.isCachedURL;break;case k.MOBILE_OPTIMIZED_URL_CHECK_FAIL:case k.MOBILE_OPTIMIZED_URL_CHECK_SUCCESS:if(gc===k.MOBILE_OPTIMIZED_URL_CHECK_FAIL){sb('mobile_optimized_url_check_fail',{url:fc.url,response_time:Date.now()-jb,errorType:fc.errorType,error:fc.error});}else sb('mobile_optimized_url_check_success',{url:fc.url,response_time:Date.now()-jb,is_mobile_optimized:fc.isMobileOptimized});jb=null;break;case k.DESTINATION_CHANGE:u.resetLogOnceForEvent('has_cpa_bid_option');ja.waitFor([s.dispatchToken,t.dispatchToken,z.dispatchToken,aa.dispatchToken,ba.dispatchToken,v.dispatchToken]);var sc=t.getDestinationDetails();if(!sc||!sc.actualDestinationType)break;if(z.didAutoContinue())sb('kpi_objective_auto_confirm');ec={hasAdvertisingPermissions:sc.isAdmin,has_advertising_permissions:sc.isAdmin,destination_id:t.getDestinationID(),destination_is_cached_url:bb,destination_type:t.getDestinationType().toString(),objective:aa.getAPIObjective()};if(t.getDestinationType()===ia.APP){ec.neko_eligible=t.getHasNativeMobileApp();var tc=sc.mobileStoreDestinationType;if(tc){ec.neko_kind=tc;ec.destination_url=sc.originalObjectUrl;}}if(fc.destSource)ec.destSource=fc.destSource;Object.assign(ec,rb(ba.getCompatibilityStatus()));u.updateDefaultData(ec);if(fb!==ma.VIEW_ACTION||fc.destSource===ab.SINGLE_OBJECT_PREFILL){tb('auto_entity_chosen');}else sb('click_entity_chosen');if(cb){sb('destination_render',{response_time:Date.now()-cb});cb=null;}var uc=s.getState();if(uc&&uc.imageList&&uc.imageList.length)sb('show_default_creative_image');if(aa.getAPIObjective()===h.LOCAL_AWARENESS&&m.isCreatingNew()){var vc=sc.location,wc=vc?vc.street:null;sb('page_chosen_local',{hasAddress:!!wc,showAddressForm:(sa('ads_cf_local_page_address_form')&&v.getStatus()===v.Status.UNCONFIRMED)});}break;case k.PLACE_ORDER_INITIATED:sb('click_place_order_main');gb=Date.now();break;case k.REVIEW_AD_INITIATED:sb('click_review_ad_main');break;case k.REVIEW_DIALOG_SHOW:sb('review_ad_dialog_show');break;case k.SAVE_AD_INITIATED:sb('hit_save');break;case k.PAYMENTS_FLOW_ERROR:sb('payment_error',{data:fc.data});break;case k.OBJECTIVE_CHANGE:ja.waitFor([aa.dispatchToken,ba.dispatchToken]);if(fb!==ma.VIEW_ACTION){u.updateDefaultData({objective:aa.getAPIObjective()});if(fc.autoConfirm)sb('kpi_objective_auto_select_confirm');break;}u.updateDefaultData(wa({objective:aa.getAPIObjective()},rb(ba.getCompatibilityStatus())));sb('objective_selected');break;case k.KPI_OBJECTIVE_SEE_MORE:tb('kpi_objective_see_more');break;case k.KPI_OBJECTIVE_CHANGE:ja.waitFor([z.dispatchToken,aa.dispatchToken,ba.dispatchToken]);if(fb!==ma.VIEW_ACTION)break;eb=Date.now();u.updateDefaultData(wa({kpiObjective:aa.getKPIObjective(),objective:aa.getAPIObjective(),previousKpiObjective:fc.previousKpiObjective},rb(ba.getCompatibilityStatus())));sb('kpi_objective_selected',{event_detail:aa.getKPIObjective(),objectiveChangeSource:fc.source,objectiveConfirmed:z.getIsKPIObjectiveConfirmed()});break;case k.KPI_OBJECTIVE_CONFIRM:ja.waitFor([aa.dispatchToken]);var xc,yc;if(fc.confirmed){xc='kpi_objective_confirm';yc=Date.now()-eb;eb=null;}else{xc='kpi_edit_objective';eb=Date.now();}sb(xc,{objectiveConfirmed:fc.confirmed,kpiObjectiveSelectToConfirmTime:yc});break;case k.PAGE_SELECTOR_CLICK:sb('click_fb_page_selector',{eventSource:fc.eventSource});break;case k.PAGE_CREATE_CLICK:sb(fc.eventType,{eventSource:fc.eventSource});break;case k.IMAGE_UPLOAD_CLICK:sb('click_upload_image_selector');break;case k.STOCK_IMAGE_SEARCH:sb('search_stock_images',{query:fc.query,offset:fc.offset});break;case k.IMAGE_UPLOAD_SUCCESS:if(fc.images){fc.images.forEach(function(rd){sb('success_upload_image_selector',{adImageSpecs:fc.imageSpec,imageDimensions:{width:rd.width,height:rd.height}});});}else sb('success_upload_image_selector',{adImageSpecs:fc.imageSpec,imageDimensions:{width:fc.image.width,height:fc.image.height}});break;case k.IMAGE_DOWNLOAD_ERROR:ua(function(rd){sb('image_download_error',{createMode:m.getCurrentMode(),hasAdblock:rd,image_url:fc.image.getUrl(),image_hash:fc.image.getAdAccountHash(),placement:fc.placement});});break;case k.IMAGE_DIALOG_OPEN:sb('image_dialog_open',{dialog:fc.dialog});break;case k.IMAGE_SELECT_SUCCESS:case k.IMAGE_DESELECT_SUCCESS:hc=gc===k.IMAGE_SELECT_SUCCESS?'success_image_library_image_selector':'success_image_library_image_deselect';var zc=fc.image;sb(hc,{adImageSpecs:fc.imageSpec,imageType:fc.imageType,imageDimensions:{width:zc.width,height:zc.height}});break;case k.IMAGE_SELECT_CONFIRMED:sb('confirm_image_library_image_selector',{});break;case k.IMAGE_SELECT_CANCEL:sb('cancel_image_library_image_selector');break;case k.IMAGE_LIBRARY_TAB_CLICK:sb('click_image_tab',{tab_key:fc.tabKey});break;case k.STOCK_IMAGE_GUIDELINES_SHOW:sb('show_stock_image_guidelines');break;case k.IMAGE_CROP_CHANGE:sb('change_image_crops',{creativeType:fc.creativeType,cropKey:fc.cropKey,placement:fc.placement});break;case k.IMAGE_CROP_ITEM_CLICK:sb('click_image_cropper_item',{creativeType:fc.creativeType,cropKey:fc.cropKey,placement:fc.placement,disabled:fc.disabled});break;case k.IMAGE_CROP_DIALOG_SHOW:sb('show_image_cropper_dialog',{creativeType:fc.creativeType,imageCount:fc.imageCount});break;case k.VIDEO_UPLOAD_START:kb=vb();break;case k.VIDEO_UPLOAD_SUCCESS:sb('video_upload_duration',{duration:vb()-kb});kb=null;lb=vb();break;case k.VIDEO_UPLOAD_ERROR:sb('video_upload_error',{duration:vb()-kb,details:fc.details});kb=null;break;case k.VIDEO_UPLOAD_CANCEL:var ad=lb?lb:kb;sb('video_upload_cancel',{step:lb?'ENCODING':'UPLOADING',duration:vb()-ad});kb=null;break;case k.VIDEO_ENCODING_SUCCESS:sb('video_encoding_duration',{duration:vb()-lb});lb=null;break;case k.CHANGE_CAMPAIGN_BUDGET:if(fb!==ma.VIEW_ACTION)break;sb('change_campaign_budget',{oldBudget:fc.logData.oldBudget,newBudget:fc.budget});break;case k.CHANGE_CAMPAIGN_BUDGET_MODE:if(fb!==ma.VIEW_ACTION)break;var bd=fc.budgetMode===ya.DAILY;sb('change_budget_mode',{budget_mode:bd?'daily':'lifetime'});break;case k.CHANGE_CAMPAIGN_NAME:if(fb!==ma.VIEW_ACTION)break;sb('change_campaign_name');break;case k.SELECT_NEW_CAMPAIGN:if(fb!==ma.VIEW_ACTION)break;sb('click_new_campaign');break;case k.SELECT_EXISTING_CAMPAIGN:if(fb!==ma.VIEW_ACTION)break;sb('click_use_existing_campaign');break;case k.CAMPAIGN_SELECT:if(fb!==ma.VIEW_ACTION)break;sb('campaign_select');break;case k.EDIT_CAMPAIGN_BUTTON_CLICK:if(fb!==ma.VIEW_ACTION)break;sb('edit_campaign_button_click');break;case k.CANCEL_EDITED_CAMPAIGN:if(fb!==ma.VIEW_ACTION)break;sb('cancel_edited_campaign');break;case k.CHANGE_CAMPAIGN_SCHEDULE:if(fb!==ma.VIEW_ACTION)break;sb('change_campaign_schedule',{oldStartDate:fc.logData.oldStartDate.getTime(),oldEndDate:fc.logData.oldEndDate.getTime(),newStartDate:fc.startDate.getTime(),newEndDate:fc.endDate.getTime()});break;case k.CHANGE_CAMPAIGN_SCHEDULE_MODE:if(fb!==ma.VIEW_ACTION)break;sb('change_run_continuously',{run_continuously:fc.scheduleMode===za.CONTINUOUSLY});break;case k.CHANGE_CAMPAIGN_STATUS:if(fb!==ma.VIEW_ACTION)break;sb('change_campaign_status',{campaign_status:fc.status});break;case k.DISMISS_CAMPAIGN_SAVE_SUCCESS:if(fb!==ma.VIEW_ACTION)break;sb('dismiss_campaign_save_success');break;case k.SAVE_EDITED_CAMPAIGN_CLICK:if(fb!==ma.VIEW_ACTION)break;ib=Date.now();sb('save_edited_campaign_click');break;case k.SAVE_EDITED_CAMPAIGN_ERROR:sb('save_edited_campaign_error',{campaignData:fc.logData.campaignData,errorCode:fc.error.code,duration:Date.now()-ib});break;case k.SAVE_EDITED_CAMPAIGN_SUCCESS:sb('save_edited_campaign_success',{duration:Date.now()-ib});break;case k.SAVE_EDITED_CAMPAIGN_TIMEOUT:sb('save_edited_campaign_timeout',{duration:Date.now()-ib});break;case k.CAMPAIGN_GROUP_SELECT_AND_UPDATE:if(fb!==ma.VIEW_ACTION)break;sb('campaign_group_name_change');break;case k.CAMPAIGN_GROUP_SELECT:if(fb!==ma.VIEW_ACTION)break;sb('campaign_group_select');break;case k.CAMPAIGN_GROUPS_LOADED:sb('campaign_groups_loaded');break;case k.CHANGE_BID_SECTION_VISIBILITY:sb('change_bid_section_visibility',{hideAdvancedOptions:fc.hideAdvancedOptions});break;case k.HELP_LINK_CLICK:if(fc.eventSource){sb(fc.eventName,{eventSource:fc.eventSource});}else sb(fc.eventName);break;case k.COUPON_ACTIVATED:sb('coupon_activated');break;case k.CHANGE_FUNDING_SOURCE:sb('change_funding_source');break;case k.CREATING_AD:sb('success_dialog_create_ad_started');hb=Date.now();break;case k.CREATE_AD_SUCCESS:var cd={};if(aa.getAPIObjective()===h.LOCAL_AWARENESS){var dd=wb(),ed=xb(),fd=y.getReachBounds(dd,ed,yb()),gd=ca.getLocalGeoState(q.CanonicalID);cd={audienceSize:dd.estimate_DAU,distanceUnit:gd.distanceUnit,dailyBudget:ed,estimatedReach:fd,latitude:gd.latitude,longitude:gd.longitude,radiusSelected:gd.radius,radiusSuggested:gd.lastSuggestedRadius};}sb('success_dialog_create_ad_success',ta(qb(),fc.data,cd));qa.log({business_id:na.getBusinessID(),ad_account_id:j.getAccountID(),domain:oa.ADS_CREATE_FLOW,event:pa.AD_CREATE});break;case k.SAVE_AD_SUCCESS:var hd=yb(),id=w.toAPI(hd),jd=id.bid_type,kd=aa.getAPIObjective(),ld=n.getBiddingBehaviorLogging(hd,wb(),jd,kd);sb('save_ad_success',ta(id,{bidding_behavior:ld}));break;case k.CREATE_AD_FAIL:sb('success_dialog_fail_ad_creation',ta(qb(),{errors:fc.errors,errorCodes:fc.errorCodes,adgroupApiSpec:fc.adgroupApiSpec,campaignApiSpec:fc.campaignApiSpec}));break;case k.CREATE_AD_TIMEOUT:sb('success_dialog_ad_creation_timeout',ta(qb(),{adgroupApiSpec:fc.adgroupApiSpec,campaignApiSpec:fc.campaignApiSpec}));break;case k.REQUEST_RELATED_DATA_FAIL:sb('success_dialog_fail_request_related_data',ta(qb(),{errors:fc.errors}));break;case k.REQUEST_RELATED_DATA_SUCCESS:sb('success_dialog_shown',qb());ja.waitFor([fa.dispatchToken]);var md=fa.getUpsells();Object.keys(md).forEach(function(rd){sb('upsell_shown_'+rd.toLowerCase());});break;case k.CONVERSION_PIXEL_LINK_CLICK:sb('upsell_click_conversion_pixel');break;case k.EXTEND_CAMPAIGN:sb('upsell_click_extend_campaign',{days:fc.value});break;case k.INCREASE_BUDGET:sb('upsell_click_increase_budget',{amount:fc.value});break;case k.TRACK_MOBILE_APP_INSTALL_COMPOSE:sb('upsell_click_track_mobile_app_install_compose');break;case k.TRACK_MOBILE_APP_INSTALL_SEND:sb('upsell_click_track_mobile_app_install_send');break;case k.TRACK_MOBILE_APP_INSTALL_INFO:sb('upsell_click_track_mobile_app_install_info');break;case k.CREATE_SIMILAR_AD:sb('success_dialog_click_create_similar');break;case k.ADS_MANAGER_REDIRECT:sb('success_dialog_click_manage_ads');break;case k.CONVERSION_PIXEL_CREATED:sb('conversion_pixel_created',{pixelID:fc.pixelID});break;case k.CONFIRM_SNIPPET_VIEW:var nd=x.getState(q.CanonicalID).conversionPixelID,od=fc.placement,pd=r.getState(od);if(pd.viewMode===ha.EMAIL_CODE)sb('conversion_pixel_email_send',{pixelID:nd,recipient:pd.recipient,personalMessage:pd.personalMessage});break;case k.NAVIGATION_SECTION_GO:sb('navigation_click',{section_id:fc.id});break;case k.NAVIGATION_SECTION_ENTERED:sb('navigation_section_entered',{section_id:fc.id,section_event:fc.event});break;case k.INIT_DATA_FETCH_ERROR:sb('init_data_fetch_error',{error:fc.error});break;case g.PAGE_TRANSITION:case k.RESET_CF_STORES:u.resetLogOnceForAllEvents();mb();break;case k.RHC_REDESIGN_CHANGE:sb('rhc_redesign_change',{value:fc.value});break;case ka.AD_IMAGE_VALIDATION_API_COMPLETE:sb('ad_image_validation_api_complete',{imageUrl:fc.image});break;case ka.AD_IMAGE_VALIDATION_API_INIT:sb('ad_image_validation_api_init',{imageUrl:fc.image});break;case ka.AD_IMAGE_VALIDATION_TOOL_USE:sb('ad_image_validation_tool_use',{imageUrl:fc.image});break;case ka.AD_IMAGE_VALIDATION_NOTICE_SHOWN:sb('ad_image_validation_notice_shown',{imageUrls:fc.images});break;case k.AD_API_ERROR:sb('ad_api_error',{error:fc.error});break;case ga.GEO_COORDINATES_LOADED:ja.waitFor([v.dispatchToken]);var qd=v.getAddressString()===fc.address;if(fc.isValid){sb('geo_coordinates_loaded_success',ta({address:fc.address,latitude:fc.latitude,longitude:fc.longitude,isFromPageLocationForm:qd},fc.logData));}else sb('geo_coordinates_loaded_fail',ta({address:fc.address,isFromPageLocationForm:qd},fc.logData));break;case la.BOUNDING_BOX_LOADED:sb('country_bounding_box_loaded',{country:fc.country,isValid:fc.isValid});break;case la.MAP_ZOOM_IN:case la.MAP_ZOOM_OUT:tb('local_map_zoom_changed');break;case k.PAGE_LOCATION_CHANGED:sb('page_location_changed',xa(fc,['error','newLocation','pageID','success']));break;case k.PAGE_LOCATION_FORM_ACCEPT:sb('page_location_form_accept',{location:v.getLocation()});break;}};var cc=new bc();a.debug_AdsCFLoggerStore=cc;e.exports=cc;},null);
__d("ResizeEventHandler",["requestPersistentAnimationFrame"],function(a,b,c,d,e,f,g){function h(i){"use strict";this.$ResizeEventHandler0=false;this.$ResizeEventHandler1=i;this.$ResizeEventHandler2=this.$ResizeEventHandler2.bind(this);this.handleEvent=this.handleEvent.bind(this);}h.prototype.handleEvent=function(event){"use strict";if(this.$ResizeEventHandler0===false){this.$ResizeEventHandler0=true;g(this.$ResizeEventHandler2);}};h.prototype.$ResizeEventHandler2=function(){"use strict";this.$ResizeEventHandler0=false;this.$ResizeEventHandler1();};e.exports=h;},null);