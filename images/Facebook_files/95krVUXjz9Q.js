/*!CK:1082201037!*//*1415591886,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["L4g3Q"]); }

__d("XGamesReplaceableXOutAsyncControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/games\/async\/xout\/replace\/",{unit_type:{type:"String"},fbs:{type:"Int"},app_id:{type:"Int"},ego_imp:{type:"String"},extra_data:{type:"String"},query_type:{type:"String"},query_params:{type:"String"},excluded_app_ids:{type:"StringVector"},attributes:{type:"String"}});},null);
__d("GamesXOut.react",["cx","React"],function(a,b,c,d,e,f,g,h){var i=h.createClass({displayName:"GamesXOut",propTypes:{onClick:h.PropTypes.func.isRequired},render:function(){return (h.createElement("div",{className:"_2b2u"},this.props.children,h.createElement("div",{className:"_1m6e",onClick:this.props.onClick})));}});e.exports=i;},null);
__d("GamesReplaceableXOut.react",["cx","React","DOMContainer.react","Parent","XGamesReplaceableXOutAsyncControllerURIBuilder","AsyncRequest","DOM","invariant","GamesXOut.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p={},q=0,r='data-games-xout-container';function s(ca){var da=j.byAttribute(ca,r);if(da){var ea=parseInt(da.getAttribute(r),10);if(ea===0){q+=1;ea=q.toString();da.setAttribute(r,ea);}return ea;}}function t(ca){var da=s(ca);n(da);return da;}function u(ca){var da=p[t(ca)];return da?Object.keys(da):[];}function v(ca,da){return w(ca,[da]);}function w(ca,da){var ea=s(ca);if(ea){var fa=p[ea]=p[ea]||{};for(var ga=0;ga<da.length;ga+=1)fa[da[ga]]=true;}}function x(ca){var da=t(ca);if(da){delete p[da];delete y[da];}}var y={};function z(ca,da){var ea=s(ca);if(!ea)return;var fa=y[ea]=(y[ea]||[]);if(fa.length===0)da();fa.push(da);}function aa(ca){var da=t(ca),ea=y[da];if(ea){ea.shift();if(ea.length>0)ea[0]();}}var ba=h.createClass({displayName:"GamesReplaceableXOut",propTypes:{unitType:h.PropTypes.string.isRequired,appID:h.PropTypes.string.isRequired,domChild:h.PropTypes.any.isRequired,extraData:h.PropTypes.string.isRequired,egoImp:h.PropTypes.string,attributes:h.PropTypes.string.isRequired},statics:{deleteContainer:x,registerAppIDs:w},getInitialState:function(){return {pending:false};},componentDidMount:function(){var ca=this.getDOMNode();v(ca,this.props.appID);},componentWillUnmount:function(){if(this._request)this._request.abandon();},_handleXOutResponse:function(ca){var da=this.getDOMNode(),ea=ca.payload;v(da,ea.app_id);aa(da);h.unmountComponentAtNode(da);m.replace(da,ea.el);},_handleReplace:function(){this.setState({pending:true});z(this.getDOMNode(),this._sendFeedback);},_sendFeedback:function(){var ca=j.byAttribute(this.getDOMNode(),r),da=(new k()).setInt('app_id',this.props.appID).setString('extra_data',this.props.extraData).setString('ego_imp',this.props.egoImp).setString('attributes',this.props.attributes).setString('query_type',ca.getAttribute('data-games-xout-query-type')).setString('query_params',ca.getAttribute('data-games-xout-query-params')).setString('unit_type',this.props.unitType).setInt('fbs',ca.getAttribute('data-games-xout-fbs')).setStringVector('excluded_app_ids',u(this.getDOMNode())).getURI();this._request=new l(da).setHandler(this._handleXOutResponse).setMethod('POST');this._request.send();},render:function(){var ca=h.createElement(i,null,this.props.domChild);if(!this.state.pending){ca=h.createElement(o,{onClick:this._handleReplace},ca);}else ca=h.createElement("div",{className:"_4ksu"},ca);return ca;}});e.exports=ba;},null);
__d("GamesReplaceableXOutContainer.react",["React","GamesReplaceableXOut.react","DOMContainer.react"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:"GamesReplaceableXOutContainer",propTypes:{domChild:g.PropTypes.any.isRequired},componentWillUnmount:function(){h.deleteContainer(this.getDOMNode());},render:function(){return (g.createElement(i,null,this.props.domChild));}});e.exports=j;},null);